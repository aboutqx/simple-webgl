(window.webpackJsonp=window.webpackJsonp||[]).push([[12,22],{106:function(s,t){s.exports="#version 300 es\n#define GLSLIFY 1\nlayout (location = 0) in vec3 position;\nlayout (location = 1) in vec3 normal;\n\nuniform mat4 mMatrix;\nuniform mat4 vMatrix;\nuniform mat4 pMatrix;\n\nout vec3 Normal;\nout vec3 FragPos;\nvoid main()\n{\n  Normal = mat3(transpose(inverse(mMatrix))) * normal; // 法线矩阵 修复不等比缩放\n  FragPos = vec3(mMatrix * vec4(position, 1.0));\n  gl_Position = pMatrix * vMatrix * mMatrix * vec4(position, 1.0);\n\n}\n"},107:function(s,t){s.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nout vec4 FragColor;\n\nstruct Material {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n    float shininess;\n};\nstruct Light {\n    vec3 position;\n\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n};\nin vec3 FragPos;\nin vec3 Normal;\n\nuniform vec3 camPos;\nuniform Material material;\nuniform Light light;\n\n\nvoid main()\n{\n  // ambient\n  vec3 ambient = light.ambient * material.ambient;\n\n  // diffuse\n  vec3 norm = normalize(Normal);\n  vec3 lightDir = normalize(light.position - FragPos);\n  float diff = max(dot(norm, lightDir), 0.0);\n  vec3 diffuse = light.diffuse * (diff * material.diffuse);\n\n  // specular\n  vec3 viewDir = normalize(camPos - FragPos);\n  vec3 reflectDir = reflect(-lightDir, norm);\n  float spec = pow(max(dot(viewDir, reflectDir), 0.0), material.shininess);\n  vec3 specular = light.specular * (spec * material.specular);\n\n  vec3 result = ambient + diffuse + specular;\n  FragColor = vec4(result, 1.0);\n}\n"},142:function(s,t){s.exports="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec3 normal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n    vTextureCoord = texCoord;\n    vNormal = normal;\n}"},143:function(s,t){s.exports="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}"},28:function(s,t,e){"use strict";var i=e(0),h=e(14),r=e(12);e(144);const a=(s,t)=>{if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0},u=s=>{const t=s.split("\n");for(let s=0;s<t.length;s++)t[s]=`${s+1}: ${t[s]}`;return t.join("\n")},n=s=>s.slice?s.slice(0):new Float32Array(s),p=e(142),o=e(143),c={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"};class m{constructor(s=p,t=o,e){this.parameters=[],this._uniformTextures=[],this._varyings=e,s||(s=p),t||(t=p);const i=this._createShaderProgram(s,!0),h=this._createShaderProgram(t,!1);this._attachShaderProgram(i,h)}use(){this.bind()}bind(){i.c.useProgram(this.shaderProgram),i.a.useShader(this)}uniform(s,t,e){if("object"==typeof s)return void this.uniformObject(s);const h=c[t]||t;let r,u=!1,p=-1;for(let t=0;t<this.parameters.length;t++)if((r=this.parameters[t]).name===s){u=!0,p=t;break}let o=!1;if(u?(this.shaderProgram[s]=r.uniformLoc,o=r.isNumber):(o="uniform1i"===h||"uniform1f"===h,this.shaderProgram[s]=i.c.getUniformLocation(this.shaderProgram,s),o?this.parameters.push({name:s,type:h,value:e,uniformLoc:this.shaderProgram[s],isNumber:o}):this.parameters.push({name:s,type:h,value:n(e),uniformLoc:this.shaderProgram[s],isNumber:o}),p=this.parameters.length-1),this.parameters[p].uniformLoc)if(-1===h.indexOf("Matrix"))if(o){(this.parameters[p].value!==e||!u)&&(i.c[h](this.shaderProgram[s],e),this.parameters[p].value=e)}else a(this.parameters[p].value,e)&&u||(i.c[h](this.shaderProgram[s],e),this.parameters[p].value=n(e));else a(this.parameters[p].value,e)&&u||(i.c[h](this.shaderProgram[s],!1,e),this.parameters[p].value=n(e))}style(s){this.uniformObject(s)}uniformObject(s){for(const t in s)if(s[t]instanceof h.a||s[t]instanceof r.a){const e=s[t];let i=-1;this._uniformTextures.forEach((s,h)=>{s.name===t&&(i=h,s.texture=e)}),-1===i&&(i=this._uniformTextures.length,this._uniformTextures.push({name:t,texture:e})),this.uniform(t,"uniform1i",i),e.bind(i)}else{let e=s[t];const i=m.getUniformType(e);if(e.concat&&e[0].concat){let s=[];for(let t=0;t<e.length;t++)s=s.concat(e[t]);e=s}this.uniform(t,i,e)}}_createShaderProgram(s,t){const e=t?i.c.VERTEX_SHADER:i.c.FRAGMENT_SHADER,h=i.c.createShader(e);return i.c.shaderSource(h,s),i.c.compileShader(h),i.c.getShaderParameter(h,i.c.COMPILE_STATUS)?h:(console.warn("Error in Shader : ",i.c.getShaderInfoLog(h)),console.log(u(s)),null)}_attachShaderProgram(s,t){this.shaderProgram=i.c.createProgram(),i.c.attachShader(this.shaderProgram,s),i.c.attachShader(this.shaderProgram,t),i.c.deleteShader(s),i.c.deleteShader(t),this._varyings&&(console.log("Transform feedback setup : ",this._varyings),i.c.transformFeedbackVaryings(this.shaderProgram,this._varyings,i.c.SEPARATE_ATTRIBS)),i.c.linkProgram(this.shaderProgram)}}m.getUniformType=function(s){const t=function(s){return 9===s.length?"uniformMatrix3fv":16===s.length?"uniformMatrix4fv":`vec${s.length}`};return!!s.length?s[0].concat?t(s[0]):t(s):"float"},t.a=m},30:function(s,t){s.exports="#version 300 es\n#define GLSLIFY 1\nlayout (location = 0) in vec3 position;\n\nuniform mat4 mMatrix;\nuniform mat4 vMatrix;\nuniform mat4 pMatrix;\n\nvoid main()\n{\n    gl_Position = pMatrix * vMatrix * mMatrix * vec4(position, 1.0);\n}\n"},31:function(s,t){s.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nout vec4 FragColor;\nuniform vec3 lightColor;\nvoid main()\n{\n    FragColor = vec4(lightColor, 1.0); \n}\n"},5:function(s,t,e){"use strict";e.r(t);var i=e(2),h=e(28),r=e(1),a=e(0);const u=function(s,t,e){const i=t||{};return s.touches&&!e?(i.x=s.touches[0].pageX,i.y=s.touches[0].pageY):s.touches?s.touches&&e&&(i.x=s.touches[1].pageX,i.y=s.touches[1].pageY):(i.x=s.clientX,i.y=s.clientY),i},n=1e-4;class p{constructor(s=[0,0,0],t=[0,1,0]){Object(i.a)(this,"cameraPos",void 0),Object(i.a)(this,"up",void 0),Object(i.a)(this,"cameraFront",[0,0,-1]),Object(i.a)(this,"_mouse",{}),Object(i.a)(this,"_preMouse",{}),Object(i.a)(this,"_mousedown",!1),Object(i.a)(this,"_rx",0),Object(i.a)(this,"_ry",0),Object(i.a)(this,"_preRx",0),Object(i.a)(this,"_preRy",0),Object(i.a)(this,"_targetRx",0),Object(i.a)(this,"_targetRy",0),Object(i.a)(this,"_viewMatrix",r.b.identity(r.b.create())),Object(i.a)(this,"_width",a.b.width),Object(i.a)(this,"_height",a.b.height),Object(i.a)(this,"sensitivity",1),Object(i.a)(this,"target",[0,0,0]),Object(i.a)(this,"offset",[0,0,0]),Object(i.a)(this,"radius",5),Object(i.a)(this,"_targetRadius",5),Object(i.a)(this,"_updateWheel",!1),this.cameraPos=s,this.up=t,this.projMatrix=r.b.create(),r.b.perspective(this.projMatrix,Object(a.d)(45),a.b.clientWidth/a.b.clientHeight,.1,100),this._addEvents()}setProj(s,t,e){r.b.perspective(this.projMatrix,Object(a.d)(s),a.b.clientWidth/a.b.clientHeight,t,e)}_addEvents(){a.b.addEventListener("mousedown",s=>this._down(s)),a.b.addEventListener("mousemove",s=>this._move(s)),document.addEventListener("mouseup",s=>this._up(s)),a.b.addEventListener("mousewheel",s=>this._onWheel(s)),a.b.addEventListener("DOMMouseScroll",s=>this._onWheel(s))}_down(s){this._mousedown=!0,u(s,this._mouse),u(s,this._preMouse),this._preRx=this._targetRx,this._preRy=this._targetRy}_move(s){if(this._mousedown){u(s,this._mouse);let t=(this._mouse.x-this._preMouse.x)/this._width,e=(this._mouse.y-this._preMouse.y)/this._height;this._targetRx=this._preRx+t*Math.PI*2*this.sensitivity,this._targetRy=this._preRy+e*Math.PI*this.sensitivity}}_up(s){this._mousedown=!1}updateMatrix(){this._rx+=.1*(this._targetRx-this._rx),Math.abs(this._targetRx-this._rx)<n&&(this._rx=this._targetRx),this._ry+=.1*(this._targetRy-this._ry),Math.abs(this._targetRy-this._ry)<n&&(this._ry=this._targetRy),this._updateWheel&&(this.radius+=.1*(this._targetRadius-this.radius),Math.abs(this._targetRadius-this.radius)<n&&(this.radius=this._targetRadius)),this.cameraPos[1]=Math.sin(this._ry)*this.radius;let s=Math.abs(Math.cos(this._ry)*this.radius);this.cameraPos[0]=Math.cos(this._rx+.5*Math.PI)*s,this.cameraPos[2]=Math.sin(this._rx+.5*Math.PI)*s,this.cameraPos=[this.cameraPos[0]+this.offset[0],this.cameraPos[1]+this.offset[1],this.cameraPos[2]+this.offset[2]],r.b.lookAt(this._viewMatrix,this.cameraPos,this.target,this.up)}_onWheel(s){const t=s.wheelDelta,e=s.detail;let i=0;i=e?t?t/e/40*e>0?1:-1:-e/3:t/120,this._targetRadius=this.radius+1*-i,this._targetRadius<=1&&(this._targetRadius=1),this._updateWheel=!0}get viewMatrix(){return this._viewMatrix}set rx(s){this._targetRx=s}}var o=e(43);e.d(t,"default",function(){return c});class c{constructor(){Object(i.a)(this,"rotateQ",r.c.create()),Object(i.a)(this,"mousePos",{x:0,y:0}),Object(i.a)(this,"camera",new p),Object(i.a)(this,"pMatrix",r.b.identity(r.b.create())),Object(i.a)(this,"mvpMatrix",r.b.identity(r.b.create())),Object(i.a)(this,"tmpMatrix",r.b.identity(r.b.create())),Object(i.a)(this,"_params",{}),Object(i.a)(this,"gui",new o.a({width:300})),this.vMatrix=this.camera.viewMatrix,a.a.setCamera(this.camera),this.init(),this.attrib(),this.prepare(),this._setGUI(),this._animate=this.animate.bind(this),a.c.enable(a.c.DEPTH_TEST),a.c.depthFunc(a.c.LEQUAL),a.c.enable(a.c.CULL_FACE)}init(){}compile(s,t){return new h.a(s,t)}attrib(){}uniform(){}prepare(){}animate(){requestAnimationFrame(this._animate),this.camera.updateMatrix(),this.uniform(),this.render()}render(){}play(){this.animate()}_setGUI(){}addGUIParams(s){return Object.assign(this._params,s)}get params(){return this._params}set params(s){throw Error("Params has no setter,please use addGUIParams")}}},52:function(s,t,e){"use strict";e.r(t),e.d(t,"default",function(){return b});var i=e(2),h=e(5),r=(e(3),e(106)),a=e.n(r),u=e(107),n=e.n(u),p=e(31),o=e.n(p),c=e(30),m=e.n(c),l=e(8),f=e(1),d=e(0);const v=[.83,.82,.88],g=[1,1.5,1.5];class b extends h.default{constructor(){super(),Object(i.a)(this,"count",0)}init(){this.prg=this.compile(a.a,n.a),this.lampPrg=this.compile(m.a,o.a)}attrib(){this.cube=l.a.cube(1),this.lamp=l.a.sphere(.1,60)}prepare(){d.c.enable(d.c.DEPTH_TEST),d.c.depthFunc(d.c.LEQUAL),d.c.clearColor(.3,.3,.3,1),d.c.clearDepth(1)}uniform(){let s=f.b.identity(f.b.create());this.prg.use(),this.prg.style({mMatrix:s,vMatrix:this.camera.viewMatrix,pMatrix:this.camera.projMatrix,camPos:this.camera.cameraPos,"light.position":g,"material.ambient":[1,.5,.31],"material.diffuse":[0,0,0],"material.specular":[1,1,1],"material.shininess":50,"light.ambient":[.1,.1,.1],"light.diffuse":[1,1,1],"light.specular":[1,1,1]})}render(){d.c.clear(d.c.COLOR_BUFFER_BIT|d.c.DEPTH_BUFFER_BIT),d.a.draw(this.cube);let s=f.b.identity(f.b.create());f.b.translate(s,s,g),f.b.scale(s,s,[.2,.2,.2]),this.lampPrg.use(),this.lampPrg.style({mMatrix:s,vMatrix:this.camera.viewMatrix,pMatrix:this.camera.projMatrix,lightColor:v}),d.a.draw(this.lamp)}}},8:function(s,t,e){"use strict";var i=e(3);const h={};let r;h.plane=function(s,t,e,h="xy",r=4){const a=[],u=[],n=[],p=[],o=s/e,c=t/e,m=1/e,l=.5*-s,f=.5*-t;let d=0;for(let s=0;s<e;s++)for(let t=0;t<e;t++){const i=o*s+l,r=c*t+f,v=s/e,g=t/e;"xz"===h?(a.push([i,0,r+c]),a.push([i+o,0,r+c]),a.push([i+o,0,r]),a.push([i,0,r]),u.push([v,1-(g+m)]),u.push([v+m,1-(g+m)]),u.push([v+m,1-g]),u.push([v,1-g]),p.push([0,1,0]),p.push([0,1,0]),p.push([0,1,0]),p.push([0,1,0])):"yz"===h?(a.push([0,r,i]),a.push([0,r,i+o]),a.push([0,r+c,i+o]),a.push([0,r+c,i]),u.push([v,g]),u.push([v+m,g]),u.push([v+m,g+m]),u.push([v,g+m]),p.push([1,0,0]),p.push([1,0,0]),p.push([1,0,0]),p.push([1,0,0])):(a.push([i,r,0]),a.push([i+o,r,0]),a.push([i+o,r+c,0]),a.push([i,r+c,0]),u.push([v,g]),u.push([v+m,g]),u.push([v+m,g+m]),u.push([v,g+m]),p.push([0,0,1]),p.push([0,0,1]),p.push([0,0,1]),p.push([0,0,1])),n.push(4*d+0),n.push(4*d+1),n.push(4*d+2),n.push(4*d+0),n.push(4*d+2),n.push(4*d+3),d++}const v=new i.a(r);return v.bufferVertex(a),v.bufferTexCoord(u),v.bufferIndex(n),v.bufferNormal(p),v},h.sphere=function(s,t,e=!1,h=4){const r=[],a=[],u=[],n=[],p=1/t;let o=0;function c(e,i,h=!1){const r=e/t*Math.PI-.5*Math.PI,a=i/t*Math.PI*2,u=h?1:s,n=[];n[1]=Math.sin(r)*u;const p=Math.cos(r)*u;n[0]=Math.cos(a)*p,n[2]=Math.sin(a)*p;return n[0]=Math.floor(1e4*n[0])/1e4,n[1]=Math.floor(1e4*n[1])/1e4,n[2]=Math.floor(1e4*n[2])/1e4,n}for(let s=0;s<t;s++)for(let e=0;e<t;e++){r.push(c(s,e)),r.push(c(s+1,e)),r.push(c(s+1,e+1)),r.push(c(s,e+1)),n.push(c(s,e,!0)),n.push(c(s+1,e,!0)),n.push(c(s+1,e+1,!0)),n.push(c(s,e+1,!0));const i=e/t,h=s/t;a.push([1-i,h]),a.push([1-i,h+p]),a.push([1-i-p,h+p]),a.push([1-i-p,h]),u.push(4*o+0),u.push(4*o+1),u.push(4*o+2),u.push(4*o+0),u.push(4*o+2),u.push(4*o+3),o++}e&&u.reverse();const m=new i.a(h);return m.bufferVertex(r),m.bufferTexCoord(a),m.bufferIndex(u),m.bufferNormal(n),m},h.cube=function(s,t,e,h=4){const r=s/2,a=(t=t||s)/2,u=(e=e||s)/2,n=[],p=[],o=[],c=[];let m=0;n.push([-r,a,-u]),n.push([r,a,-u]),n.push([r,-a,-u]),n.push([-r,-a,-u]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),p.push([0,0]),p.push([1,0]),p.push([1,1]),p.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,n.push([r,a,-u]),n.push([r,a,u]),n.push([r,-a,u]),n.push([r,-a,-u]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),p.push([0,0]),p.push([1,0]),p.push([1,1]),p.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,n.push([r,a,u]),n.push([-r,a,u]),n.push([-r,-a,u]),n.push([r,-a,u]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),p.push([0,0]),p.push([1,0]),p.push([1,1]),p.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,n.push([-r,a,u]),n.push([-r,a,-u]),n.push([-r,-a,-u]),n.push([-r,-a,u]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),p.push([0,0]),p.push([1,0]),p.push([1,1]),p.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,n.push([r,a,-u]),n.push([-r,a,-u]),n.push([-r,a,u]),n.push([r,a,u]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),p.push([0,0]),p.push([1,0]),p.push([1,1]),p.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,n.push([r,-a,u]),n.push([-r,-a,u]),n.push([-r,-a,-u]),n.push([r,-a,-u]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),p.push([0,0]),p.push([1,0]),p.push([1,1]),p.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++;const l=new i.a(h);return l.bufferVertex(n),l.bufferTexCoord(p),l.bufferIndex(o),l.computeNormals(c),l},h.skybox=function(s,t=4){const e=[],h=[],r=[],a=[];let u=0;e.push([s,s,-s]),e.push([-s,s,-s]),e.push([-s,-s,-s]),e.push([s,-s,-s]),a.push([0,0,-1]),a.push([0,0,-1]),a.push([0,0,-1]),a.push([0,0,-1]),h.push([0,0]),h.push([1,0]),h.push([1,1]),h.push([0,1]),r.push(4*u+0),r.push(4*u+1),r.push(4*u+2),r.push(4*u+0),r.push(4*u+2),r.push(4*u+3),u++,e.push([s,-s,-s]),e.push([s,-s,s]),e.push([s,s,s]),e.push([s,s,-s]),a.push([1,0,0]),a.push([1,0,0]),a.push([1,0,0]),a.push([1,0,0]),h.push([0,0]),h.push([1,0]),h.push([1,1]),h.push([0,1]),r.push(4*u+0),r.push(4*u+1),r.push(4*u+2),r.push(4*u+0),r.push(4*u+2),r.push(4*u+3),u++,e.push([-s,s,s]),e.push([s,s,s]),e.push([s,-s,s]),e.push([-s,-s,s]),a.push([0,0,1]),a.push([0,0,1]),a.push([0,0,1]),a.push([0,0,1]),h.push([0,0]),h.push([1,0]),h.push([1,1]),h.push([0,1]),r.push(4*u+0),r.push(4*u+1),r.push(4*u+2),r.push(4*u+0),r.push(4*u+2),r.push(4*u+3),u++,e.push([-s,-s,s]),e.push([-s,-s,-s]),e.push([-s,s,-s]),e.push([-s,s,s]),a.push([-1,0,0]),a.push([-1,0,0]),a.push([-1,0,0]),a.push([-1,0,0]),h.push([0,0]),h.push([1,0]),h.push([1,1]),h.push([0,1]),r.push(4*u+0),r.push(4*u+1),r.push(4*u+2),r.push(4*u+0),r.push(4*u+2),r.push(4*u+3),u++,e.push([s,s,s]),e.push([-s,s,s]),e.push([-s,s,-s]),e.push([s,s,-s]),a.push([0,1,0]),a.push([0,1,0]),a.push([0,1,0]),a.push([0,1,0]),h.push([0,0]),h.push([1,0]),h.push([1,1]),h.push([0,1]),r.push(4*u+0),r.push(4*u+1),r.push(4*u+2),r.push(4*u+0),r.push(4*u+2),r.push(4*u+3),u++,e.push([s,-s,-s]),e.push([-s,-s,-s]),e.push([-s,-s,s]),e.push([s,-s,s]),a.push([0,-1,0]),a.push([0,-1,0]),a.push([0,-1,0]),a.push([0,-1,0]),h.push([0,0]),h.push([1,0]),h.push([1,1]),h.push([0,1]),r.push(4*u+0),r.push(4*u+1),r.push(4*u+2),r.push(4*u+0),r.push(4*u+2),r.push(4*u+3);const n=new i.a(t);return n.bufferVertex(e),n.bufferTexCoord(h),n.bufferIndex(r),n.bufferNormal(a),n},h.bigTriangle=function(){if(!r){const s=[2,1,0],t=[[-1,-1],[-1,4],[4,-1]];(r=new i.a).bufferData(t,"position",2),r.bufferIndex(s)}return r},t.a=h}}]);