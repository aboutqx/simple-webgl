(window.webpackJsonp=window.webpackJsonp||[]).push([[8,22,23],{12:function(t,e){function i(t){if(this.gl=t,void 0!==t.bindVertexArray)this._impl=new r(this);else{var e=t.getExtension("OES_vertex_array_object");e?(!function(t,e){t.bindVertexArray=function(){return e.bindVertexArrayOES.apply(e,arguments)},t.createVertexArray=function(){return e.createVertexArrayOES.apply(e,arguments)},t.deleteVertexArray=function(){return e.deleteVertexArrayOES.apply(e,arguments)},t.isVertexArray=function(){return e.isVertexArrayOES.apply(e,arguments)}}(t,e),this._impl=new r(this)):this._impl=new n(this)}}function r(t){this._vao=t,this._handle=null}function n(t){this._vao=t}i.prototype={dispose:function(){this._impl.dispose(),this._impl=null},setup:function(t,e,i){t.ready||t._grabParameters(),this._impl.setup(t,e,i)},bind:function(){this._impl.bind()},unbind:function(){this._impl.unbind()}},r.prototype={dispose:function(){this.release(),this._vao=null},setup:function(t,e,i){this.release();var r=this._vao.gl;this._handle=r.createVertexArray(),r.bindVertexArray(this._handle);for(var n=0;n<e.length;n++)e[n].attribPointer(t);void 0!==i&&i.bind(),r.bindVertexArray(null)},bind:function(){this._vao.gl.bindVertexArray(this._handle)},unbind:function(){this._vao.gl.bindVertexArray(null)},release:function(){this._handle&&(this._vao.gl.deleteVertexArray(this._handle),this._handle=null)}},n.prototype={dispose:function(){this._vao=null,this.prg=null,this.buffers=null,this.indices=null},setup:function(t,e,i){this.prg=t,this.buffers=e,this.indices=i},bind:function(){for(var t=0;t<this.buffers.length;t++)this.buffers[t].attribPointer(this.prg);void 0!==this.indices&&this.indices.bind()},unbind:function(){}},t.exports=i},46:function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return y});var r=i(2),n=i(5),a=i(7),s=i(0),o=i(77),h=i.n(o),u=i(78),d=i.n(u),f=i(79),l=i.n(f),c=i(80),g=i.n(c),p=i(1),_=i(12),m=i.n(_),b=i(6);let v,E,T={color_attachments:0,draw_buffers:0};class y extends n.default{constructor(){super(),Object(r.a)(this,"count",0),Object(r.a)(this,"offset",[[-.5,-.5,0],[-.5,.5,0],[.5,-.5,0],[.5,.5,0]])}init(){(v=s.d.getExtension("WEBGL_draw_buffers"))?(T.color_attachments=s.d.getParameter(v.MAX_COLOR_ATTACHMENTS_WEBGL),T.draw_buffers=s.d.getParameter(v.MAX_DRAW_BUFFERS_WEBGL),console.log("MAX_COLOR_ATTACHMENTS_WEBGL: "+T.color_attachments),console.log("MAX_DRAW_BUFFERS_WEBGL: "+T.draw_buffers),this.mrtPrg=this.compile(h.a,d.a),this.prg=this.compile(l.a,g.a)):alert("WEBGL_draw_buffers not supported")}attrib(){let{pos:t,index:e,normal:i,color:r}=Object(b.Torus)(64,64,1,3,[1,1,1,1]);const n=new a.a(s.d,new Float32Array(t)),o=new a.a(s.d,new Float32Array(i)),h=new a.a(s.d,new Float32Array(r));this.indexBuffer=new a.b(s.d,s.d.UNSIGNED_SHORT,new Uint16Array(e),s.d.STATIC_DRAW),n.attrib("position",3,s.d.FLOAT),o.attrib("normal",3,s.d.FLOAT),h.attrib("color",4,s.d.FLOAT),this.torusVao=new m.a(s.d),this.torusVao.setup(this.mrtPrg,[n,o,h]);const u=new a.a(s.d,new Float32Array([-.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0])),d=new a.a(s.d,new Float32Array([0,1,1,1,0,0,1,0]));this.vIndexBuffer=new a.b(s.d,s.d.UNSIGNED_SHORT,new Uint16Array([0,2,1,2,3,1]),s.d.STATIC_DRAW),u.attrib("position",3,s.d.FLOAT),d.attrib("texCoord",2,s.d.FLOAT),this.mainVao=new m.a(s.d),this.mainVao.setup(this.prg,[u,d])}prepare(){s.d.enable(s.d.DEPTH_TEST),s.d.depthFunc(s.d.LEQUAL),s.d.enable(s.d.CULL_FACE),s.d.clearColor(.3,.3,.3,1),s.d.clearDepth(1),E=function(t,e){let i=s.d.createFramebuffer();s.d.bindFramebuffer(s.d.FRAMEBUFFER,i);let r=[];for(let i=0;i<4;++i)r[i]=s.d.createTexture(),s.d.bindTexture(s.d.TEXTURE_2D,r[i]),s.d.texImage2D(s.d.TEXTURE_2D,0,s.d.RGBA,t,e,0,s.d.RGBA,s.d.UNSIGNED_BYTE,null),s.d.texParameteri(s.d.TEXTURE_2D,s.d.TEXTURE_MAG_FILTER,s.d.LINEAR),s.d.texParameteri(s.d.TEXTURE_2D,s.d.TEXTURE_MIN_FILTER,s.d.LINEAR),s.d.texParameteri(s.d.TEXTURE_2D,s.d.TEXTURE_WRAP_S,s.d.CLAMP_TO_EDGE),s.d.texParameteri(s.d.TEXTURE_2D,s.d.TEXTURE_WRAP_T,s.d.CLAMP_TO_EDGE),s.d.framebufferTexture2D(s.d.FRAMEBUFFER,v.COLOR_ATTACHMENT0_WEBGL+i,s.d.TEXTURE_2D,r[i],0);let n=s.d.createRenderbuffer();return s.d.bindRenderbuffer(s.d.RENDERBUFFER,n),s.d.renderbufferStorage(s.d.RENDERBUFFER,s.d.DEPTH_COMPONENT16,t,e),s.d.framebufferRenderbuffer(s.d.FRAMEBUFFER,s.d.DEPTH_ATTACHMENT,s.d.RENDERBUFFER,n),s.d.bindTexture(s.d.TEXTURE_2D,null),s.d.bindRenderbuffer(s.d.RENDERBUFFER,null),s.d.bindFramebuffer(s.d.FRAMEBUFFER,null),{f:i,d:n,t:r}}(s.a.width,s.a.height),s.d.activeTexture(s.d.TEXTURE0),s.d.bindTexture(s.d.TEXTURE_2D,E.t[0]),s.d.activeTexture(s.d.TEXTURE1),s.d.bindTexture(s.d.TEXTURE_2D,E.t[1]),s.d.activeTexture(s.d.TEXTURE2),s.d.bindTexture(s.d.TEXTURE_2D,E.t[2]),s.d.activeTexture(s.d.TEXTURE3),s.d.bindTexture(s.d.TEXTURE_2D,E.t[3]),s.d.bindFramebuffer(s.d.FRAMEBUFFER,E.f);const t=[v.COLOR_ATTACHMENT0_WEBGL,v.COLOR_ATTACHMENT1_WEBGL,v.COLOR_ATTACHMENT2_WEBGL,v.COLOR_ATTACHMENT3_WEBGL];v.drawBuffersWEBGL(t),this.camera.radius=28}uniform(){let t=this.camera.viewMatrix,e=p.a.create();this.mvpMatrix=p.a.create(),this.tmpMatrix=p.a.create(),p.a.perspective(e,Object(s.e)(45),s.a.clientWidth/s.a.clientHeight,.1,100),p.a.multiply(this.tmpMatrix,e,t)}render(){s.d.bindFramebuffer(s.d.FRAMEBUFFER,E.f),s.d.clear(s.d.COLOR_BUFFER_BIT|s.d.DEPTH_BUFFER_BIT);const t=[-.577,.577,.577];let e=p.a.create(),i=p.a.create();this.count++;let r=this.count%360*Math.PI/180;this.mrtPrg.use(),this.torusVao.bind(),this.indexBuffer.bind();for(let n=0;n<9;n++){p.a.identity(e),p.a.rotate(e,e,2*n*Math.PI/9,[0,1,0]),p.a.translate(e,e,[0,0,15]),p.a.rotate(e,e,r,[1,1,0]),p.a.multiply(this.mvpMatrix,this.tmpMatrix,e),p.a.invert(i,e);let a=Object(b.hsva)(40*n,1,1,1);this.mrtPrg.style({lightDirection:t,mvpMatrix:this.mvpMatrix,ambient:a,invMatrix:i}),this.indexBuffer.drawTriangles()}this.torusVao.unbind(),s.d.bindFramebuffer(s.d.FRAMEBUFFER,null),s.d.clear(s.d.COLOR_BUFFER_BIT|s.d.DEPTH_BUFFER_BIT),this.prg.use(),this.mainVao.bind(),this.vIndexBuffer.bind();for(let t=0;t<4;++t)this.prg.style({offset:this.offset[t],texture:t}),this.vIndexBuffer.drawTriangles();this.mainVao.unbind()}}},5:function(t,e,i){"use strict";i.r(e);var r=i(2),n=0;function a(t,e,i,r){this.gl=t,this.program=t.createProgram(),this.vShader=t.createShader(t.VERTEX_SHADER),this.fShader=t.createShader(t.FRAGMENT_SHADER),this.dyns=[],this.uniforms=[],this.ready=!1,t.attachShader(this.program,this.vShader),t.attachShader(this.program,this.fShader),this._uid=0|n++,this._cuid=0|n++,void 0!==e&&void 0!==i&&this.compile(e,i,r),this.unAssigned=[],this.prevTime=0}function s(t){console.warn(t)}a.debug=!0,a.prototype={use:function(){this.ready||this._grabParameters(),this.gl.useProgram(this.program)},style:function(t,e){if("{}"!==JSON.stringify(t)||0!==this.uniforms.length){if("{}"===JSON.stringify(t)&&this.uniforms.length>0)throw new Error("active uniform not assigned:"+this.uniforms);for(let e in t)"function"==typeof this[e]&&this[e](t[e]);this.unAssigned=this.unAssigned.filter(e=>{let i=!1;for(let r in t)r===e&&(i=!0);return!i}),Date.now()-this.prevTime<62500&&0===this.unAssigned.length&&null!==this.timer&&(clearTimeout(this.timer),this.timer=null),0!==this.unAssigned.length&&void 0===e&&(this.timer=setTimeout(()=>{if(this.unAssigned.length>0)throw new Error("active uniform not assigned: "+this.unAssigned)},1/16)),this.prevTime=Date.now()}},compile:function(t,e,i){this.ready=!1,i=i||"";var r=this.gl;if(!u(r,this.fShader,i+e)||!u(r,this.vShader,i+t))return!1;if(r.linkProgram(this.program),a.debug&&!r.getProgramParameter(this.program,r.LINK_STATUS))return s(r.getProgramInfoLog(this.program)),!1;for(;this.dyns.length>0;)delete this[this.dyns.pop()];return this._cuid=0|n++,!0},dispose:function(){null!==this.gl&&(this.gl.deleteProgram(this.program),this.gl.deleteShader(this.fShader),this.gl.deleteShader(this.vShader),this.gl=null)},_grabParameters:function(){for(var t=this.gl,e=this.program,i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r={texIndex:0},n=0;n<i;++n){var a=t.getActiveUniform(e,n);if(null!==a){var s=a.name,o=s.indexOf("[");o>=0&&(s=s.substring(0,o));var h=t.getUniformLocation(e,a.name);this[s]=l(a.type,h,t,r),this.dyns.push(s),this.uniforms.push(s),this.unAssigned.push(s)}else t.getError()}for(var u=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),d=0;d<u;++d){var f=t.getActiveAttrib(e,d).name,g=t.getAttribLocation(e,f);this[f]=c(g),this.dyns.push(f)}this.ready=!0}},a.prototype.bind=a.prototype.use;var o=["","   ","  "," ",""];function h(t,e){return o[String(e+1).length]+(e+1)+": "+t}function u(t,e,i){return t.shaderSource(e,i),t.compileShader(e),!(a.debug&&!t.getShaderParameter(e,t.COMPILE_STATUS))||(s(t.getShaderInfoLog(e)),s(function(t){return t.split("\n").map(h).join("\n")}(i)),!1)}var d={};function f(t){return t=String(t),"uniform"+d[t]}function l(t,e,i,r){switch(t){case i.FLOAT_MAT2:case i.FLOAT_MAT3:case i.FLOAT_MAT4:return function(t,e,i,r){var n=f(t);return function(){if(arguments.length>0&&void 0!==arguments[0].length){var t=arguments.length>1&&!!arguments[1];i[n+"v"](e,t,arguments[0])}return e}}(t,e,i);case i.SAMPLER_2D:case i.SAMPLER_CUBE:return function(t,e,i,r){var n=r.texIndex++;return function(){return 1===arguments.length&&(void 0!==arguments[0].bind?(arguments[0].bind(n),i.uniform1i(e,n)):i.uniform1i(e,arguments[0])),e}}(0,e,i,r);default:return function(t,e,i,r){var n=f(t);return function(){return 1===arguments.length&&void 0!==arguments[0].length?i[n+"v"](e,arguments[0]):arguments.length>0&&i[n].apply(i,Array.prototype.concat.apply(e,arguments)),e}}(t,e,i)}}function c(t){return function(){return t}}d[5126]="1f",d[35664]="2f",d[35665]="3f",d[35666]="4f",d[35670]=d[5124]=d[35678]=d[35680]="1i",d[35671]=d[35667]="2i",d[35672]=d[35668]="3i",d[35673]=d[35669]="4i",d[35674]="Matrix2f",d[35675]="Matrix3f",d[35676]="Matrix4f";var g=a,p=i(1),_=i(0);const m=function(t,e,i){const r=e||{};return t.touches&&!i?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):t.touches?t.touches&&i&&(r.x=t.touches[1].pageX,r.y=t.touches[1].pageY):(r.x=t.clientX,r.y=t.clientY),r},b=1e-4;class v{constructor(t=[0,0,0],e=[0,1,0]){Object(r.a)(this,"cameraPos",void 0),Object(r.a)(this,"up",void 0),Object(r.a)(this,"cameraFront",[0,0,-1]),Object(r.a)(this,"_mouse",{}),Object(r.a)(this,"_preMouse",{}),Object(r.a)(this,"_mousedown",!1),Object(r.a)(this,"_rx",0),Object(r.a)(this,"_ry",0),Object(r.a)(this,"_preRx",0),Object(r.a)(this,"_preRy",0),Object(r.a)(this,"_targetRx",0),Object(r.a)(this,"_targetRy",0),Object(r.a)(this,"_tmp",p.a.identity(p.a.create())),Object(r.a)(this,"_width",_.a.width),Object(r.a)(this,"_height",_.a.height),Object(r.a)(this,"sensitivity",1),Object(r.a)(this,"target",[0,0,0]),Object(r.a)(this,"offset",[0,0,0]),Object(r.a)(this,"radius",5),Object(r.a)(this,"_targetRadius",5),Object(r.a)(this,"_updateWheel",!1),this.cameraPos=t,this.up=e,this._addEvents()}_addEvents(){_.a.addEventListener("mousedown",t=>this._down(t)),_.a.addEventListener("mousemove",t=>this._move(t)),document.addEventListener("mouseup",t=>this._up(t)),_.a.addEventListener("mousewheel",t=>this._onWheel(t)),_.a.addEventListener("DOMMouseScroll",t=>this._onWheel(t))}_down(t){this._mousedown=!0,m(t,this._mouse),m(t,this._preMouse),this._preRx=this._targetRx,this._preRy=this._targetRy}_move(t){if(this._mousedown){m(t,this._mouse);let e=(this._mouse.x-this._preMouse.x)/this._width,i=(this._mouse.y-this._preMouse.y)/this._height;this._targetRx=this._preRx+e*Math.PI*2*this.sensitivity,this._targetRy=this._preRy+i*Math.PI*this.sensitivity}}_up(t){this._mousedown=!1}updateMatrix(){this._rx+=.1*(this._targetRx-this._rx),Math.abs(this._targetRx-this._rx)<b&&(this._rx=this._targetRx),this._ry+=.1*(this._targetRy-this._ry),Math.abs(this._targetRy-this._ry)<b&&(this._ry=this._targetRy),this._updateWheel&&(this.radius+=.1*(this._targetRadius-this.radius),Math.abs(this._targetRadius-this.radius)<b&&(this.radius=this._targetRadius)),this.cameraPos[1]=Math.sin(this._ry)*this.radius;let t=Math.abs(Math.cos(this._ry)*this.radius);this.cameraPos[0]=Math.cos(this._rx+.5*Math.PI)*t,this.cameraPos[2]=Math.sin(this._rx+.5*Math.PI)*t,this.cameraPos=[this.cameraPos[0]+this.offset[0],this.cameraPos[1]+this.offset[1],this.cameraPos[2]+this.offset[2]],p.a.lookAt(this._tmp,this.cameraPos,this.target,this.up)}_onWheel(t){const e=t.wheelDelta,i=t.detail;let r=0;r=i?e?e/i/40*i>0?1:-1:-i/3:e/120,this._targetRadius=this.radius+2*-r,this._targetRadius<=1&&(this._targetRadius=1),this._updateWheel=!0}get viewMatrix(){return this._tmp}set rx(t){this._targetRx=t}}var E=i(36);i.d(e,"default",function(){return T});class T{constructor(){Object(r.a)(this,"rotateQ",p.b.create()),Object(r.a)(this,"camera",new v),Object(r.a)(this,"_params",{}),Object(r.a)(this,"gui",new E.a({width:300})),this.init(),this.attrib(),this.prepare(),this._setGUI(),this._animate=this.animate.bind(this)}init(){}compile(t,e){let i=new g(_.d);return i.compile(t,e),i}attrib(){}uniform(){}prepare(){}animate(){requestAnimationFrame(this._animate),this.camera.updateMatrix(),this.uniform(),this.render()}render(){}play(){this.animate()}_setGUI(){}addGUIParams(t){return Object.assign(this._params,t)}get params(){return this._params}set params(t){throw Error("Params has no setter,please use addGUIParams")}}},6:function(t,e,i){"use strict";function r(t,e,i,r,a){let s,o=[],h=[],u=[],d=[];for(let h=0;h<=t;h++){let f=2*Math.PI/t*h,l=Math.cos(f),c=Math.sin(f);for(let t=0;t<=e;t++){let h=2*Math.PI/e*t,f=(l*i+r)*Math.cos(h),g=c*i,p=(l*i+r)*Math.sin(h);o.push(f,g,p),s=a||n(360/e*t,1,1,1),d.push(s[0],s[1],s[2],s[3]);let _=l*Math.cos(h),m=l*Math.sin(h);u.push(_,c,m)}}for(let i=0;i<t;i++)for(let t=0;t<e;t++){let r=(e+1)*i+t;h.push(r,r+e+1,r+1),h.push(r+e+1,r+e+2,r+1)}return{pos:o,index:h,normal:u,color:d}}function n(t,e,i,r){if(e>1||i>1||r>1)return;let n=t%360,a=Math.floor(n/60),s=n/60-a,o=i*(1-e),h=i*(1-e*s),u=i*(1-e*(1-s)),d=[];if(!e>0&&!e<0)d.push(i,i,i,r);else{let t=[i,h,o,o,u,i],e=[u,i,i,h,o,o],n=[o,o,u,i,i,h];d.push(t[a],e[a],n[a],r)}return d}function a(t,e,i,r){for(var a=[],s=[],o=[],h=[],u=[],d=0;d<=t;d++)for(var f=Math.PI/t*d,l=Math.cos(f),c=Math.sin(f),g=0;g<=e;g++){var p=2*Math.PI/e*g,_=c*i*Math.cos(p),m=l*i,b=c*i*Math.sin(p),v=c*Math.cos(p),E=c*Math.sin(p);if(r)var T=r;else T=n(360/t*d,1,1,1);a.push(_,m,b),s.push(v,l,E),o.push(T[0],T[1],T[2],T[3]),h.push(1-1/e*g,1/t*d)}for(f=0,d=0;d<t;d++)for(g=0;g<e;g++)f=(e+1)*d+g,u.push(f,f+1,f+e+2),u.push(f,f+e+2,f+e+1);return{pos:a,normal:s,color:o,uv:h,index:u}}function s(t,e,i){const r=t/2,n=i/2;return[r,e,n,0,1,0,1,0,-r,e,-n,0,1,0,0,1,-r,e,n,0,1,0,0,0,r,e,n,0,1,0,1,0,r,e,-n,0,1,0,1,1,-r,e,-n,0,1,0,0,1]}i.r(e),i.d(e,"Torus",function(){return r}),i.d(e,"hsva",function(){return n}),i.d(e,"Sphere",function(){return a}),i.d(e,"plane",function(){return s}),i.d(e,"QuadData",function(){return o}),i.d(e,"CubeData",function(){return h});const o=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0],h=[-1,-1,-1,0,0,-1,0,0,1,1,-1,0,0,-1,1,1,1,-1,-1,0,0,-1,1,0,1,1,-1,0,0,-1,1,1,-1,-1,-1,0,0,-1,0,0,-1,1,-1,0,0,-1,0,1,-1,-1,1,0,0,1,0,0,1,-1,1,0,0,1,1,0,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,-1,1,1,0,0,1,0,1,-1,-1,1,0,0,1,0,0,-1,1,1,-1,0,0,1,0,-1,1,-1,-1,0,0,1,1,-1,-1,-1,-1,0,0,0,1,-1,-1,-1,-1,0,0,0,1,-1,-1,1,-1,0,0,0,0,-1,1,1,-1,0,0,1,0,1,1,1,1,0,0,1,0,1,-1,-1,1,0,0,0,1,1,1,-1,1,0,0,1,1,1,-1,-1,1,0,0,0,1,1,1,1,1,0,0,1,0,1,-1,1,1,0,0,0,0,-1,-1,-1,0,-1,0,0,1,1,-1,-1,0,-1,0,1,1,1,-1,1,0,-1,0,1,0,1,-1,1,0,-1,0,1,0,-1,-1,1,0,-1,0,0,0,-1,-1,-1,0,-1,0,0,1,-1,1,-1,0,1,0,0,1,1,1,1,0,1,0,1,0,1,1,-1,0,1,0,1,1,1,1,1,0,1,0,1,0,-1,1,-1,0,1,0,0,1,-1,1,1,0,1,0,0,0]},7:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o});var r=function(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return 0}},n=function(t){t.drawPoints=function(t,e){this.draw(0,t,e)},t.drawLines=function(t,e){this.draw(1,t,e)},t.drawLineLoop=function(t,e){this.draw(2,t,e)},t.drawLineStrip=function(t,e){this.draw(3,t,e)},t.drawTriangles=function(t,e){this.draw(4,t,e)},t.drawTriangleStrip=function(t,e){this.draw(5,t,e)},t.drawTriangleFan=function(t,e){this.draw(6,t,e)}},a=34962;function s(t,e,i){this.gl=t,this.usage=i||t.STATIC_DRAW,this.buffer=t.createBuffer(),this.attribs=[],this.stride=0,this.byteLength=0,this.length=0,e&&this.data(e)}s.prototype={bind:function(){this.gl.bindBuffer(a,this.buffer)},attrib:function(t,e,i,n){return this.attribs.push({name:t,type:0|i,size:0|e,normalize:!!n,offset:this.stride}),this.stride+=r(i)*e,this._computeLength(),this},data:function(t){var e=this.gl;e.bindBuffer(a,this.buffer),e.bufferData(a,t,this.usage),e.bindBuffer(a,null),this.byteLength=void 0===t.byteLength?t:t.byteLength,this._computeLength()},subData:function(t,e){var i=this.gl;i.bindBuffer(a,this.buffer),i.bufferSubData(a,e,t),i.bindBuffer(a,null)},attribPointer:function(t,e){var i=this.gl;if(i.bindBuffer(a,this.buffer),e&&e.length)for(let n=0;n<e.length;n++)for(var r=0;r<this.attribs.length;r++){let a=this.attribs[r];if(e[n]===a.name)if(void 0!==t[a.name]){let e=t[a.name]();i.enableVertexAttribArray(e),i.vertexAttribPointer(e,a.size,a.type,a.normalize,this.stride,a.offset)}else console.warn(`glBuffer can't get Attribute "${a.name}" Location.`)}else for(var n=0;n<this.attribs.length;n++){var s=this.attribs[n];if(void 0!==t[s.name]){var o=t[s.name]();i.enableVertexAttribArray(o),i.vertexAttribPointer(o,s.size,s.type,s.normalize,this.stride,s.offset)}else console.warn(`glBuffer can't get Attribute "${s.name}" Location.`)}},draw:function(t,e,i){e=void 0===e?this.length:e,this.gl.drawArrays(t,i,0|e)},dispose:function(){this.gl&&this.gl.deleteBuffer(this.buffer),this.buffer=null,this.gl=null},_computeLength:function(){this.stride>0&&(this.length=this.byteLength/this.stride)}},n(s.prototype);function o(t,e,i,r){this.gl=t,this.buffer=t.createBuffer(),this.usage=r||t.STATIC_DRAW,this.type=0,this.typeSize=0,this.size=0,this.setType(e||t.UNSIGNED_SHORT),i&&this.data(i)}o.prototype={bind:function(){this.gl.bindBuffer(34963,this.buffer)},setType:function(t){this.type=t,this.typeSize=r(t)},data:function(t){var e=this.gl;e.bindBuffer(34963,this.buffer),e.bufferData(34963,t,this.usage),e.bindBuffer(34963,null),this.size=void 0===t.byteLength?t:t.byteLength},subData:function(t,e){var i=this.gl;i.bindBuffer(34963,this.buffer),i.bufferSubData(34963,e,t),i.bindBuffer(34963,null)},dispose:function(){this.gl.deleteBuffer(this.buffer),this.buffer=null,this.gl=null},draw:function(t,e,i){e=void 0===e?this.size/this.typeSize:e,this.gl.drawElements(t,e,this.type,0|i)}},n(o.prototype)},77:function(t,e){t.exports="#define GLSLIFY 1\nattribute vec3  position;\nattribute vec3  normal;\nattribute vec4  color;\nuniform   mat4  mvpMatrix;\nuniform   mat4  invMatrix;\nuniform   vec3  lightDirection;\nuniform   vec4  ambient;\nvarying   vec4  vDest;\nvarying   vec4  vColor;\nvarying   vec3  vNormal;\nvarying   float vDepth;\n\nvoid main(){\n    gl_Position = mvpMatrix * vec4(position, 1.0);\n    vec3 invLight = normalize(invMatrix * vec4(lightDirection, 0.0)).xyz;\n    float diff = clamp(dot(normal, invLight), 0.1, 1.0);\n    vDest = vec4(color.rgb * ambient.rgb * diff, 1.0);\n    vColor = color * ambient;\n    vNormal = normal;\n    vDepth = gl_Position.z / gl_Position.w;\n}\n"},78:function(t,e){t.exports="#extension GL_EXT_draw_buffers: require\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec4  vDest;\nvarying vec4  vColor;\nvarying vec3  vNormal;\nvarying float vDepth;\n\nfloat near = 0.1;\nfloat far  = 100.0;\n\n// https://learnopengl-cn.github.io/04%20Advanced%20OpenGL/01%20Depth%20testing/\n// http://www.songho.ca/opengl/gl_projectionmatrix.html\nfloat LinearizeDepth(float depth)\n{\n    float z = depth * 2.0 - 1.0; // back to NDC\n    return (2.0 * near * far) / (far + near - z * (far - near));\n}\n\nvoid main(){\n    gl_FragData[0] = vDest;\n    gl_FragData[1] = vColor;\n    gl_FragData[2] = vec4((vNormal + 1.0) / 2.0, 1.0);\n    float depth = (LinearizeDepth(gl_FragCoord.z) -near) /(far-near);\n    gl_FragData[3] = vec4(vec3(depth), 1.);\n\n    // gl_FragColor = vec4(.3,.3,.3,1.);\n}\n"},79:function(t,e){t.exports="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform vec3 offset;\nvarying vec2 vTexCoord;\n\nvoid main(){\n\tvTexCoord = texCoord;\n\tgl_Position = vec4(position + offset, 1.0);\n}\n"},80:function(t,e){t.exports="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nvarying vec2 vTexCoord;\n\nvoid main(){\n\tgl_FragColor = texture2D(texture, vTexCoord);\n  // gl_FragColor = vec4(.3, .0, .3, 1.);\n}\n"}}]);