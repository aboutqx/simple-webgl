!function(t){function e(e){for(var r,n,i=e[0],a=e[1],o=0,s=[];o<i.length;o++)n=i[o],I[n]&&s.push(I[n][0]),I[n]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(P&&P(e);s.length;)s.shift()()}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(t,e){!function(t,e){if(!g[t]||!M[t])return;for(var r in M[t]=!1,e)Object.prototype.hasOwnProperty.call(e,r)&&(p[r]=e[r]);0==--m&&0===T&&x()}(t,e),r&&r(t,e)};var n,i=!0,a="f6e21640f4fa660a750d",o=1e4,s={},u=[],c=[];function l(t){var e=v[t];if(!e)return O;var r=function(r){return e.hot.active?(v[r]?-1===v[r].parents.indexOf(t)&&v[r].parents.push(t):(u=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),u=[]),O(r)},i=function(t){return{configurable:!0,enumerable:!0,get:function(){return O[t]},set:function(e){O[t]=e}}};for(var a in O)Object.prototype.hasOwnProperty.call(O,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,i(a));return r.e=function(t){return"ready"===d&&h("prepare"),T++,O.e(t).then(e,function(t){throw e(),t});function e(){T--,"prepare"===d&&(b[t]||y(t),0===T&&0===m&&x())}},r.t=function(t,e){return 1&e&&(t=r(t)),O.t(t,-2&e)},r}var f=[],d="idle";function h(t){d=t;for(var e=0;e<f.length;e++)f[e].call(null,t)}var _,p,E,m=0,T=0,b={},M={},g={};function A(t){return+t+""===t?+t:t}function R(t){if("idle"!==d)throw new Error("check() is only allowed in idle status");return i=t,h("check"),function(t){return t=t||1e4,new Promise(function(e,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,i=O.p+""+a+".hot-update.json";n.open("GET",i,!0),n.timeout=t,n.send(null)}catch(t){return r(t)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+i+" timed out."));else if(404===n.status)e();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(n.responseText)}catch(t){return void r(t)}e(t)}}})}(o).then(function(t){if(!t)return h("idle"),null;M={},b={},g=t.c,E=t.h,h("prepare");var e=new Promise(function(t,e){_={resolve:t,reject:e}});for(var r in p={},I)y(r);return"prepare"===d&&0===T&&0===m&&x(),e})}function y(t){g[t]?(M[t]=!0,m++,function(t){var e=document.getElementsByTagName("head")[0],r=document.createElement("script");r.charset="utf-8",r.src=O.p+""+t+"."+a+".hot-update.js",e.appendChild(r)}(t)):b[t]=!0}function x(){h("ready");var t=_;if(_=null,t)if(i)Promise.resolve().then(function(){return w(i)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&e.push(A(r));t.resolve(e)}}function w(e){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var r,n,i,o,c;function l(t){for(var e=[t],r={},n=e.slice().map(function(t){return{chain:[t],id:t}});n.length>0;){var i=n.pop(),a=i.id,s=i.chain;if((o=v[a])&&!o.hot._selfAccepted){if(o.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(o.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var u=0;u<o.parents.length;u++){var c=o.parents[u],l=v[c];if(l){if(l.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([c]),moduleId:a,parentId:c};-1===e.indexOf(c)&&(l.hot._acceptedDependencies[a]?(r[c]||(r[c]=[]),f(r[c],[a])):(delete r[c],e.push(c),n.push({chain:s.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:r}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];-1===t.indexOf(n)&&t.push(n)}}e=e||{};var _={},m=[],T={},b=function(){console.warn("[HMR] unexpected require("+R.moduleId+") to disposed module")};for(var M in p)if(Object.prototype.hasOwnProperty.call(p,M)){var R;c=A(M);var y=!1,x=!1,w=!1,N="";switch((R=p[M]?l(c):{type:"disposed",moduleId:M}).chain&&(N="\nUpdate propagation: "+R.chain.join(" -> ")),R.type){case"self-declined":e.onDeclined&&e.onDeclined(R),e.ignoreDeclined||(y=new Error("Aborted because of self decline: "+R.moduleId+N));break;case"declined":e.onDeclined&&e.onDeclined(R),e.ignoreDeclined||(y=new Error("Aborted because of declined dependency: "+R.moduleId+" in "+R.parentId+N));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(R),e.ignoreUnaccepted||(y=new Error("Aborted because "+c+" is not accepted"+N));break;case"accepted":e.onAccepted&&e.onAccepted(R),x=!0;break;case"disposed":e.onDisposed&&e.onDisposed(R),w=!0;break;default:throw new Error("Unexception type "+R.type)}if(y)return h("abort"),Promise.reject(y);if(x)for(c in T[c]=p[c],f(m,R.outdatedModules),R.outdatedDependencies)Object.prototype.hasOwnProperty.call(R.outdatedDependencies,c)&&(_[c]||(_[c]=[]),f(_[c],R.outdatedDependencies[c]));w&&(f(m,[R.moduleId]),T[c]=b)}var U,S=[];for(n=0;n<m.length;n++)c=m[n],v[c]&&v[c].hot._selfAccepted&&S.push({module:c,errorHandler:v[c].hot._selfAccepted});h("dispose"),Object.keys(g).forEach(function(t){!1===g[t]&&function(t){delete I[t]}(t)});for(var P,L,F=m.slice();F.length>0;)if(c=F.pop(),o=v[c]){var C={},D=o.hot._disposeHandlers;for(i=0;i<D.length;i++)(r=D[i])(C);for(s[c]=C,o.hot.active=!1,delete v[c],delete _[c],i=0;i<o.children.length;i++){var B=v[o.children[i]];B&&((U=B.parents.indexOf(c))>=0&&B.parents.splice(U,1))}}for(c in _)if(Object.prototype.hasOwnProperty.call(_,c)&&(o=v[c]))for(L=_[c],i=0;i<L.length;i++)P=L[i],(U=o.children.indexOf(P))>=0&&o.children.splice(U,1);for(c in h("apply"),a=E,T)Object.prototype.hasOwnProperty.call(T,c)&&(t[c]=T[c]);var X=null;for(c in _)if(Object.prototype.hasOwnProperty.call(_,c)&&(o=v[c])){L=_[c];var j=[];for(n=0;n<L.length;n++)if(P=L[n],r=o.hot._acceptedDependencies[P]){if(-1!==j.indexOf(r))continue;j.push(r)}for(n=0;n<j.length;n++){r=j[n];try{r(L)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:L[n],error:t}),e.ignoreErrored||X||(X=t)}}}for(n=0;n<S.length;n++){var k=S[n];c=k.module,u=[c];try{O(c)}catch(t){if("function"==typeof k.errorHandler)try{k.errorHandler(t)}catch(r){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:r,originalError:t}),e.ignoreErrored||X||(X=r),X||(X=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:c,error:t}),e.ignoreErrored||X||(X=t)}}return X?(h("fail"),Promise.reject(X)):(h("idle"),new Promise(function(t){t(m)}))}var v={},I={29:0};function O(e){if(v[e])return v[e].exports;var r=v[e]={i:e,l:!1,exports:{},hot:function(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==t,active:!0,accept:function(t,r){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)e._acceptedDependencies[t[n]]=r||function(){};else e._acceptedDependencies[t]=r||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._declinedDependencies[t[r]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var r=e._disposeHandlers.indexOf(t);r>=0&&e._disposeHandlers.splice(r,1)},check:R,apply:w,status:function(t){if(!t)return d;f.push(t)},addStatusHandler:function(t){f.push(t)},removeStatusHandler:function(t){var e=f.indexOf(t);e>=0&&f.splice(e,1)},data:s[t]};return n=void 0,e}(e),parents:(c=u,u=[],c),children:[]};return t[e].call(r.exports,r,r.exports,l(e)),r.l=!0,r.exports}O.e=function(t){var e=[],r=I[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise(function(e,n){r=I[t]=[e,n]});e.push(r[2]=n);var i,a=document.getElementsByTagName("head")[0],o=document.createElement("script");o.charset="utf-8",o.timeout=120,O.nc&&o.setAttribute("nonce",O.nc),o.src=function(t){return O.p+""+t+".bundle.js"}(t),i=function(e){o.onerror=o.onload=null,clearTimeout(s);var r=I[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+n+": "+i+")");a.type=n,a.request=i,r[1](a)}I[t]=void 0}};var s=setTimeout(function(){i({type:"timeout",target:o})},12e4);o.onerror=o.onload=i,a.appendChild(o)}return Promise.all(e)},O.m=t,O.c=v,O.d=function(t,e,r){O.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},O.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},O.t=function(t,e){if(1&e&&(t=O(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(O.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)O.d(r,n,function(e){return t[e]}.bind(null,n));return r},O.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return O.d(e,"a",e),e},O.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},O.p="",O.oe=function(t){throw console.error(t),t},O.h=function(){return a};var N=window.webpackJsonp=window.webpackJsonp||[],U=N.push.bind(N);N.push=e,N=N.slice();for(var S=0;S<N.length;S++)e(N[S]);var P=U;l(39)(O.s=39)}({0:function(t,e,r){"use strict";r.d(e,"c",function(){return l}),r.d(e,"b",function(){return s}),r.d(e,"d",function(){return f}),r.d(e,"a",function(){return d});var n=r(2),i=r(3),a=r(19),o=r(1);const s=document.querySelector("canvas"),u={antialias:!1,stencil:!0},c=location.search.replace("?","").toLocaleLowerCase();let l;"mrt"!==c&&"mirror"!==c&&"pbr"!==c&&"ibl"!==c?((l=s.getContext("webgl2",u))||console.warn("webgl2 not supported!"),console.log("webgl2 used."),window.useWebgl2=!0):l=s.getContext("webgl",u);const f=t=>t/180*Math.PI;let d=new class{constructor(){Object(n.a)(this,"shader",void 0),Object(n.a)(this,"shaderProgram",void 0),Object(n.a)(this,"identityMatrix",o.b.create()),Object(n.a)(this,"_normalMatrix",o.a.create()),Object(n.a)(this,"_inverseModelViewMatrix",o.a.create()),Object(n.a)(this,"_modelMatrix",void 0)}clear(t=.3,e=.3,r=.3,n=1){l.clearColor(t,e,r,n),l.clearDepth(1),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)}setCamera(t){this.camera=t}useShader(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram}drawMesh(t,e){t.material&&t.material.update(),t.bind(this.shaderProgram),this.shader&&(void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projMatrix),this.shader.uniform("uViewMatrix","mat4",this.camera.viewMatrix)),this.shader.uniform("uCameraPos","vec3",this.camera.position),e||this.shader.uniform("uModelMatrix","mat4",t.matrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix));const r=t.drawType;t.isInstanced?l.drawElementsInstanced(t.drawType,t.iBuffer.numItems,l.UNSIGNED_SHORT,0,t.numInstance):r===l.POINTS?l.drawArrays(r,0,t.vertexSize):l.drawElements(r,t.iBuffer.numItems,l.UNSIGNED_SHORT,0),t.unbind()}draw(t,e){if(t.length)for(let r=0;r<t.length;r++)this.draw(t[r],e);else t instanceof i.a?this.drawMesh(t,e):t instanceof a.a&&(t.updateMatrix(),t.children.forEach(t=>{this.draw(t)}))}}},1:function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"create",function(){return d}),r.d(n,"fromMat4",function(){return h}),r.d(n,"clone",function(){return _}),r.d(n,"copy",function(){return p}),r.d(n,"fromValues",function(){return E}),r.d(n,"set",function(){return m}),r.d(n,"identity",function(){return T}),r.d(n,"transpose",function(){return b}),r.d(n,"invert",function(){return M}),r.d(n,"adjoint",function(){return g}),r.d(n,"determinant",function(){return A}),r.d(n,"multiply",function(){return R}),r.d(n,"translate",function(){return y}),r.d(n,"rotate",function(){return x}),r.d(n,"scale",function(){return w}),r.d(n,"fromTranslation",function(){return v}),r.d(n,"fromRotation",function(){return I}),r.d(n,"fromScaling",function(){return O}),r.d(n,"fromMat2d",function(){return N}),r.d(n,"fromQuat",function(){return U}),r.d(n,"normalFromMat4",function(){return S}),r.d(n,"projection",function(){return P}),r.d(n,"str",function(){return L}),r.d(n,"frob",function(){return F}),r.d(n,"add",function(){return C}),r.d(n,"subtract",function(){return D}),r.d(n,"multiplyScalar",function(){return B}),r.d(n,"multiplyScalarAndAdd",function(){return X}),r.d(n,"exactEquals",function(){return j}),r.d(n,"equals",function(){return k}),r.d(n,"mul",function(){return G}),r.d(n,"sub",function(){return H});var i={};r.r(i),r.d(i,"create",function(){return V}),r.d(i,"clone",function(){return q}),r.d(i,"copy",function(){return Y}),r.d(i,"fromValues",function(){return W}),r.d(i,"set",function(){return z}),r.d(i,"identity",function(){return Z}),r.d(i,"transpose",function(){return K}),r.d(i,"invert",function(){return $}),r.d(i,"adjoint",function(){return Q}),r.d(i,"determinant",function(){return J}),r.d(i,"multiply",function(){return tt}),r.d(i,"translate",function(){return et}),r.d(i,"scale",function(){return rt}),r.d(i,"rotate",function(){return nt}),r.d(i,"rotateX",function(){return it}),r.d(i,"rotateY",function(){return at}),r.d(i,"rotateZ",function(){return ot}),r.d(i,"fromTranslation",function(){return st}),r.d(i,"fromScaling",function(){return ut}),r.d(i,"fromRotation",function(){return ct}),r.d(i,"fromXRotation",function(){return lt}),r.d(i,"fromYRotation",function(){return ft}),r.d(i,"fromZRotation",function(){return dt}),r.d(i,"fromRotationTranslation",function(){return ht}),r.d(i,"fromQuat2",function(){return _t}),r.d(i,"getTranslation",function(){return pt}),r.d(i,"getScaling",function(){return Et}),r.d(i,"getRotation",function(){return mt}),r.d(i,"fromRotationTranslationScale",function(){return Tt}),r.d(i,"fromRotationTranslationScaleOrigin",function(){return bt}),r.d(i,"fromQuat",function(){return Mt}),r.d(i,"frustum",function(){return gt}),r.d(i,"perspective",function(){return At}),r.d(i,"perspectiveFromFieldOfView",function(){return Rt}),r.d(i,"ortho",function(){return yt}),r.d(i,"lookAt",function(){return xt}),r.d(i,"targetTo",function(){return wt}),r.d(i,"str",function(){return vt}),r.d(i,"frob",function(){return It}),r.d(i,"add",function(){return Ot}),r.d(i,"subtract",function(){return Nt}),r.d(i,"multiplyScalar",function(){return Ut}),r.d(i,"multiplyScalarAndAdd",function(){return St}),r.d(i,"exactEquals",function(){return Pt}),r.d(i,"equals",function(){return Lt}),r.d(i,"mul",function(){return Ft}),r.d(i,"sub",function(){return Ct});var a={};r.r(a),r.d(a,"create",function(){return Dt}),r.d(a,"clone",function(){return Bt}),r.d(a,"length",function(){return Xt}),r.d(a,"fromValues",function(){return jt}),r.d(a,"copy",function(){return kt}),r.d(a,"set",function(){return Gt}),r.d(a,"add",function(){return Ht}),r.d(a,"subtract",function(){return Vt}),r.d(a,"multiply",function(){return qt}),r.d(a,"divide",function(){return Yt}),r.d(a,"ceil",function(){return Wt}),r.d(a,"floor",function(){return zt}),r.d(a,"min",function(){return Zt}),r.d(a,"max",function(){return Kt}),r.d(a,"round",function(){return $t}),r.d(a,"scale",function(){return Qt}),r.d(a,"scaleAndAdd",function(){return Jt}),r.d(a,"distance",function(){return te}),r.d(a,"squaredDistance",function(){return ee}),r.d(a,"squaredLength",function(){return re}),r.d(a,"negate",function(){return ne}),r.d(a,"inverse",function(){return ie}),r.d(a,"normalize",function(){return ae}),r.d(a,"dot",function(){return oe}),r.d(a,"cross",function(){return se}),r.d(a,"lerp",function(){return ue}),r.d(a,"hermite",function(){return ce}),r.d(a,"bezier",function(){return le}),r.d(a,"random",function(){return fe}),r.d(a,"transformMat4",function(){return de}),r.d(a,"transformMat3",function(){return he}),r.d(a,"transformQuat",function(){return _e}),r.d(a,"rotateX",function(){return pe}),r.d(a,"rotateY",function(){return Ee}),r.d(a,"rotateZ",function(){return me}),r.d(a,"angle",function(){return Te}),r.d(a,"str",function(){return be}),r.d(a,"exactEquals",function(){return Me}),r.d(a,"equals",function(){return ge}),r.d(a,"sub",function(){return Ae}),r.d(a,"mul",function(){return Re}),r.d(a,"div",function(){return ye}),r.d(a,"dist",function(){return xe}),r.d(a,"sqrDist",function(){return we}),r.d(a,"len",function(){return ve}),r.d(a,"sqrLen",function(){return Ie}),r.d(a,"forEach",function(){return Oe});var o={};r.r(o),r.d(o,"create",function(){return Ne}),r.d(o,"clone",function(){return Ue}),r.d(o,"fromValues",function(){return Se}),r.d(o,"copy",function(){return Pe}),r.d(o,"set",function(){return Le}),r.d(o,"add",function(){return Fe}),r.d(o,"subtract",function(){return Ce}),r.d(o,"multiply",function(){return De}),r.d(o,"divide",function(){return Be}),r.d(o,"ceil",function(){return Xe}),r.d(o,"floor",function(){return je}),r.d(o,"min",function(){return ke}),r.d(o,"max",function(){return Ge}),r.d(o,"round",function(){return He}),r.d(o,"scale",function(){return Ve}),r.d(o,"scaleAndAdd",function(){return qe}),r.d(o,"distance",function(){return Ye}),r.d(o,"squaredDistance",function(){return We}),r.d(o,"length",function(){return ze}),r.d(o,"squaredLength",function(){return Ze}),r.d(o,"negate",function(){return Ke}),r.d(o,"inverse",function(){return $e}),r.d(o,"normalize",function(){return Qe}),r.d(o,"dot",function(){return Je}),r.d(o,"lerp",function(){return tr}),r.d(o,"random",function(){return er}),r.d(o,"transformMat4",function(){return rr}),r.d(o,"transformQuat",function(){return nr}),r.d(o,"str",function(){return ir}),r.d(o,"exactEquals",function(){return ar}),r.d(o,"equals",function(){return or}),r.d(o,"sub",function(){return sr}),r.d(o,"mul",function(){return ur}),r.d(o,"div",function(){return cr}),r.d(o,"dist",function(){return lr}),r.d(o,"sqrDist",function(){return fr}),r.d(o,"len",function(){return dr}),r.d(o,"sqrLen",function(){return hr}),r.d(o,"forEach",function(){return _r});var s={};r.r(s),r.d(s,"create",function(){return pr}),r.d(s,"identity",function(){return Er}),r.d(s,"setAxisAngle",function(){return mr}),r.d(s,"getAxisAngle",function(){return Tr}),r.d(s,"multiply",function(){return br}),r.d(s,"rotateX",function(){return Mr}),r.d(s,"rotateY",function(){return gr}),r.d(s,"rotateZ",function(){return Ar}),r.d(s,"calculateW",function(){return Rr}),r.d(s,"slerp",function(){return yr}),r.d(s,"random",function(){return xr}),r.d(s,"invert",function(){return wr}),r.d(s,"conjugate",function(){return vr}),r.d(s,"fromMat3",function(){return Ir}),r.d(s,"fromEuler",function(){return Or}),r.d(s,"str",function(){return Nr}),r.d(s,"clone",function(){return Ur}),r.d(s,"fromValues",function(){return Sr}),r.d(s,"copy",function(){return Pr}),r.d(s,"set",function(){return Lr}),r.d(s,"add",function(){return Fr}),r.d(s,"mul",function(){return Cr}),r.d(s,"scale",function(){return Dr}),r.d(s,"dot",function(){return Br}),r.d(s,"lerp",function(){return Xr}),r.d(s,"length",function(){return jr}),r.d(s,"len",function(){return kr}),r.d(s,"squaredLength",function(){return Gr}),r.d(s,"sqrLen",function(){return Hr}),r.d(s,"normalize",function(){return Vr}),r.d(s,"exactEquals",function(){return qr}),r.d(s,"equals",function(){return Yr}),r.d(s,"rotationTo",function(){return Wr}),r.d(s,"sqlerp",function(){return zr}),r.d(s,"setAxes",function(){return Zr});var u={};r.r(u),r.d(u,"create",function(){return Kr}),r.d(u,"clone",function(){return $r}),r.d(u,"fromValues",function(){return Qr}),r.d(u,"copy",function(){return Jr}),r.d(u,"set",function(){return tn}),r.d(u,"add",function(){return en}),r.d(u,"subtract",function(){return rn}),r.d(u,"multiply",function(){return nn}),r.d(u,"divide",function(){return an}),r.d(u,"ceil",function(){return on}),r.d(u,"floor",function(){return sn}),r.d(u,"min",function(){return un}),r.d(u,"max",function(){return cn}),r.d(u,"round",function(){return ln}),r.d(u,"scale",function(){return fn}),r.d(u,"scaleAndAdd",function(){return dn}),r.d(u,"distance",function(){return hn}),r.d(u,"squaredDistance",function(){return _n}),r.d(u,"length",function(){return pn}),r.d(u,"squaredLength",function(){return En}),r.d(u,"negate",function(){return mn}),r.d(u,"inverse",function(){return Tn}),r.d(u,"normalize",function(){return bn}),r.d(u,"dot",function(){return Mn}),r.d(u,"cross",function(){return gn}),r.d(u,"lerp",function(){return An}),r.d(u,"random",function(){return Rn}),r.d(u,"transformMat2",function(){return yn}),r.d(u,"transformMat2d",function(){return xn}),r.d(u,"transformMat3",function(){return wn}),r.d(u,"transformMat4",function(){return vn}),r.d(u,"rotate",function(){return In}),r.d(u,"angle",function(){return On}),r.d(u,"str",function(){return Nn}),r.d(u,"exactEquals",function(){return Un}),r.d(u,"equals",function(){return Sn}),r.d(u,"len",function(){return Pn}),r.d(u,"sub",function(){return Ln}),r.d(u,"mul",function(){return Fn}),r.d(u,"div",function(){return Cn}),r.d(u,"dist",function(){return Dn}),r.d(u,"sqrDist",function(){return Bn}),r.d(u,"sqrLen",function(){return Xn}),r.d(u,"forEach",function(){return jn});const c=1e-6;let l="undefined"!=typeof Float32Array?Float32Array:Array;const f=Math.random;Math.PI;function d(){let t=new l(9);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _(t){let e=new l(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function p(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function E(t,e,r,n,i,a,o,s,u){let c=new l(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=u,c}function m(t,e,r,n,i,a,o,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t}function T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function b(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function M(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*o-s*c,d=-l*a+s*u,h=c*a-o*u,_=r*f+n*d+i*h;return _?(_=1/_,t[0]=f*_,t[1]=(-l*n+i*c)*_,t[2]=(s*n-i*o)*_,t[3]=d*_,t[4]=(l*r-i*u)*_,t[5]=(-s*r+i*a)*_,t[6]=h*_,t[7]=(-c*r+n*u)*_,t[8]=(o*r-n*a)*_,t):null}function g(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=o*l-s*c,t[1]=i*c-n*l,t[2]=n*s-i*o,t[3]=s*u-a*l,t[4]=r*l-i*u,t[5]=i*a-r*s,t[6]=a*c-o*u,t[7]=n*u-r*c,t[8]=r*o-n*a,t}function A(t){let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-o*u)+r*(-c*i+o*s)+n*(u*i-a*s)}function R(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=r[0],h=r[1],_=r[2],p=r[3],E=r[4],m=r[5],T=r[6],b=r[7],M=r[8];return t[0]=d*n+h*o+_*c,t[1]=d*i+h*s+_*l,t[2]=d*a+h*u+_*f,t[3]=p*n+E*o+m*c,t[4]=p*i+E*s+m*l,t[5]=p*a+E*u+m*f,t[6]=T*n+b*o+M*c,t[7]=T*i+b*s+M*l,t[8]=T*a+b*u+M*f,t}function y(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=d*n+h*o+c,t[7]=d*i+h*s+l,t[8]=d*a+h*u+f,t}function x(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*o,t[1]=h*i+d*s,t[2]=h*a+d*u,t[3]=h*o-d*n,t[4]=h*s-d*i,t[5]=h*u-d*a,t[6]=c,t[7]=l,t[8]=f,t}function w(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function v(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function I(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function N(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function U(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,l=n*o,f=n*s,d=i*o,h=i*s,_=i*u,p=a*o,E=a*s,m=a*u;return t[0]=1-f-_,t[3]=l-m,t[6]=d+E,t[1]=l+m,t[4]=1-c-_,t[7]=h-p,t[2]=d-E,t[5]=h+p,t[8]=1-c-f,t}function S(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],_=e[12],p=e[13],E=e[14],m=e[15],T=r*s-n*o,b=r*u-i*o,M=r*c-a*o,g=n*u-i*s,A=n*c-a*s,R=i*c-a*u,y=l*p-f*_,x=l*E-d*_,w=l*m-h*_,v=f*E-d*p,I=f*m-h*p,O=d*m-h*E,N=T*O-b*I+M*v+g*w-A*x+R*y;return N?(N=1/N,t[0]=(s*O-u*I+c*v)*N,t[1]=(u*w-o*O-c*x)*N,t[2]=(o*I-s*w+c*y)*N,t[3]=(i*I-n*O-a*v)*N,t[4]=(r*O-i*w+a*x)*N,t[5]=(n*w-r*I-a*y)*N,t[6]=(p*R-E*A+m*g)*N,t[7]=(E*M-_*R-m*b)*N,t[8]=(_*A-p*M+m*T)*N,t):null}function P(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function L(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function F(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function C(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function D(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function B(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function X(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function k(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],f=t[8],d=e[0],h=e[1],_=e[2],p=e[3],E=e[4],m=e[5],T=e[6],b=e[7],M=e[8];return Math.abs(r-d)<=c*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=c*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-_)<=c*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-p)<=c*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-E)<=c*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-m)<=c*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-T)<=c*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(l-b)<=c*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-M)<=c*Math.max(1,Math.abs(f),Math.abs(M))}const G=R,H=D;function V(){let t=new l(16);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function q(t){let e=new l(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function W(t,e,r,n,i,a,o,s,u,c,f,d,h,_,p,E){let m=new l(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=a,m[6]=o,m[7]=s,m[8]=u,m[9]=c,m[10]=f,m[11]=d,m[12]=h,m[13]=_,m[14]=p,m[15]=E,m}function z(t,e,r,n,i,a,o,s,u,c,l,f,d,h,_,p,E){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=_,t[14]=p,t[15]=E,t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function K(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function $(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],_=e[12],p=e[13],E=e[14],m=e[15],T=r*s-n*o,b=r*u-i*o,M=r*c-a*o,g=n*u-i*s,A=n*c-a*s,R=i*c-a*u,y=l*p-f*_,x=l*E-d*_,w=l*m-h*_,v=f*E-d*p,I=f*m-h*p,O=d*m-h*E,N=T*O-b*I+M*v+g*w-A*x+R*y;return N?(N=1/N,t[0]=(s*O-u*I+c*v)*N,t[1]=(i*I-n*O-a*v)*N,t[2]=(p*R-E*A+m*g)*N,t[3]=(d*A-f*R-h*g)*N,t[4]=(u*w-o*O-c*x)*N,t[5]=(r*O-i*w+a*x)*N,t[6]=(E*M-_*R-m*b)*N,t[7]=(l*R-d*M+h*b)*N,t[8]=(o*I-s*w+c*y)*N,t[9]=(n*w-r*I-a*y)*N,t[10]=(_*A-p*M+m*T)*N,t[11]=(f*M-l*A-h*T)*N,t[12]=(s*x-o*v-u*y)*N,t[13]=(r*v-n*x+i*y)*N,t[14]=(p*b-_*g-E*T)*N,t[15]=(l*g-f*b+d*T)*N,t):null}function Q(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],_=e[12],p=e[13],E=e[14],m=e[15];return t[0]=s*(d*m-h*E)-f*(u*m-c*E)+p*(u*h-c*d),t[1]=-(n*(d*m-h*E)-f*(i*m-a*E)+p*(i*h-a*d)),t[2]=n*(u*m-c*E)-s*(i*m-a*E)+p*(i*c-a*u),t[3]=-(n*(u*h-c*d)-s*(i*h-a*d)+f*(i*c-a*u)),t[4]=-(o*(d*m-h*E)-l*(u*m-c*E)+_*(u*h-c*d)),t[5]=r*(d*m-h*E)-l*(i*m-a*E)+_*(i*h-a*d),t[6]=-(r*(u*m-c*E)-o*(i*m-a*E)+_*(i*c-a*u)),t[7]=r*(u*h-c*d)-o*(i*h-a*d)+l*(i*c-a*u),t[8]=o*(f*m-h*p)-l*(s*m-c*p)+_*(s*h-c*f),t[9]=-(r*(f*m-h*p)-l*(n*m-a*p)+_*(n*h-a*f)),t[10]=r*(s*m-c*p)-o*(n*m-a*p)+_*(n*c-a*s),t[11]=-(r*(s*h-c*f)-o*(n*h-a*f)+l*(n*c-a*s)),t[12]=-(o*(f*E-d*p)-l*(s*E-u*p)+_*(s*d-u*f)),t[13]=r*(f*E-d*p)-l*(n*E-i*p)+_*(n*d-i*f),t[14]=-(r*(s*E-u*p)-o*(n*E-i*p)+_*(n*u-i*s)),t[15]=r*(s*d-u*f)-o*(n*d-i*f)+l*(n*u-i*s),t}function J(t){let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],_=t[13],p=t[14],E=t[15];return(e*o-r*a)*(f*E-d*p)-(e*s-n*a)*(l*E-d*_)+(e*u-i*a)*(l*p-f*_)+(r*s-n*o)*(c*E-d*h)-(r*u-i*o)*(c*p-f*h)+(n*u-i*s)*(c*_-l*h)}function tt(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],_=e[11],p=e[12],E=e[13],m=e[14],T=e[15],b=r[0],M=r[1],g=r[2],A=r[3];return t[0]=b*n+M*s+g*f+A*p,t[1]=b*i+M*u+g*d+A*E,t[2]=b*a+M*c+g*h+A*m,t[3]=b*o+M*l+g*_+A*T,b=r[4],M=r[5],g=r[6],A=r[7],t[4]=b*n+M*s+g*f+A*p,t[5]=b*i+M*u+g*d+A*E,t[6]=b*a+M*c+g*h+A*m,t[7]=b*o+M*l+g*_+A*T,b=r[8],M=r[9],g=r[10],A=r[11],t[8]=b*n+M*s+g*f+A*p,t[9]=b*i+M*u+g*d+A*E,t[10]=b*a+M*c+g*h+A*m,t[11]=b*o+M*l+g*_+A*T,b=r[12],M=r[13],g=r[14],A=r[15],t[12]=b*n+M*s+g*f+A*p,t[13]=b*i+M*u+g*d+A*E,t[14]=b*a+M*c+g*h+A*m,t[15]=b*o+M*l+g*_+A*T,t}function et(t,e,r){let n,i,a,o,s,u,c,l,f,d,h,_,p=r[0],E=r[1],m=r[2];return e===t?(t[12]=e[0]*p+e[4]*E+e[8]*m+e[12],t[13]=e[1]*p+e[5]*E+e[9]*m+e[13],t[14]=e[2]*p+e[6]*E+e[10]*m+e[14],t[15]=e[3]*p+e[7]*E+e[11]*m+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],_=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=d,t[10]=h,t[11]=_,t[12]=n*p+s*E+f*m+e[12],t[13]=i*p+u*E+d*m+e[13],t[14]=a*p+c*E+h*m+e[14],t[15]=o*p+l*E+_*m+e[15]),t}function rt(t,e,r){let n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function nt(t,e,r,n){let i,a,o,s,u,l,f,d,h,_,p,E,m,T,b,M,g,A,R,y,x,w,v,I,O=n[0],N=n[1],U=n[2],S=Math.sqrt(O*O+N*N+U*U);return S<c?null:(O*=S=1/S,N*=S,U*=S,i=Math.sin(r),o=1-(a=Math.cos(r)),s=e[0],u=e[1],l=e[2],f=e[3],d=e[4],h=e[5],_=e[6],p=e[7],E=e[8],m=e[9],T=e[10],b=e[11],M=O*O*o+a,g=N*O*o+U*i,A=U*O*o-N*i,R=O*N*o-U*i,y=N*N*o+a,x=U*N*o+O*i,w=O*U*o+N*i,v=N*U*o-O*i,I=U*U*o+a,t[0]=s*M+d*g+E*A,t[1]=u*M+h*g+m*A,t[2]=l*M+_*g+T*A,t[3]=f*M+p*g+b*A,t[4]=s*R+d*y+E*x,t[5]=u*R+h*y+m*x,t[6]=l*R+_*y+T*x,t[7]=f*R+p*y+b*x,t[8]=s*w+d*v+E*I,t[9]=u*w+h*v+m*I,t[10]=l*w+_*v+T*I,t[11]=f*w+p*v+b*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function it(t,e,r){let n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+l*n,t[6]=s*i+f*n,t[7]=u*i+d*n,t[8]=c*i-a*n,t[9]=l*i-o*n,t[10]=f*i-s*n,t[11]=d*i-u*n,t}function at(t,e,r){let n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-l*n,t[2]=s*i-f*n,t[3]=u*i-d*n,t[8]=a*n+c*i,t[9]=o*n+l*i,t[10]=s*n+f*i,t[11]=u*n+d*i,t}function ot(t,e,r){let n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+l*n,t[2]=s*i+f*n,t[3]=u*i+d*n,t[4]=c*i-a*n,t[5]=l*i-o*n,t[6]=f*i-s*n,t[7]=d*i-u*n,t}function st(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ut(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,e,r){let n,i,a,o=r[0],s=r[1],u=r[2],l=Math.sqrt(o*o+s*s+u*u);return l<c?null:(o*=l=1/l,s*=l,u*=l,n=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+u*n,t[2]=u*o*a-s*n,t[3]=0,t[4]=o*s*a-u*n,t[5]=s*s*a+i,t[6]=u*s*a+o*n,t[7]=0,t[8]=o*u*a+s*n,t[9]=s*u*a-o*n,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function lt(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ft(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dt(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ht(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,u=i+i,c=a+a,l=n*s,f=n*u,d=n*c,h=i*u,_=i*c,p=a*c,E=o*s,m=o*u,T=o*c;return t[0]=1-(h+p),t[1]=f+T,t[2]=d-m,t[3]=0,t[4]=f-T,t[5]=1-(l+p),t[6]=_+E,t[7]=0,t[8]=d+m,t[9]=_-E,t[10]=1-(l+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function _t(t,e){let r=new l(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],f=e[7],d=n*n+i*i+a*a+o*o;return d>0?(r[0]=2*(s*o+f*n+u*a-c*i)/d,r[1]=2*(u*o+f*i+c*n-s*a)/d,r[2]=2*(c*o+f*a+s*i-u*n)/d):(r[0]=2*(s*o+f*n+u*a-c*i),r[1]=2*(u*o+f*i+c*n-s*a),r[2]=2*(c*o+f*a+s*i-u*n)),ht(t,e,r),t}function pt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Et(t,e){let r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(a*a+o*o+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t}function mt(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function Tt(t,e,r,n){let i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,c=a+a,l=o+o,f=i*u,d=i*c,h=i*l,_=a*c,p=a*l,E=o*l,m=s*u,T=s*c,b=s*l,M=n[0],g=n[1],A=n[2];return t[0]=(1-(_+E))*M,t[1]=(d+b)*M,t[2]=(h-T)*M,t[3]=0,t[4]=(d-b)*g,t[5]=(1-(f+E))*g,t[6]=(p+m)*g,t[7]=0,t[8]=(h+T)*A,t[9]=(p-m)*A,t[10]=(1-(f+_))*A,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function bt(t,e,r,n,i){let a=e[0],o=e[1],s=e[2],u=e[3],c=a+a,l=o+o,f=s+s,d=a*c,h=a*l,_=a*f,p=o*l,E=o*f,m=s*f,T=u*c,b=u*l,M=u*f,g=n[0],A=n[1],R=n[2],y=i[0],x=i[1],w=i[2],v=(1-(p+m))*g,I=(h+M)*g,O=(_-b)*g,N=(h-M)*A,U=(1-(d+m))*A,S=(E+T)*A,P=(_+b)*R,L=(E-T)*R,F=(1-(d+p))*R;return t[0]=v,t[1]=I,t[2]=O,t[3]=0,t[4]=N,t[5]=U,t[6]=S,t[7]=0,t[8]=P,t[9]=L,t[10]=F,t[11]=0,t[12]=r[0]+y-(v*y+N*x+P*w),t[13]=r[1]+x-(I*y+U*x+L*w),t[14]=r[2]+w-(O*y+S*x+F*w),t[15]=1,t}function Mt(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,l=n*o,f=n*s,d=i*o,h=i*s,_=i*u,p=a*o,E=a*s,m=a*u;return t[0]=1-f-_,t[1]=l+m,t[2]=d-E,t[3]=0,t[4]=l-m,t[5]=1-c-_,t[6]=h+p,t[7]=0,t[8]=d+E,t[9]=h-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gt(t,e,r,n,i,a,o){let s=1/(r-e),u=1/(i-n),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function At(t,e,r,n,i){let a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t}function Rt(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function yt(t,e,r,n,i,a,o){let s=1/(e-r),u=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*c,t[15]=1,t}function xt(t,e,r,n){let i,a,o,s,u,l,f,d,h,_,p=e[0],E=e[1],m=e[2],T=n[0],b=n[1],M=n[2],g=r[0],A=r[1],R=r[2];return Math.abs(p-g)<c&&Math.abs(E-A)<c&&Math.abs(m-R)<c?Z(t):(f=p-g,d=E-A,h=m-R,i=b*(h*=_=1/Math.sqrt(f*f+d*d+h*h))-M*(d*=_),a=M*(f*=_)-T*h,o=T*d-b*f,(_=Math.sqrt(i*i+a*a+o*o))?(i*=_=1/_,a*=_,o*=_):(i=0,a=0,o=0),s=d*o-h*a,u=h*i-f*o,l=f*a-d*i,(_=Math.sqrt(s*s+u*u+l*l))?(s*=_=1/_,u*=_,l*=_):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=a,t[5]=u,t[6]=d,t[7]=0,t[8]=o,t[9]=l,t[10]=h,t[11]=0,t[12]=-(i*p+a*E+o*m),t[13]=-(s*p+u*E+l*m),t[14]=-(f*p+d*E+h*m),t[15]=1,t)}function wt(t,e,r,n){let i=e[0],a=e[1],o=e[2],s=n[0],u=n[1],c=n[2],l=i-r[0],f=a-r[1],d=o-r[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);let _=u*d-c*f,p=c*l-s*d,E=s*f-u*l;return(h=_*_+p*p+E*E)>0&&(_*=h=1/Math.sqrt(h),p*=h,E*=h),t[0]=_,t[1]=p,t[2]=E,t[3]=0,t[4]=f*E-d*p,t[5]=d*_-l*E,t[6]=l*p-f*_,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function vt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function It(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Ot(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Nt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ut(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function St(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Lt(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],f=t[8],d=t[9],h=t[10],_=t[11],p=t[12],E=t[13],m=t[14],T=t[15],b=e[0],M=e[1],g=e[2],A=e[3],R=e[4],y=e[5],x=e[6],w=e[7],v=e[8],I=e[9],O=e[10],N=e[11],U=e[12],S=e[13],P=e[14],L=e[15];return Math.abs(r-b)<=c*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-M)<=c*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(i-g)<=c*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(a-A)<=c*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(o-R)<=c*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(s-y)<=c*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-x)<=c*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-w)<=c*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(f-v)<=c*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(d-I)<=c*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(h-O)<=c*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(_-N)<=c*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(p-U)<=c*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(E-S)<=c*Math.max(1,Math.abs(E),Math.abs(S))&&Math.abs(m-P)<=c*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(T-L)<=c*Math.max(1,Math.abs(T),Math.abs(L))}const Ft=tt,Ct=Nt;function Dt(){let t=new l(3);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Bt(t){var e=new l(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xt(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function jt(t,e,r){let n=new l(3);return n[0]=t,n[1]=e,n[2]=r,n}function kt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Gt(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ht(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Vt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function qt(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Yt(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Wt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function zt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Zt(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Kt(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function $t(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Qt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Jt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function te(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function ee(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function re(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function ne(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ie(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ae(t,e){let r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function oe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function se(t,e,r){let n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t}function ue(t,e,r,n){let i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}function ce(t,e,r,n,i,a){let o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),l=o*(3-2*a);return t[0]=e[0]*s+r[0]*u+n[0]*c+i[0]*l,t[1]=e[1]*s+r[1]*u+n[1]*c+i[1]*l,t[2]=e[2]*s+r[2]*u+n[2]*c+i[2]*l,t}function le(t,e,r,n,i,a){let o=1-a,s=o*o,u=a*a,c=s*o,l=3*a*s,f=3*u*o,d=u*a;return t[0]=e[0]*c+r[0]*l+n[0]*f+i[0]*d,t[1]=e[1]*c+r[1]*l+n[1]*f+i[1]*d,t[2]=e[2]*c+r[2]*l+n[2]*f+i[2]*d,t}function fe(t,e){e=e||1;let r=2*f()*Math.PI,n=2*f()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function de(t,e,r){let n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function he(t,e,r){let n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function _e(t,e,r){let n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],u=e[1],c=e[2],l=i*c-a*u,f=a*s-n*c,d=n*u-i*s,h=i*d-a*f,_=a*l-n*d,p=n*f-i*l,E=2*o;return l*=E,f*=E,d*=E,h*=2,_*=2,p*=2,t[0]=s+l+h,t[1]=u+f+_,t[2]=c+d+p,t}function pe(t,e,r,n){let i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Ee(t,e,r,n){let i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function me(t,e,r,n){let i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Te(t,e){let r=jt(t[0],t[1],t[2]),n=jt(e[0],e[1],e[2]);ae(r,r),ae(n,n);let i=oe(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function be(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ge(t,e){let r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(r-a)<=c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=c*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))}const Ae=Vt,Re=qt,ye=Yt,xe=te,we=ee,ve=Xt,Ie=re,Oe=function(){let t=Dt();return function(e,r,n,i,a,o){let s,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();function Ne(){let t=new l(4);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ue(t){let e=new l(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Se(t,e,r,n){let i=new l(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function Pe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Le(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Fe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Ce(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function De(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Be(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Xe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function ke(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Ge(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function He(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Ve(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function qe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Ye(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+a*a)}function We(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function ze(t){let e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function Ze(t){let e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function Ke(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function $e(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Qe(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o),t}function Je(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function tr(t,e,r,n){let i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}function er(t,e){var r,n,i,a,o,s;e=e||1;do{o=(r=2*f()-1)*r+(n=2*f()-1)*n}while(o>=1);do{s=(i=2*f()-1)*i+(a=2*f()-1)*a}while(s>=1);var u=Math.sqrt((1-o)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*u,t[3]=e*a*u,t}function rr(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function nr(t,e,r){let n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*a-u*i,f=c*i+u*n-o*a,d=c*a+o*i-s*n,h=-o*n-s*i-u*a;return t[0]=l*c+h*-o+f*-u-d*-s,t[1]=f*c+h*-s+d*-o-l*-u,t[2]=d*c+h*-u+l*-s-f*-o,t[3]=e[3],t}function ir(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ar(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function or(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=c*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=c*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=c*Math.max(1,Math.abs(a),Math.abs(l))}const sr=Ce,ur=De,cr=Be,lr=Ye,fr=We,dr=ze,hr=Ze,_r=function(){let t=Ne();return function(e,r,n,i,a,o){let s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function pr(){let t=new l(4);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Er(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function mr(t,e,r){r*=.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Tr(t,e){let r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>c?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function br(t,e,r){let n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+o*s+i*c-a*u,t[1]=i*l+o*u+a*s-n*c,t[2]=a*l+o*c+n*u-i*s,t[3]=o*l-n*s-i*u-a*c,t}function Mr(t,e,r){r*=.5;let n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-n*s,t}function gr(t,e,r){r*=.5;let n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-a*s,t[1]=i*u+o*s,t[2]=a*u+n*s,t[3]=o*u-i*s,t}function Ar(t,e,r){r*=.5;let n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function Rr(t,e){let r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function yr(t,e,r,n){let i,a,o,s,u,l=e[0],f=e[1],d=e[2],h=e[3],_=r[0],p=r[1],E=r[2],m=r[3];return(a=l*_+f*p+d*E+h*m)<0&&(a=-a,_=-_,p=-p,E=-E,m=-m),1-a>c?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n),t[0]=s*l+u*_,t[1]=s*f+u*p,t[2]=s*d+u*E,t[3]=s*h+u*m,t}function xr(t){let e=f(),r=f(),n=f(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t}function wr(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t}function vr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Ir(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let i=(n+1)%3,a=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*a+a]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+a]-e[3*a+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[a]=(e[3*a+n]+e[3*n+a])*r}return t}function Or(t,e,r,n){let i=.5*Math.PI/180;e*=i,r*=i,n*=i;let a=Math.sin(e),o=Math.cos(e),s=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return t[0]=a*u*l-o*s*c,t[1]=o*s*l+a*u*c,t[2]=o*u*c-a*s*l,t[3]=o*u*l+a*s*c,t}function Nr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Ur=Ue,Sr=Se,Pr=Pe,Lr=Le,Fr=Fe,Cr=br,Dr=Ve,Br=Je,Xr=tr,jr=ze,kr=jr,Gr=Ze,Hr=Gr,Vr=Qe,qr=ar,Yr=or,Wr=function(){let t=Dt(),e=jt(1,0,0),r=jt(0,1,0);return function(n,i,a){let o=oe(i,a);return o<-.999999?(se(t,e,i),ve(t)<1e-6&&se(t,r,i),ae(t,t),mr(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(se(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,Vr(n,n))}}(),zr=function(){let t=pr(),e=pr();return function(r,n,i,a,o,s){return yr(t,n,o,s),yr(e,i,a,s),yr(r,t,e,2*s*(1-s)),r}}(),Zr=function(){let t=d();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],Vr(e,Ir(e,t))}}();function Kr(){let t=new l(2);return l!=Float32Array&&(t[0]=0,t[1]=0),t}function $r(t){let e=new l(2);return e[0]=t[0],e[1]=t[1],e}function Qr(t,e){let r=new l(2);return r[0]=t,r[1]=e,r}function Jr(t,e){return t[0]=e[0],t[1]=e[1],t}function tn(t,e,r){return t[0]=e,t[1]=r,t}function en(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function rn(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function nn(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function an(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function on(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function sn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function un(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function cn(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function ln(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function fn(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function dn(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function hn(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function _n(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function pn(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function En(t){var e=t[0],r=t[1];return e*e+r*r}function mn(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Tn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function bn(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function Mn(t,e){return t[0]*e[0]+t[1]*e[1]}function gn(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function An(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t}function Rn(t,e){e=e||1;var r=2*f()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function yn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function xn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function wn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function vn(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function In(t,e,r,n){let i=e[0]-r[0],a=e[1]-r[1],o=Math.sin(n),s=Math.cos(n);return t[0]=i*s-a*o+r[0],t[1]=i*o+a*s+r[1],t}function On(t,e){let r=t[0],n=t[1],i=e[0],a=e[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));let s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));let u=(r*i+n*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function Nn(t){return"vec2("+t[0]+", "+t[1]+")"}function Un(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sn(t,e){let r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=c*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))}const Pn=pn,Ln=rn,Fn=nn,Cn=an,Dn=hn,Bn=_n,Xn=En,jn=function(){let t=Kr();return function(e,r,n,i,a,o){let s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();r.d(e,"a",function(){return n}),r.d(e,"b",function(){return i}),r.d(e,"c",function(){return s}),r.d(e,"d",function(){return u}),r.d(e,"e",function(){return a}),r.d(e,"f",function(){return o})},10:function(t,e,r){t.exports=r(151)},12:function(t,e,r){"use strict";var n=r(0),i=r(141),a=r.n(i);class o{constructor(t,e={},r=!1){if(r)return void(this.texture=t);let i=t.length>6;t[0].mipmapCount&&(i=t[0].mipmapCount>1),this.texture=n.c.createTexture(),this.magFilter=e.magFilter||n.c.LINEAR,this.minFilter=e.minFilter||n.c.LINEAR_MIPMAP_LINEAR,this.wrapS=e.wrapS||n.c.CLAMP_TO_EDGE,this.wrapT=e.wrapT||n.c.CLAMP_TO_EDGE,i||this.minFilter!=n.c.LINEAR_MIPMAP_LINEAR||(this.minFilter=n.c.LINEAR),n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,this.texture);const a=[n.c.TEXTURE_CUBE_MAP_POSITIVE_X,n.c.TEXTURE_CUBE_MAP_NEGATIVE_X,n.c.TEXTURE_CUBE_MAP_POSITIVE_Y,n.c.TEXTURE_CUBE_MAP_NEGATIVE_Y,n.c.TEXTURE_CUBE_MAP_POSITIVE_Z,n.c.TEXTURE_CUBE_MAP_NEGATIVE_Z];let o=1,s=0;if(o=t.length/6,this.numLevels=o,i)for(let e=0;e<6;e++)for(let r=0;r<o;r++)n.c.pixelStorei(n.c.UNPACK_FLIP_Y_WEBGL,!1),t[s=e*o+r].shape?window.useWebgl2?n.c.texImage2D(a[e],r,n.c.RGBA16F,t[s].shape[0],t[s].shape[1],0,n.c.RGBA,n.c.FLOAT,t[s].data):n.c.texImage2D(a[e],r,n.c.RGBA,t[s].shape[0],t[s].shape[1],0,n.c.RGBA,n.c.FLOAT,t[s].data):n.c.texImage2D(a[e],r,n.c.RGBA,n.c.RGBA,n.c.UNSIGNED_BYTE,t[s]),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_S,this.wrapS),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_T,this.wrapT),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MAG_FILTER,this.magFilter),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MIN_FILTER,this.minFilter);else{let e=0;for(let r=0;r<6;r++)e=r*o,n.c.pixelStorei(n.c.UNPACK_FLIP_Y_WEBGL,!1),t[e].shape?window.useWebgl2?n.c.texImage2D(a[r],0,n.c.RGBA16F,t[e].shape[0],t[e].shape[1],0,n.c.RGBA,n.c.FLOAT,t[e].data):n.c.texImage2D(a[r],0,n.c.RGBA,t[e].shape[0],t[e].shape[1],0,n.c.RGBA,n.c.FLOAT,t[e].data):n.c.texImage2D(a[r],0,n.c.RGBA,n.c.RGBA,n.c.UNSIGNED_BYTE,t[e]),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_S,this.wrapS),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_T,this.wrapT),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MAG_FILTER,this.magFilter),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MIN_FILTER,this.minFilter);n.c.generateMipmap(n.c.TEXTURE_CUBE_MAP)}n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,null)}bind(t=0){n.c.activeTexture(n.c.TEXTURE0+t),n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,this.texture),this._bindIndex=t}unbind(){n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,null)}}o.parseDDS=function(t){const e=a()(t),{flags:r}=e,n=new Int32Array(t,0,31);let i=1;131072&r&&(i=Math.max(1,n[7]));const s=e.images.map(e=>{return{data:new Float32Array(t.slice(e.offset,e.offset+e.length)),shape:e.shape,mipmapCount:i}});return new o(s)},e.a=o},14:function(t,e,r){"use strict";var n=r(0);function i(t){return 0!==t&&!(t&t-1)}var a=function(t,e,r,a){if(!t.minFilter){let e=n.c.LINEAR;r&&r&&i(r)&&i(a)&&(e=n.c.LINEAR_MIPMAP_NEAREST),t.minFilter=e}return t.mipmap=t.mipmap||!0,t.magFilter=t.magFilter||n.c.LINEAR,t.wrapS=t.wrapS||n.c.CLAMP_TO_EDGE,t.wrapT=t.wrapT||n.c.CLAMP_TO_EDGE,t.internalFormat=t.internalFormat||n.c.RGBA,t.format=t.format||n.c.RGBA,t.premultiplyAlpha=t.premultiplyAlpha||!1,t.level=t.level||0,t.anisotropy=t.anisotropy||0,t},o=r(20),s=r.n(o);const u=60;var c=new class{constructor(){this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._startTime=(new Date).getTime(),this._deltaTime=0,this._internalTime=0,this._isPaused=!1,this._loop()}addEF(t,e){e=e||[];const r=this._idTable;return this._enterframeTasks[r]={func:t,params:e},this._idTable++,r}removeEF(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1}delay(t,e,r){const n={func:t,params:e,delay:r,time:(new Date).getTime()};this._delayTasks.push(n)}defer(t,e){const r={func:t,params:e};this._deferTasks.push(r)}next(t,e){const r={func:t,params:e};this._nextTasks.push(r)}usurp(t,e){const r={func:t,params:e};this._usurpTask.push(r)}pause(){this._isPaused=!0}advance(){this._internalTime+=1/u}resume(){this._isPaused=!1}_process(){let t,e,r,n=0;for(n=0;n<this._enterframeTasks.length;n++)null!==(t=this._enterframeTasks[n])&&void 0!==t&&t.func(t.params);for(;this._highTasks.length>0;)(t=this._highTasks.pop()).func(t.params);let i=(new Date).getTime(),a=this._deltaTime;for(this._deltaTime=(i-this._startTime)/1e3,n=0;n<this._delayTasks.length;n++)i-(t=this._delayTasks[n]).time>t.delay&&(t.func(t.params),this._delayTasks.splice(n,1));for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/u;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),!((r=(new Date).getTime())-i<e)){this._deferTasks.unshift(t);break}t.func(t.params)}for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/u;this._usurpTask.length>0;)t=this._usurpTask.shift(),(r=(new Date).getTime())-i<e&&t.func(t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[],this._isPaused||(this._internalTime+=this._deltaTime-a)}_loop(){this._process(),window.requestAnimationFrame(()=>this._loop())}get intervalTime(){return this._internalTime}get deltaTime(){return this._deltaTime}};class l{constructor(t,e={},r=0,i=0){this._source=t,this._getDimension(t,r,i),this._sourceType=e.type||function(t){let e=n.c.UNSIGNED_BYTE;t instanceof Array?e=n.c.UNSIGNED_BYTE:t instanceof Uint8Array?e=n.c.UNSIGNED_BYTE:t instanceof Float32Array?e=n.c.FLOAT:t instanceof HTMLImageElement?e="image":t instanceof HTMLCanvasElement?e="canvas":t instanceof HTMLVideoElement&&(e="video");return e}(t),this._checkSource(),this._texelType=this._getTexelType(),this._isTextureReady=!0,this._params=a(e,t,this._width,this._height),this._checkMipmap(),this._checkWrapping(),this._texture=n.c.createTexture(),"video"===this._sourceType?(this._isTextureReady=!1,c.addEF(()=>this._loop())):this._uploadTexture()}_loop(){4==this._source.readyState&&(this._isTextureReady=!0,this._uploadTexture())}_uploadTexture(){if(n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.pixelStorei(n.c.UNPACK_FLIP_Y_WEBGL,!1),this._isSourceHtmlElement()?n.c.texImage2D(n.c.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._texelType,this._source):n.c.texImage2D(n.c.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._texelType,this._source),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MAG_FILTER,this._params.magFilter),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MIN_FILTER,this._params.minFilter),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_S,this._params.wrapS),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_T,this._params.wrapT),n.c.pixelStorei(n.c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._params.premultiplyAlpha),this._params.anisotropy>0){const t=n.c.getExtension("EXT_texture_filter_anisotropic");if(t){const e=n.c.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT),r=Math.min(e,this._params.anisotropy);n.c.texParameterf(n.c.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,r)}}this._generateMipmap&&n.c.generateMipmap(n.c.TEXTURE_2D),n.c.bindTexture(n.c.TEXTURE_2D,null)}bind(t){void 0===t&&(t=0),n.c.activeTexture(n.c.TEXTURE0+t),this._isTextureReady?n.c.bindTexture(n.c.TEXTURE_2D,this._texture):n.c.bindTexture(n.c.TEXTURE_2D,l.blackTexture().texture),this._bindIndex=t}updateTexture(t){this._source=t,this._checkSource(),this._uploadTexture()}generateMipmap(){this._generateMipmap&&(n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.generateMipmap(n.c.TEXTURE_2D),n.c.bindTexture(n.c.TEXTURE_2D,null))}showParameters(){console.log("Source type : ",s.a[this._sourceType]||this._sourceType),console.log("Texel type:",s.a[this.texelType]),console.log("Dimension :",this._width,this._height);for(const t in this._params)console.log(t,s.a[this._params[t]]||this._params[t]);console.log("Mipmapping :",this._generateMipmap)}_getDimension(t,e,r){t?(this._width=t.width||t.videoWidth,this._height=t.height||t.videoWidth,this._width=this._width||e,this._height=this._height||r,this._width&&this._height||(this._width=this._height=Math.sqrt(t.length/4))):(this._width=e,this._height=r)}_checkSource(){this._source&&(this._sourceType===n.c.UNSIGNED_BYTE?this._source instanceof Uint8Array||(this._source=new Uint8Array(this._source)):this._sourceType===n.c.FLOAT&&(this._source instanceof Float32Array||(this._source=new Float32Array(this._source))))}_getTexelType(){return this._isSourceHtmlElement()?n.c.UNSIGNED_BYTE:n.c[s.a[this._sourceType]]||this._sourceType}_checkMipmap(){this._generateMipmap=this._params.mipmap,f(this._width)&&f(this._height)||(this._generateMipmap=!1),-1==s.a[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}_checkWrapping(){this._generateMipmap||(this._params.wrapS=n.c.CLAMP_TO_EDGE,this._params.wrapT=n.c.CLAMP_TO_EDGE)}_isSourceHtmlElement(){return"image"===this._sourceType||"video"===this._sourceType||"canvas"===this._sourceType}get minFilter(){return this._params.minFilter}set minFilter(t){this._params.minFilter=t,this._checkMipmap(),n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MIN_FILTER,this._params.minFilter),n.c.bindTexture(n.c.TEXTURE_2D,null),this.generateMipmap()}get magFilter(){return this._params.minFilter}set magFilter(t){this._params.magFilter=t,n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MAG_FILTER,this._params.magFilter),n.c.bindTexture(n.c.TEXTURE_2D,null)}get wrapS(){return this._params.wrapS}set wrapS(t){this._params.wrapS=t,this._checkWrapping(),n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_S,this._params.wrapS),n.c.bindTexture(n.c.TEXTURE_2D,null)}get wrapT(){return this._params.wrapT}set wrapT(t){this._params.wrapT=t,this._checkWrapping(),n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_T,this._params.wrapT),n.c.bindTexture(n.c.TEXTURE_2D,null)}get texelType(){return this._texelType}get width(){return this._width}get height(){return this._height}get texture(){return this._texture}get isTextureReady(){return this._isTextureReady}}function f(t){return 0!==t&&!(t&t-1)}let d,h,_;l.whiteTexture=function(){if(void 0===d){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,2,2),d=new l(t)}return d},l.greyTexture=function(){if(void 0===h){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,2,2),h=new l(t)}return h},l.blackTexture=function(){if(void 0===_){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,2,2),_=new l(t)}return _};e.a=l},140:function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,o,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in r=Object(arguments[u]))i.call(r,c)&&(s[c]=r[c]);if(n){o=n(r);for(var l=0;l<o.length;l++)a.call(r,o[l])&&(s[o[l]]=r[o[l]])}}return s}},141:function(t,e){var r=542327876,n=131072,i=4,a=R("DXT1"),o=R("DXT3"),s=R("DXT5"),u=R("DX10"),c=116,l=512,f=3,d=2,h=31,_=0,p=1,E=2,m=3,T=4,b=7,M=20,g=21,A=28;function R(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}t.exports=function(t){var e,R,y=new Int32Array(t,0,h);if(y[_]!==r)throw new Error("Invalid magic number in DDS header");if(!y[M]&i)throw new Error("Unsupported format, must contain a FourCC code");var x=y[g];switch(x){case a:e=8,R="dxt1";break;case o:e=16,R="dxt3";break;case s:e=16,R="dxt5";break;case c:R="rgba32f";break;case u:var w=new Uint32Array(t.slice(128,148));R=w[0];var v=w[1];w[2],w[3],w[4];if(v!==f||R!==d)throw new Error("Unsupported DX10 texture format "+R);R="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}(x))}var I=y[E],O=1;I&n&&(O=Math.max(1,y[b]));var N=!1;y[A]&l&&(N=!0);var U,S=y[T],P=y[m],L=y[p]+4,F=S,C=P,D=[];x===u&&(L+=20);if(N)for(var B=0;B<6;B++){if("rgba32f"!==R)throw new Error("Only RGBA32f cubemaps are supported");S=F,P=C;for(var X=Math.log(S)/Math.log(2)+1,j=0;j<X;j++)U=S*P*16,D.push({offset:L,length:U,shape:[S,P]}),j<O&&(L+=U),S=Math.floor(S/2),P=Math.floor(P/2)}else for(var j=0;j<O;j++)U=Math.max(4,S)/4*Math.max(4,P)/4*e,D.push({offset:L,length:U,shape:[S,P]}),L+=U,S=Math.floor(S/2),P=Math.floor(P/2);return{shape:[F,C],images:D,format:R,flags:I,cubemap:N}}},151:function(t,e,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(152),i)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},152:function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=M;var f="suspendedStart",d="suspendedYield",h="executing",_="completed",p={},E={};E[o]=function(){return this};var m=Object.getPrototypeOf,T=m&&m(m(U([])));T&&T!==n&&i.call(T,o)&&(E=T);var b=y.prototype=A.prototype=Object.create(E);R.prototype=b.constructor=y,y.constructor=R,y[u]=R.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===R||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},l.awrap=function(t){return{__await:t}},x(w.prototype),w.prototype[s]=function(){return this},l.AsyncIterator=w,l.async=function(t,e,r,n){var i=new w(M(t,e,r,n));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(b),b[u]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=U,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:U(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}}}function M(t,e,r,n){var i=e&&e.prototype instanceof A?e:A,a=Object.create(i.prototype),o=new N(n||[]);return a._invoke=function(t,e,r){var n=f;return function(i,a){if(n===h)throw new Error("Generator is already running");if(n===_){if("throw"===i)throw a;return S()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=v(o,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=g(t,e,r);if("normal"===u.type){if(n=r.done?_:d,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=_,r.method="throw",r.arg=u.arg)}}}(t,r,o),a}function g(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function A(){}function R(){}function y(){}function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function w(t){var e;this._invoke=function(r,n){function a(){return new Promise(function(e,a){!function e(r,n,a,o){var s=g(t[r],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(c).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,o)})}o(s.arg)}(r,n,e,a)})}return e=e?e.then(a,a):a()}}function v(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,v(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=g(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function U(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},153:function(t,e,r){const n=r(154),i=r(157),a=r(167);t.exports=[{key:"json",match:/\.json$/i,load:i("json")},{key:"text",match:/\.txt$/i,load:i("text")},{key:"image",match:/\.(jpg|jpeg|svg|png|gif|webp|bmp|tga|tif|apng|wbpm|ico)$/i,load:a},n("audio",function(){return new window.Audio}),n("video",function(){return document.createElement("video")}),{key:"binary",match:/\.bin$/i,load:i("binary")},{key:"blob",load:i("blob")}]},154:function(t,e,r){var n=r(155);t.exports=function(t,e){return{key:t,match:function(e){return function(t){var e=n(t);return e?0===e.indexOf("audio")?"audio":0===e.indexOf("video")?"video":null:null}(e)===t},load:function(r){return new Promise(function(n,i){var a=!1,o=e(),s=function(){a||(a=!0,n(o))},u=(r.event||"canplay").toLowerCase();if("loadedmetadata"===u?o.onloadedmetadata=s:"canplaythrough"===u?o.oncanplaythrough=s:"loadeddata"===u?o.onloadeddata=s:o.oncanplay=s,o.onerror=function(e){a||(a=!0,i(new Error("Error while loading "+t+" at "+r.url)))},r.crossOrigin&&(o.crossOrigin=r.crossOrigin),void 0!==r.volume&&(o.volume=r.volume),void 0!==r.preload&&(o.preload=r.volume),void 0!==r.playbackRate&&(o.playbackRate=r.volume),void 0!==r.muted&&(o.muted=r.volume),void 0!==r.currentTime&&(o.currentTime=r.volume),void 0!==r.controls&&(o.controls=r.volume),void 0!==r.autoPlay&&(o.autoPlay=r.volume),o.src=r.url,o.readyState>=o.HAVE_ENOUGH_DATA)return a=!0,n(o);o.load()})}}}},155:function(t,e,r){var n=r(156),i={};Object.keys(n).forEach(function(t){n[t].forEach(function(e){i[e]=t})}),t.exports=function(t){if(!t)throw new TypeError("must specify extension string");return 0===t.indexOf(".")&&(t=t.substring(1)),i[t.toLowerCase()]}},156:function(t){t.exports={"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a","m4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/webm":["weba"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/wav":["wav"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"]}},157:function(t,e,r){var n=r(158),i=r(140);t.exports=function(t){return function(e){return("fetch"in window?window.fetch(e.url,e).then(function(e){if(/404/.test(e.status))throw new Error("Resource not found");if(!/^2/.test(e.status))throw new Error("Unexpected HTTP Status Code: "+e.status);if(!e.ok)throw new Error("Response not OK");return"json"===t?e.json():"binary"===t?e.arrayBuffer():"blob"===t?e.blob():e.text()}):function(t,e){return new Promise(function(r,a){var o="text";"json"===t?o="text":"binary"===t?o="arraybuffer":"blob"===t&&(o="blob"),e=i({},e,{json:!1,responseType:o}),n(e,function(e,n,i){if(e)return a(e);if(/404/.test(n.statusCode))throw new Error("Resource not found");if(!/^2/.test(n.statusCode))return a(new Error("Unexpected HTTP Status Code: "+n.statusCode));if("json"===t)try{i=JSON.parse(i)}catch(e){return a(e)}r(i)})})}(t,e)).catch(function(t){throw new Error(t.message+" while loading file "+e.url)})}}},158:function(t,e,r){"use strict";var n=r(159),i=r(161),a=r(162),o=r(166);function s(t,e,r){var n=t;return i(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=o(e,{uri:t}),n.callback=r,n}function u(t,e,r){return c(e=s(t,e,r))}function c(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,r=function(r,n,i){e||(e=!0,t.callback(r,n,i))};function n(t){return clearTimeout(l),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,r(t,m)}function i(){if(!s){var e;clearTimeout(l),e=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var n=m,i=null;return 0!==e?(n={body:function(){var t=void 0;if(t=c.response?c.response:c.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(c),E)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:d,headers:{},url:f,rawRequest:c},c.getAllResponseHeaders&&(n.headers=a(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),r(i,n,n.body)}}var o,s,c=t.xhr||null;c||(c=t.cors||t.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var l,f=c.url=t.uri||t.url,d=c.method=t.method||"GET",h=t.body||t.data,_=c.headers=t.headers||{},p=!!t.sync,E=!1,m={body:void 0,headers:{},statusCode:0,method:d,url:f,rawRequest:c};if("json"in t&&!1!==t.json&&(E=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),h=JSON.stringify(!0===t.json?h:t.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(i,0)},c.onload=i,c.onerror=n,c.onprogress=function(){},c.onabort=function(){s=!0},c.ontimeout=n,c.open(d,f,!p,t.username,t.password),p||(c.withCredentials=!!t.withCredentials),!p&&t.timeout>0&&(l=setTimeout(function(){if(!s){s=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)}},t.timeout)),c.setRequestHeader)for(o in _)_.hasOwnProperty(o)&&c.setRequestHeader(o,_[o]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(c),c.send(h||null),c}t.exports=u,t.exports.default=u,u.XMLHttpRequest=n.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:n.XDomainRequest,function(t,e){for(var r=0;r<t.length;r++)e(t[r])}(["get","put","post","patch","head","delete"],function(t){u["delete"===t?"del":t]=function(e,r,n){return(r=s(e,r,n)).method=t.toUpperCase(),c(r)}})},159:function(t,e,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,r(160))},160:function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},161:function(t,e){t.exports=function(t){var e=r.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var r=Object.prototype.toString},162:function(t,e,r){var n=r(163),i=r(164);t.exports=function(t){if(!t)return{};var e={};return i(n(t).split("\n"),function(t){var r=t.indexOf(":"),i=n(t.slice(0,r)).toLowerCase(),a=n(t.slice(r+1));void 0===e[i]?e[i]=a:!function(t){return"[object Array]"===Object.prototype.toString.call(t)}(e[i])?e[i]=[e[i],a]:e[i].push(a)}),e}},163:function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},164:function(t,e,r){"use strict";var n=r(165),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){if(!n(e))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===i.call(t)?function(t,e,r){for(var n=0,i=t.length;n<i;n++)a.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,o):"string"==typeof t?function(t,e,r){for(var n=0,i=t.length;n<i;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,o):function(t,e,r){for(var n in t)a.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,o)}},165:function(t,e,r){"use strict";var n=Function.prototype.toString,i=/^\s*class\b/,a=function(t){try{var e=n.call(t);return i.test(e)}catch(t){return!1}},o=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(s)return function(t){try{return!a(t)&&(n.call(t),!0)}catch(t){return!1}}(t);if(a(t))return!1;var e=o.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},166:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},167:function(t,e){t.exports=function(t){return new Promise(function(e,r){var n=!1,i=new window.Image;i.onload=function(){n||(n=!0,e(i))},i.onerror=function(){n||(n=!0,r(new Error("Error while loading image at "+t.url)))},t.crossOrigin&&(i.crossOrigin=t.crossOrigin),i.src=t.url})}},168:function(t,e){t.exports=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}},18:function(t,e,r){"use strict";var n=r(3);class i{load(t,e,r=4){this._drawType=r,super.load(t,e)}_onLoaded(){this.parseObj(this._req.response)}parseObj(t){const e=t.split("\n"),r=[],n=[],i=[],a=[],o=[],s=[],u=[];let c,l=0;const f=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,d=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,h=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,_=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,p=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,E=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,m=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function T(t){const e=parseInt(t);return 3*(e>=0?e-1:e+a.length/3)}function b(t){const e=parseInt(t);return 3*(e>=0?e-1:e+o.length/3)}function M(t){const e=parseInt(t);return 2*(e>=0?e-1:e+s.length/2)}function g(t,e,n){r.push([a[t],a[t+1],a[t+2]]),r.push([a[e],a[e+1],a[e+2]]),r.push([a[n],a[n+1],a[n+2]]),u.push(3*l+0),u.push(3*l+1),u.push(3*l+2),l++}function A(t,e,r){n.push([s[t],s[t+1]]),n.push([s[e],s[e+1]]),n.push([s[r],s[r+1]])}function R(t,e,r){i.push([o[t],o[t+1],o[t+2]]),i.push([o[e],o[e+1],o[e+2]]),i.push([o[r],o[r+1],o[r+2]])}function y(t,e,r,n,i,a,o,s,u,c,l,f){let d,h=T(t),_=T(e),p=T(r);void 0===n?g(h,_,p):(g(h,_,d=T(n)),g(_,p,d)),void 0!==i&&(h=M(i),_=M(a),p=M(o),void 0===n?A(h,_,p):(A(h,_,d=M(s)),A(_,p,d))),void 0!==u&&(h=b(u),_=b(c),p=b(l),void 0===n?R(h,_,p):(R(h,_,d=b(f)),R(_,p,d)))}for(let t=0;t<e.length;t++){let r=e[t];0!==(r=r.trim()).length&&"#"!==r.charAt(0)&&(null!==(c=f.exec(r))?a.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])):null!==(c=d.exec(r))?o.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])):null!==(c=h.exec(r))?s.push(parseFloat(c[1]),parseFloat(c[2])):null!==(c=_.exec(r))?y(c[1],c[2],c[3],c[4]):null!==(c=p.exec(r))?y(c[2],c[5],c[8],c[11],c[3],c[6],c[9],c[12]):null!==(c=E.exec(r))?y(c[2],c[6],c[10],c[14],c[3],c[7],c[11],c[15],c[4],c[8],c[12],c[16]):null!==(c=m.exec(r))&&y(c[2],c[5],c[8],c[11],void 0,void 0,void 0,void 0,c[3],c[6],c[9],c[12]))}return this._generateMeshes({positions:r,coords:n,normals:i,indices:u})}_generateMeshes(t){const e=t.normals.length>0,r=t.coords.length>0;let i;if(console.log("vertices length:"+t.positions.length),t.positions.length>65535){const a=[];let o=0;const s={};for(s.positions=t.positions.concat(),s.coords=t.coords.concat(),s.indices=t.indices.concat(),s.normals=t.normals.concat();t.indices.length>0;){const u=Math.min(65535,t.positions.length),c=t.indices.splice(0,u),l=[],f=[],d=[];let h,_=0;for(let t=0;t<c.length;t++)c[t]>_&&(_=c[t]),h=c[t],l.push(s.positions[h]),r&&f.push(s.coords[h]),e&&d.push(s.normals[h]),c[t]-=o;o=_+1,(i=new n.a(this._drawType)).bufferVertex(l),r&&i.bufferTexCoord(f),i.bufferIndex(c),e&&i.bufferNormal(d),a.push(i)}return this._callback&&this._callback(a,s),a}return(i=new n.a(this._drawType)).bufferVertex(t.positions),r&&i.bufferTexCoord(t.coords),i.bufferIndex(t.indices),e&&i.bufferNormal(t.normals),this._callback&&this._callback(i,t),i}}i.parse=function(t){return(new i).parseObj(t)},e.a=i},19:function(t,e,r){"use strict";var n=r(1);e.a=class{constructor(){this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._position=n.e.create(),this._scale=n.e.fromValues(1,1,1),this._rotation=n.e.create(),this._matrix=n.b.create(),this._matrixParent=n.b.create(),this._matrixRotation=n.b.create(),this._matrixScale=n.b.create(),this._matrixTranslation=n.b.create(),this._matrixQuaternion=n.b.create(),this._quat=n.c.create(),this._children=[]}updateMatrix(){this._needUpdate&&(n.e.set(this._scale,this._sx,this._sy,this._sz),n.e.set(this._rotation,this._rx,this._ry,this._rz),n.e.set(this._position,this._x,this._y,this._z),n.b.identity(this._matrixTranslation,this._matrixTranslation),n.b.identity(this._matrixScale,this._matrixScale),n.b.identity(this._matrixRotation,this._matrixRotation),n.b.rotateX(this._matrixRotation,this._matrixRotation,this._rx),n.b.rotateY(this._matrixRotation,this._matrixRotation,this._ry),n.b.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),n.b.fromQuat(this._matrixQuaternion,this._quat),n.b.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),n.b.scale(this._matrixScale,this._matrixScale,this._scale),n.b.translate(this._matrixTranslation,this._matrixTranslation,this._position),n.b.mul(this._matrix,this._matrixTranslation,this._matrixRotation),n.b.mul(this._matrix,this._matrix,this._matrixScale),n.b.mul(this._matrix,this._matrixParent,this._matrix),this._children.forEach(t=>{t.updateParentMatrix(this._matrix)}),this._needUpdate=!1)}updateParentMatrix(t){t=t||n.b.create(),n.b.copy(this._matrixParent,t),this._needUpdate=!0}setRotationFromQuaternion(t){n.c.copy(this._quat,t),this._needUpdate=!0}addChild(t){this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);-1!=e?this._children.splice(e,1):console.warn("Child no exist")}get matrix(){return this.updateMatrix(),this._matrix}get x(){return this._x}set x(t){this._needUpdate=!0,this._x=t}get y(){return this._y}set y(t){this._needUpdate=!0,this._y=t}get z(){return this._z}set z(t){this._needUpdate=!0,this._z=t}get scaleX(){return this._sx}set scaleX(t){this._needUpdate=!0,this._sx=t}get scaleY(){return this._sy}set scaleY(t){this._needUpdate=!0,this._sy=t}get scaleZ(){return this._sz}set scaleZ(t){this._needUpdate=!0,this._sz=t}get rotationX(){return this._rx}set rotationX(t){this._needUpdate=!0,this._rx=t}get rotationY(){return this._ry}set rotationY(t){this._needUpdate=!0,this._ry=t}get rotationZ(){return this._rz}set rotationZ(t){this._needUpdate=!0,this._rz=t}get children(){return this._children}}},2:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",function(){return n})},20:function(t,e){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34842:"RGBA16F",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},27:function(t,e,r){"use strict";r.r(e);var n=r(7);const i={cubeDiffuse:"./assets/cubeDiffuse.png",cubeSpecular:"./assets/cubeSpecular.png",cubeEmission:"./assets/cubeEmission.jpg"},a={goldAlbedo:"./assets/pbr/gold/albedo.png",goldMetallic:"./assets/pbr/gold/metallic.png",goldAo:"./assets/pbr/gold/ao.png",goldNormal:"./assets/pbr/gold/normal.png",goldRoughness:"./assets/pbr/gold/roughness.png",grassAlbedo:"./assets/pbr/grass/albedo.png",grassMetallic:"./assets/pbr/grass/metallic.png",grassAo:"./assets/pbr/grass/ao.png",grassNormal:"./assets/pbr/grass/normal.png",grassRoughness:"./assets/pbr/grass/roughness.png",plasticAlbedo:"./assets/pbr/plastic/albedo.png",plasticMetallic:"./assets/pbr/plastic/metallic.png",plasticAo:"./assets/pbr/plastic/ao.png",plasticNormal:"./assets/pbr/plastic/normal.png",plasticRoughness:"./assets/pbr/plastic/roughness.png",wallAlbedo:"./assets/pbr/wall/albedo.png",wallMetallic:"./assets/pbr/wall/metallic.png",wallAo:"./assets/pbr/wall/ao.png",wallNormal:"./assets/pbr/wall/normal.png",wallRoughness:"./assets/pbr/wall/roughness.png",rusted_ironAlbedo:"./assets/pbr/rusted_iron/albedo.png",rusted_ironMetallic:"./assets/pbr/rusted_iron/metallic.png",rusted_ironAo:"./assets/pbr/rusted_iron/ao.png",rusted_ironNormal:"./assets/pbr/rusted_iron/normal.png",rusted_ironRoughness:"./assets/pbr/rusted_iron/roughness.png",woodAlbedo:"./assets/pbr/wood/albedo.png",woodMetallic:"./assets/pbr/wood/metallic.png",woodAo:"./assets/pbr/wood/ao.png",woodNormal:"./assets/pbr/wood/normal.png",woodRoughness:"./assets/pbr/wood/roughness.png"},o={equirectangular:{url:"./assets/hdr/newport_loft.hdr",type:"binary"}},s={irradiancePosX:{url:"./assets/pbrflow/output_iem_posx.hdr",type:"binary"},irradiancePosY:{url:"./assets/pbrflow/output_iem_posy.hdr",type:"binary"},irradiancePosZ:{url:"./assets/pbrflow/output_iem_posz.hdr",type:"binary"},irradianceNegX:{url:"./assets/pbrflow/output_iem_negx.hdr",type:"binary"},irradianceNegY:{url:"./assets/pbrflow/output_iem_negy.hdr",type:"binary"},irradianceNegZ:{url:"./assets/pbrflow/output_iem_negz.hdr",type:"binary"},radiance:{url:"./assets/pbrflow/output_radiance.dds",type:"binary"}},u={orb:{url:"./assets/models/lte_orb/testObj.obj",type:"text"}},c={nanosuit:{url:"./assets/models/nanosuit/nanosuit.obj",type:"text"},nanosuitMTL:{url:"./assets/models/nanosuit/nanosuit.mtl",type:"text"}},l={brickwall:{url:"./assets/brickwall.jpg"},brickwallNormal:{url:"./assets/brickwall_normal.jpg"}},f={outputskyboxPosX:{url:"./assets/skybox/output_skybox_posx.hdr",type:"binary"},outputskyboxPosY:{url:"./assets/skybox/output_skybox_posy.hdr",type:"binary"},outputskyboxPosZ:{url:"./assets/skybox/output_skybox_posz.hdr",type:"binary"},outputskyboxNegX:{url:"./assets/skybox/output_skybox_negx.hdr",type:"binary"},outputskyboxNegY:{url:"./assets/skybox/output_skybox_negy.hdr",type:"binary"},outputskyboxNegZ:{url:"./assets/skybox/output_skybox_negz.hdr",type:"binary"}},d={venus:{url:"./assets/models/venus.obj",type:"text"}},h={statue:{url:"./assets/models/statue.obj",type:"text"}},_={albedo:{url:"assets/img/albedo.jpg",type:"image"},ao:{url:"assets/img/ao.jpg",type:"image"},brdfLUT:{url:"assets/img/brdfLUT.png",type:"image"},metalGloss:{url:"assets/img/metalGloss.jpg",type:"image"},normal:{url:"assets/img/normal.jpg",type:"image"},pisa_irradiance:{url:"assets/img/pisa_irradiance.dds",type:"binary"},pisa_radiance:{url:"assets/img/pisa_radiance.dds",type:"binary"},studio10_irradiance:{url:"assets/img/studio10_irradiance.dds",type:"binary"},studio10_radiance:{url:"assets/img/studio10_radiance.dds",type:"binary"},studio11_irradiance:{url:"assets/img/studio11_irradiance.dds",type:"binary"},studio11_radiance:{url:"assets/img/studio11_radiance.dds",type:"binary"},studio12_irradiance:{url:"assets/img/studio12_irradiance.dds",type:"binary"},studio12_radiance:{url:"assets/img/studio12_radiance.dds",type:"binary"},studio1_irradiance:{url:"assets/img/studio1_irradiance.dds",type:"binary"},studio1_radiance:{url:"assets/img/studio1_radiance.dds",type:"binary"},studio2_irradiance:{url:"assets/img/studio2_irradiance.dds",type:"binary"},studio2_radiance:{url:"assets/img/studio2_radiance.dds",type:"binary"},studio3_irradiance:{url:"assets/img/studio3_irradiance.dds",type:"binary"},studio3_radiance:{url:"assets/img/studio3_radiance.dds",type:"binary"},studio4_irradiance:{url:"assets/img/studio4_irradiance.dds",type:"binary"},studio4_radiance:{url:"assets/img/studio4_radiance.dds",type:"binary"},studio5_irradiance:{url:"assets/img/studio5_irradiance.dds",type:"binary"},studio5_radiance:{url:"assets/img/studio5_radiance.dds",type:"binary"},studio6_irradiance:{url:"assets/img/studio6_irradiance.dds",type:"binary"},studio6_radiance:{url:"assets/img/studio6_radiance.dds",type:"binary"},studio7_irradiance:{url:"assets/img/studio7_irradiance.dds",type:"binary"},studio7_radiance:{url:"assets/img/studio7_radiance.dds",type:"binary"},studio8_irradiance:{url:"assets/img/studio8_irradiance.dds",type:"binary"},studio8_radiance:{url:"assets/img/studio8_radiance.dds",type:"binary"},studio9_irradiance:{url:"assets/img/studio9_irradiance.dds",type:"binary"},studio9_radiance:{url:"assets/img/studio9_radiance.dds",type:"binary"},vatican_irradiance:{url:"assets/img/vatican_irradiance.dds",type:"binary"},vatican_radiance:{url:"assets/img/vatican_radiance.dds",type:"binary"}},p={reflection:Object(n.a)({},h,d),lightcaster:Object(n.a)({},i),normalmap:Object(n.a)({},l),pbr:Object(n.a)({},a),pbrflow:Object(n.a)({},o,s,a),pbrmodel:Object(n.a)({},o,s,u),ibldiffuse:Object(n.a)({},o),iblfinal:Object(n.a)({},o),deferredshading:Object(n.a)({},c),ssao:Object(n.a)({},c),envMap:Object(n.a)({},f,d,c,h),gltf:Object(n.a)({},f,_),bloom:Object(n.a)({},h)};e.default=p},3:function(t,e,r){"use strict";var n=r(2),i=function(t,e,r){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[r]&&(e.cacheAttribLoc[r]=t.getAttribLocation(e,r)),e.cacheAttribLoc[r]},a=r(0),o=r(14),s=r(19),u=r(1);r.d(e,"a",function(){return h});const c=35044,l=(t,e)=>t.join(",")===e.join(","),f=function(t){let e;return void 0!==t.buffer?e=t.buffer:(e=a.c.createBuffer(),t.buffer=e),e},d=function(t,e){const r=[];for(let n=0;n<t.length;n+=e){const i=[];for(let r=0;r<e;r++)i.push(t[n+r]);r.push(i)}return r};class h extends s.a{constructor(t=4,e,r){super(),Object(n.a)(this,"iBuffer",null),Object(n.a)(this,"_useVao",!1),Object(n.a)(this,"_hasVao",!1),Object(n.a)(this,"_isInstanced",!1),Object(n.a)(this,"_bufferChanged",[]),Object(n.a)(this,"_attributes",[]),Object(n.a)(this,"_numInstance",-1),Object(n.a)(this,"_enabledVertexAttribute",[]),Object(n.a)(this,"_indices",[]),Object(n.a)(this,"_faces",[]),Object(n.a)(this,"_bufferChanged",[]),Object(n.a)(this,"name",""),Object(n.a)(this,"material",null),Object(n.a)(this,"textures",{}),this._extVAO=!!a.c.createVertexArray,this._useVAO=!!this._extVAO,this.drawType=t,this.name=e,r&&(this.material=r,this._setMaterial())}bufferVertex(t){this.bufferData(t,"position",3)}bufferNormal(t){this.bufferData(t,"normal",3)}bufferTexCoord(t){this.bufferData(t,"texCoord",2)}bufferColor(t){this.bufferData(t,"color",4)}bufferFlattenData(t,e,r,n=c,i=!1){const a=d(t,r);return this.bufferData(a,e,r,c,!1),this}bufferData(t,e,r,n=c,i=!1){const a=n;let o=[];o=t.flat(1);const s=new Float32Array(o),u=this.getAttribute(e);return u?(u.itemSize=r,u.dataArray=s,u.source=t):this._attributes.push({name:e,source:t,itemSize:r,drawType:a,dataArray:s,isInstanced:i}),this._bufferChanged.push(e),this}bufferIndex(t,e=!1){return this._drawType=e?a.c.DYNAMIC_DRAW:a.c.STATIC_DRAW,t instanceof Array?this._indices=new Uint16Array(t):this._indices=t,this._numItems=this._indices.length,this}bind(){let t=a.a.shaderProgram;if(t||console.error("no current program used"),this.generateBuffers(t),this.hasVAO?a.c.bindVertexArray(this.vao):(this.attributes.forEach(t=>{a.c.bindBuffer(a.c.ARRAY_BUFFER,t.buffer);const e=t.attrPosition;a.c.vertexAttribPointer(e,t.itemSize,a.c.FLOAT,!1,0,0),t.isInstanced&&a.c.vertexAttribDivisor(e,1)}),a.c.bindBuffer(a.c.ELEMENT_ARRAY_BUFFER,this.iBuffer)),this.textures){let t=1,e=1,r=1,n=1,i=0;for(let o in this.textures){a.c.activeTexture(a.c.TEXTURE0+i);let s="";"diffuseMap"===o?s=t+++"":"specularMap"===o?s=e+++"":"normalMap"===o?s=r+++"":"heightMap"!==o&&"bumpMap"!==o||(s=n+++"");let u={};u[o+s]=i,mProgram.style(u),a.c.bindTexture(a.c.TEXTURE_2D,this.textures[o]),i++}}}generateBuffers(t){0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=a.c.createVertexArray()),a.c.bindVertexArray(this._vao),this._attributes.forEach(e=>{if(-1!==this._bufferChanged.indexOf(e.name)){const r=f(e);a.c.bindBuffer(a.c.ARRAY_BUFFER,r),a.c.bufferData(a.c.ARRAY_BUFFER,e.dataArray,e.drawType);const n=i(a.c,t,e.name);if(n<0)return;a.c.enableVertexAttribArray(n),a.c.vertexAttribPointer(n,e.itemSize,a.c.FLOAT,!1,0,0),e.attrPosition=n,e.isInstanced&&a.c.vertexAttribDivisor(n,1)}}),this._updateIndexBuffer(),a.c.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(e=>{if(-1!==this._bufferChanged.indexOf(e.name)){const r=f(e);a.c.bindBuffer(a.c.ARRAY_BUFFER,r),a.c.bufferData(a.c.ARRAY_BUFFER,e.dataArray,e.drawType);const n=i(a.c,t,e.name);a.c.enableVertexAttribArray(n),a.c.vertexAttribPointer(n,e.itemSize,a.c.FLOAT,!1,0,0),e.attrPosition=n,e.isInstanced&&a.c.vertexAttribDivisor(n,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}unbind(){this._useVAO&&a.c.bindVertexArray(null),this._attributes.forEach(t=>{t.isInstanced&&a.c.vertexAttribDivisor(t.attrPosition,0)})}_updateIndexBuffer(){this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=a.c.createBuffer()),a.c.bindBuffer(a.c.ELEMENT_ARRAY_BUFFER,this.iBuffer),a.c.bufferData(a.c.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}computeNormals(t,e=!1){e?this.generateFaces(t):this._computeVertexNormals(t)}_computeFaceNormals(){let t,e;const r=[];for(let n=0;n<this._indices.length;n+=3){t=n/3;const i=(e=this._faces[t]).normal;r[e.indices[0]]=i,r[e.indices[1]]=i,r[e.indices[2]]=i}this.bufferNormal(r)}_computeVertexNormals(t){const e=u.e.create(),r=[],{vertices:n}=this;for(let i=0;i<n.length;i++){u.e.set(e,0,0,0);for(let r=0;r<n.length;r++)l(n[i],n[r])&&(e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2]);u.e.normalize(e,e),r.push([e[0],e[1],e[2]])}this.bufferNormal(r)}generateFaces(t){let e,r,n,i,a,o,s,c,l;const{vertices:f}=this;u.e.create(),u.e.create(),u.e.create();for(let u=0;u<this._indices.length;u+=3){const d={indices:[e=this._indices[u],r=this._indices[u+1],n=this._indices[u+2]],vertices:[i=f[e],a=f[r],o=f[n]],normals:[s=t[e],c=t[r],l=t[n]]};this._faces.push(d)}}getAttribute(t){return this._attributes.find(e=>e.name===t)}getSource(t){const e=this.getAttribute(t);return e?e.source:[]}_setMaterial(){for(let t in this.material)this.material[t].constructor===HTMLImageElement&&(this.material[t]=new o.a(this.material[t]).texture,this.textures[t]=this.material[t])}setMaterial(t){this.material=t}get positionBuffer(){let t=function(t,e,r){if(!t||!t.length)return-1;for(let n=0;n<t.length;n++)if(t[n][e]===r)return n;return-1}(this._buffers,"name","position");if(-1!==t)return this._buffers[t].buffer;console.warn("no vertex buffer set")}get vertices(){return this.getSource("position")}get normals(){return this.getSource("normal")}get coords(){return this.getSource("texCoord")}get indices(){return this._indices}get vertexSize(){return this.vertices.length}get faces(){return this._faces}get attributes(){return this._attributes}get hasVAO(){return this._hasVAO}get vao(){return this._vao}get numInstance(){return this._numInstance}get isInstanced(){return this._isInstanced}}},34:function(t,e,r){"use strict";r.r(e),r.d(e,"default",function(){return u});var n=r(14),i=r(12),a=r(9),o=r(18);const s=function(t){const e=t.split(".");return e[e.length-1]};function u(t,e){let r,u={},c={};for(let l in t){let f=t[l].url||t[l],d=e[l];switch(s(f)){case"jpg":case"png":r=new n.a(d),c[l]=r;break;case"hdr":let t=f.split("_")[0].split("/"),e=t[t.length-1]+(f.split("_").length>2?f.split("_")[1]:"");r=Object(a.a)(d),u[e]||(u[e]=[]),u[e].push(r),c[l]=r;break;case"dds":r=i.a.parseDDS(d),c[l]=r;break;case"obj":const h=o.a.parse(d);c[l]=h}}for(let t in u)if(6==u[t].length){const e=[c[`${t}PosX`],c[`${t}NegX`],c[`${t}PosY`],c[`${t}NegY`],c[`${t}PosZ`],c[`${t}NegZ`]],r=new i.a(e);c[t]=r}return console.debug("ASSETS:"),console.table(c),c}},36:function(t,e,r){var n=r(153),i=r(140),a=r(168),o=function(){};function s(t,e,r){if("function"!=typeof(e=e||o))return Promise.reject(new Error("The second argument to load.all() and load.any() must be a function, or undefined"));var n,i,a=0,s=function(t,r,i,a){var o={target:t,total:n,count:i,progress:i/n,value:r};a&&(o.error=a),e(o)};if(i=r?function(t){return u(t).then(function(t){return{value:t}},function(t){return{value:null,error:t}}).then(function(e){return s(t,e.value,++a,e.error),e.value})}:function(t){return u(t).then(function(e){return s(t,e,++a),e})},Array.isArray(t))return n=t.length,Promise.all(t.map(function(t){return i(t)}));if(t){var c=Object.keys(t).map(function(e){return{key:e,value:t[e]}});return n=c.length,Promise.all(c.map(function(t){var e=t.key;return i(t.value).then(function(t){return{value:t,key:e}})})).then(function(t){return t.reduce(function(t,e){return t[e.key]=e.value,t},{})})}return Promise.reject(new Error("You must specify an array of assets or object group to load"))}function u(t){return t?("string"==typeof t&&(t={url:t}),a(t)?t:function(t){var e,r,i=t.type?t.type:null;if(i){if("function"==typeof i)return Promise.resolve(i);if(i=i.toLowerCase(),!t.url)return Promise.reject(new Error("When using loadAsset(), you must specify a URL or descriptor of the asset to load"));for(e=0;e<n.length;e++)if((r=n[e]).key===i)return Promise.resolve(r.load);return Promise.reject(new Error('Could not find an asset loader by the key "'+t.type+'"'))}if(!t.url)return Promise.reject(new Error("When using loadAsset(), you must specify a URL or descriptor of the asset to load"));var a=function(t){if(!t)return"";var e=t.lastIndexOf("/");-1!==e&&(t=t.substring(e+1));-1!==(e=t.indexOf("?"))&&(t=t.substring(0,e));-1!==(e=t.indexOf("#"))&&(t=t.substring(0,e));return-1!==(e=t.lastIndexOf("."))?t.substring(e):""}(t.url);if(!a)return Promise.reject(new Error('No extension found for input URL "'+t.url+'", try to specify a { type } such as "image" or "text"'));for(e=0;e<n.length;e++)if((r=n[e]).match){var o="function"==typeof r.match?r.match(a):r.match.test(a);if(o)return Promise.resolve(r.load)}return Promise.reject(new Error('Could not infer an asset loader from the file type "'+a+'", try specifying { type } such as "image" or "text"'))}(t).then(function(e){return delete(t=i({},t)).type,e(t)})):Promise.reject(new Error("You must specify a URL or descriptor of the asset to load"))}t.exports=u,t.exports.all=function(t,e){return s(t,e,!1)},t.exports.any=function(t,e){return s(t,e,!0)}},39:function(t,e,r){"use strict";r.r(e);var n=r(10),i=r.n(n),a=r(36),o=r.n(a),s=r(27),u=r(34);let c={wood:"./assets/wood.png",splash:"./assets/flower.png"},l=location.search.replace("?","");for(let t in s.default)l===t&&(c=s.default[t]);!function(){var t;i.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(o.a.any(c,({progress:t,error:e})=>{e&&console.error(e)}));case 2:t=e.sent,window.getAssets=Object(u.default)(c,t),r.e(30).then(r.bind(null,38));case 5:case"end":return e.stop()}},null,this)}()},7:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var n=r(2);function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},i=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),i.forEach(function(e){Object(n.a)(t,e,r[e])})}return t}},9:function(t,e,r){"use strict";const n="#\\?RADIANCE",i="#.*",a="EXPOSURE=\\s*([0-9]*[.][0-9]*)",o="FORMAT=32-bit_rle_rgbe",s="-Y ([0-9]+) \\+X ([0-9]+)";e.a=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=0;const r=t.length,u=10;function c(){let n="";do{const r=t[e];if(r===u){++e;break}n+=String.fromCharCode(r)}while(++e<r);return n}let l=0,f=0,d=1,h=!1;for(let t=0;t<20;t++){const t=c();let e;if(e=t.match(n));else if(e=t.match(o))h=!0;else if(e=t.match(a))d=Number(e[1]);else if(e=t.match(i));else if(e=t.match(s)){f=Number(e[1]),l=Number(e[2]);break}}if(!h)throw new Error("File is not run length encoded!");const _=new Uint8Array(l*f*4);!function(t,e,r,n,i,a){const o=new Array(4);let s,u,c,l=null;const f=new Array(2),d=t.length;function h(e){let r=0;do{e[r++]=t[n]}while(++n<d&&r<e.length);return r}function _(e,r,i){let a=0;do{e[r+a++]=t[n]}while(++n<d&&a<i);return a}function p(t,e,r,n){const i=4*n,a=_(e,r,i);if(a<i)throw new Error(`Error reading raw pixels: got ${a} bytes, expected ${i}`)}for(;a>0;){if(h(o)<o.length)throw new Error(`Error reading bytes: expected ${o.length}`);if(2!==o[0]||2!==o[1]||0!=(128&o[2]))return e[r++]=o[0],e[r++]=o[1],e[r++]=o[2],e[r++]=o[3],void p(0,e,r,i*a-1);if(((255&o[2])<<8|255&o[3])!==i)throw new Error(`Wrong scanline width ${(255&o[2])<<8|255&o[3]}, expected ${i}`);null===l&&(l=new Array(4*i)),s=0;for(let t=0;t<4;t++)for(u=(t+1)*i;s<u;){if(h(f)<f.length)throw new Error("Error reading 2-byte buffer");if((255&f[0])>128){if(0==(c=(255&f[0])-128)||c>u-s)throw new Error("Bad scanline data");for(;c-- >0;)l[s++]=f[1]}else{if(0==(c=255&f[0])||c>u-s)throw new Error("Bad scanline data");if(l[s++]=f[1],--c>0){if(_(l,s,c)<c)throw new Error("Error reading non-run data");s+=c}}}for(let t=0;t<i;t++)e[r+0]=l[t],e[r+1]=l[t+i],e[r+2]=l[t+2*i],e[r+3]=l[t+3*i],r+=4;a--}}(t,_,0,e,l,f);const p=new Float32Array(l*f*4);for(let t=0;t<_.length;t+=4){let e=_[t+0]/255,r=_[t+1]/255,n=_[t+2]/255;const i=_[t+3],a=Math.pow(2,i-128);e*=a,r*=a,n*=a;const o=t;p[o+0]=e,p[o+1]=r,p[o+2]=n,p[o+3]=1}return{shape:[l,f],exposure:d,gamma:1,data:p}}}});