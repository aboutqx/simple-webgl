/*! For license information please see bundle.js.LICENSE.txt */
!function(t){function e(e){for(var r,n,i=e[0],o=e[1],a=0,s=[];a<i.length;a++)n=i[a],Object.prototype.hasOwnProperty.call(P,n)&&P[n]&&s.push(P[n][0]),P[n]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);for(F&&F(e);s.length;)s.shift()()}var r=window.webpackHotUpdate;window.webpackHotUpdate=function(t,e){!function(t,e){if(!M[t]||!T[t])return;for(var r in T[t]=!1,e)Object.prototype.hasOwnProperty.call(e,r)&&(m[r]=e[r]);0==--b&&0===g&&R()}(t,e),r&&r(t,e)};var n,i=!0,o="27718addb4eb8450f4df",a={},s=[],u=[];function c(t){var e=O[t];if(!e)return N;var r=function(r){return e.hot.active?(O[r]?-1===O[r].parents.indexOf(t)&&O[r].parents.push(t):(s=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),s=[]),N(r)},i=function(t){return{configurable:!0,enumerable:!0,get:function(){return N[t]},set:function(e){N[t]=e}}};for(var o in N)Object.prototype.hasOwnProperty.call(N,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(t){return"ready"===d&&h("prepare"),g++,N.e(t).then(e,(function(t){throw e(),t}));function e(){g--,"prepare"===d&&(v[t]||A(t),0===g&&0===b&&R())}},r.t=function(t,e){return 1&e&&(t=r(t)),N.t(t,-2&e)},r}function l(e){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(t,e){if(void 0===t)r._selfAccepted=!0;else if("function"==typeof t)r._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)r._acceptedDependencies[t[n]]=e||function(){};else r._acceptedDependencies[t]=e||function(){}},decline:function(t){if(void 0===t)r._selfDeclined=!0;else if("object"==typeof t)for(var e=0;e<t.length;e++)r._declinedDependencies[t[e]]=!0;else r._declinedDependencies[t]=!0},dispose:function(t){r._disposeHandlers.push(t)},addDisposeHandler:function(t){r._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=r._disposeHandlers.indexOf(t);e>=0&&r._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,d){case"idle":(m={})[e]=t[e],h("ready");break;case"ready":I(e);break;case"prepare":case"check":case"dispose":case"apply":(E=E||[]).push(e)}},check:x,apply:w,status:function(t){if(!t)return d;f.push(t)},addStatusHandler:function(t){f.push(t)},removeStatusHandler:function(t){var e=f.indexOf(t);e>=0&&f.splice(e,1)},data:a[e]};return n=void 0,r}var f=[],d="idle";function h(t){d=t;for(var e=0;e<f.length;e++)f[e].call(null,t)}var p,m,_,E,b=0,g=0,v={},T={},M={};function y(t){return+t+""===t?+t:t}function x(t){if("idle"!==d)throw new Error("check() is only allowed in idle status");return i=t,h("check"),(e=1e4,e=e||1e4,new Promise((function(t,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var n=new XMLHttpRequest,i=N.p+""+o+".hot-update.json";n.open("GET",i,!0),n.timeout=e,n.send(null)}catch(t){return r(t)}n.onreadystatechange=function(){if(4===n.readyState)if(0===n.status)r(new Error("Manifest request to "+i+" timed out."));else if(404===n.status)t();else if(200!==n.status&&304!==n.status)r(new Error("Manifest request to "+i+" failed."));else{try{var e=JSON.parse(n.responseText)}catch(t){return void r(t)}t(e)}}}))).then((function(t){if(!t)return h(S()?"ready":"idle"),null;T={},v={},M=t.c,_=t.h,h("prepare");var e=new Promise((function(t,e){p={resolve:t,reject:e}}));for(var r in m={},P)A(r);return"prepare"===d&&0===g&&0===b&&R(),e}));var e}function A(t){M[t]?(T[t]=!0,b++,function(t){var e=document.createElement("script");e.charset="utf-8",e.src=N.p+""+t+"."+o+".hot-update.js",document.head.appendChild(e)}(t)):v[t]=!0}function R(){h("ready");var t=p;if(p=null,t)if(i)Promise.resolve().then((function(){return w(i)})).then((function(e){t.resolve(e)}),(function(e){t.reject(e)}));else{var e=[];for(var r in m)Object.prototype.hasOwnProperty.call(m,r)&&e.push(y(r));t.resolve(e)}}function w(e){if("ready"!==d)throw new Error("apply() is only allowed in ready status");return function e(r){var i,u,c,l,f;function d(t){for(var e=[t],r={},n=e.map((function(t){return{chain:[t],id:t}}));n.length>0;){var i=n.pop(),o=i.id,a=i.chain;if((l=O[o])&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(l.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var s=0;s<l.parents.length;s++){var u=l.parents[s],c=O[u];if(c){if(c.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([u]),moduleId:o,parentId:u};-1===e.indexOf(u)&&(c.hot._acceptedDependencies[o]?(r[u]||(r[u]=[]),p(r[u],[o])):(delete r[u],e.push(u),n.push({chain:a.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:r}}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];-1===t.indexOf(n)&&t.push(n)}}S();var b={},g=[],v={},T=function(){console.warn("[HMR] unexpected require("+A.moduleId+") to disposed module")};for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)){var A;f=y(x),A=m[x]?d(f):{type:"disposed",moduleId:x};var R=!1,w=!1,I=!1,L="";switch(A.chain&&(L="\nUpdate propagation: "+A.chain.join(" -> ")),A.type){case"self-declined":r.onDeclined&&r.onDeclined(A),r.ignoreDeclined||(R=new Error("Aborted because of self decline: "+A.moduleId+L));break;case"declined":r.onDeclined&&r.onDeclined(A),r.ignoreDeclined||(R=new Error("Aborted because of declined dependency: "+A.moduleId+" in "+A.parentId+L));break;case"unaccepted":r.onUnaccepted&&r.onUnaccepted(A),r.ignoreUnaccepted||(R=new Error("Aborted because "+f+" is not accepted"+L));break;case"accepted":r.onAccepted&&r.onAccepted(A),w=!0;break;case"disposed":r.onDisposed&&r.onDisposed(A),I=!0;break;default:throw new Error("Unexception type "+A.type)}if(R)return h("abort"),Promise.reject(R);if(w)for(f in v[f]=m[f],p(g,A.outdatedModules),A.outdatedDependencies)Object.prototype.hasOwnProperty.call(A.outdatedDependencies,f)&&(b[f]||(b[f]=[]),p(b[f],A.outdatedDependencies[f]));I&&(p(g,[A.moduleId]),v[f]=T)}var C,U=[];for(u=0;u<g.length;u++)f=g[u],O[f]&&O[f].hot._selfAccepted&&v[f]!==T&&!O[f].hot._selfInvalidated&&U.push({module:f,parents:O[f].parents.slice(),errorHandler:O[f].hot._selfAccepted});h("dispose"),Object.keys(M).forEach((function(t){!1===M[t]&&function(t){delete P[t]}(t)}));var F,D,B=g.slice();for(;B.length>0;)if(f=B.pop(),l=O[f]){var j={},X=l.hot._disposeHandlers;for(c=0;c<X.length;c++)(i=X[c])(j);for(a[f]=j,l.hot.active=!1,delete O[f],delete b[f],c=0;c<l.children.length;c++){var k=O[l.children[c]];k&&((C=k.parents.indexOf(f))>=0&&k.parents.splice(C,1))}}for(f in b)if(Object.prototype.hasOwnProperty.call(b,f)&&(l=O[f]))for(D=b[f],c=0;c<D.length;c++)F=D[c],(C=l.children.indexOf(F))>=0&&l.children.splice(C,1);h("apply"),void 0!==_&&(o=_,_=void 0);for(f in m=void 0,v)Object.prototype.hasOwnProperty.call(v,f)&&(t[f]=v[f]);var G=null;for(f in b)if(Object.prototype.hasOwnProperty.call(b,f)&&(l=O[f])){D=b[f];var H=[];for(u=0;u<D.length;u++)if(F=D[u],i=l.hot._acceptedDependencies[F]){if(-1!==H.indexOf(i))continue;H.push(i)}for(u=0;u<H.length;u++){i=H[u];try{i(D)}catch(t){r.onErrored&&r.onErrored({type:"accept-errored",moduleId:f,dependencyId:D[u],error:t}),r.ignoreErrored||G||(G=t)}}}for(u=0;u<U.length;u++){var V=U[u];f=V.module,s=V.parents,n=f;try{N(f)}catch(t){if("function"==typeof V.errorHandler)try{V.errorHandler(t)}catch(e){r.onErrored&&r.onErrored({type:"self-accept-error-handler-errored",moduleId:f,error:e,originalError:t}),r.ignoreErrored||G||(G=e),G||(G=t)}else r.onErrored&&r.onErrored({type:"self-accept-errored",moduleId:f,error:t}),r.ignoreErrored||G||(G=t)}}if(G)return h("fail"),Promise.reject(G);if(E)return e(r).then((function(t){return g.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t}));return h("idle"),new Promise((function(t){t(g)}))}(e=e||{})}function S(){if(E)return m||(m={}),E.forEach(I),E=void 0,!0}function I(e){Object.prototype.hasOwnProperty.call(m,e)||(m[e]=t[e])}var O={},P={40:0};function N(e){if(O[e])return O[e].exports;var r=O[e]={i:e,l:!1,exports:{},hot:l(e),parents:(u=s,s=[],u),children:[]};return t[e].call(r.exports,r,r.exports,c(e)),r.l=!0,r.exports}N.e=function(t){var e=[],r=P[t];if(0!==r)if(r)e.push(r[2]);else{var n=new Promise((function(e,n){r=P[t]=[e,n]}));e.push(r[2]=n);var i,o=document.createElement("script");o.charset="utf-8",o.timeout=120,N.nc&&o.setAttribute("nonce",N.nc),o.src=function(t){return N.p+""+t+".bundle.js"}(t);var a=new Error;i=function(e){o.onerror=o.onload=null,clearTimeout(s);var r=P[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",a.name="ChunkLoadError",a.type=n,a.request=i,r[1](a)}P[t]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:o})}),12e4);o.onerror=o.onload=i,document.head.appendChild(o)}return Promise.all(e)},N.m=t,N.c=O,N.d=function(t,e,r){N.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},N.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},N.t=function(t,e){if(1&e&&(t=N(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(N.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)N.d(r,n,function(e){return t[e]}.bind(null,n));return r},N.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return N.d(e,"a",e),e},N.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},N.p="",N.oe=function(t){throw console.error(t),t},N.h=function(){return o};var L=window.webpackJsonp=window.webpackJsonp||[],C=L.push.bind(L);L.push=e,L=L.slice();for(var U=0;U<L.length;U++)e(L[U]);var F=C;c(41)(N.s=41)}([function(t,e,r){"use strict";r.d(e,"c",(function(){return u})),r.d(e,"b",(function(){return s})),r.d(e,"d",(function(){return l})),r.d(e,"a",(function(){return c}));var n=r(2),i=r(4),o=r(7),a=r(1);const s=document.querySelector("canvas"),u=s.getContext("webgl2",{antialias:!0,stencil:!0});u||console.error("webgl2 not supported!"),console.log("webgl2 used."),window.useWebgl2=!0;let c=new class{constructor(){Object(n.a)(this,"shader",void 0),Object(n.a)(this,"shaderProgram",void 0),Object(n.a)(this,"unpackFlipY",!1),Object(n.a)(this,"_matrix",a.b.create()),Object(n.a)(this,"identityMatrix",a.b.create()),Object(n.a)(this,"_normalMatrix",a.a.create()),Object(n.a)(this,"_inverseModelViewMatrix",a.a.create()),Object(n.a)(this,"_modelMatrix",a.b.create()),Object(n.a)(this,"aspectRatio",void 0),this.customUniforms=["uProjectionMatrix","uViewMatrix","uCameraPos","uNormalMatrix","uModelViewMatrixInverse","uTime","uModelMatrix","uResolution"]}clear(t=.3,e=.3,r=.3,n=1){u.clearColor(t,e,r,n),u.clearDepth(1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT)}customGlState(){u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),u.enable(u.CULL_FACE)}flipY(t){this.unpackFlipY=t}applyHdrExtension(){u.getExtension("EXT_color_buffer_float"),u.getExtension("OES_texture_half_float_linear"),u.getExtension("OES_texture_float_linear")}srcBlend(){u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA)}setCamera(t){this.camera=t,a.b.multiply(this._matrix,this.camera.matrix,this._modelMatrix),a.a.fromMat4(this._inverseModelViewMatrix,this._matrix),a.a.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix),a.a.fromMat4(this._normalMatrix,this._matrix),a.a.invert(this._normalMatrix,this._normalMatrix),a.a.transpose(this._normalMatrix,this._normalMatrix)}resize(){s.width=window.innerWidth,s.height=window.innerHeight,this.aspectRatio=s.width/s.height,this.camera.setAspectRatio(this.aspectRatio),u.viewport(0,0,s.width,s.height)}useShader(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram,this.shaderName=this.shader.name}drawMesh(t,e){const{material:r}=t;if(r&&r.update&&!t.isInstanced&&(r.update(),r.doubleSided&&u.disable(u.CULL_FACE)),t.bind(this.shaderProgram),this.shader){this.camera?this.setCamera(this.camera):console.error("no camera set");const r={uProjectionMatrix:this.camera.projectionMatrix,uViewMatrix:this.camera.viewMatrix,uCameraPos:this.camera.position,uNormalMatrix:this._normalMatrix,uModelViewMatrixInverse:this._inverseModelViewMatrix,uTime:performance.now(),uResolution:[s.width,s.height]};this.shader.style(r),e||this.shader.uniform("uModelMatrix","mat4",t.matrix)}const n=t.drawType,i=t.indices.constructor===Uint32Array?u.UNSIGNED_INT:u.UNSIGNED_SHORT;t.isInstanced?u.drawElementsInstanced(t.drawType,t.iBuffer.numItems,i,0,t.numInstance):n===u.POINTS?u.drawArrays(n,0,t.vertexSize):u.drawElements(n,t.iBuffer.numItems,i,0),t.unbind(),u.enable(u.CULL_FACE)}draw(t,e){if(t)if(t.length)for(let r=0;r<t.length;r++)this.draw(t[r],e);else t instanceof i.a?this.drawMesh(t,e):t instanceof o.a&&(t.updateMatrix(),t.children.forEach(t=>{this.draw(t)}))}};const l=t=>t/180*Math.PI},function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return o})),r.d(e,"f",(function(){return a}));var n={};r.r(n),r.d(n,"create",(function(){return d})),r.d(n,"fromMat4",(function(){return h})),r.d(n,"clone",(function(){return p})),r.d(n,"copy",(function(){return m})),r.d(n,"fromValues",(function(){return _})),r.d(n,"set",(function(){return E})),r.d(n,"identity",(function(){return b})),r.d(n,"transpose",(function(){return g})),r.d(n,"invert",(function(){return v})),r.d(n,"adjoint",(function(){return T})),r.d(n,"determinant",(function(){return M})),r.d(n,"multiply",(function(){return y})),r.d(n,"translate",(function(){return x})),r.d(n,"rotate",(function(){return A})),r.d(n,"scale",(function(){return R})),r.d(n,"fromTranslation",(function(){return w})),r.d(n,"fromRotation",(function(){return S})),r.d(n,"fromScaling",(function(){return I})),r.d(n,"fromMat2d",(function(){return O})),r.d(n,"fromQuat",(function(){return P})),r.d(n,"normalFromMat4",(function(){return N})),r.d(n,"projection",(function(){return L})),r.d(n,"str",(function(){return C})),r.d(n,"frob",(function(){return U})),r.d(n,"add",(function(){return F})),r.d(n,"subtract",(function(){return D})),r.d(n,"multiplyScalar",(function(){return B})),r.d(n,"multiplyScalarAndAdd",(function(){return j})),r.d(n,"exactEquals",(function(){return X})),r.d(n,"equals",(function(){return k})),r.d(n,"mul",(function(){return G})),r.d(n,"sub",(function(){return H}));var i={};r.r(i),r.d(i,"create",(function(){return V})),r.d(i,"clone",(function(){return Y})),r.d(i,"copy",(function(){return q})),r.d(i,"fromValues",(function(){return z})),r.d(i,"set",(function(){return W})),r.d(i,"identity",(function(){return $})),r.d(i,"transpose",(function(){return Z})),r.d(i,"invert",(function(){return K})),r.d(i,"adjoint",(function(){return Q})),r.d(i,"determinant",(function(){return J})),r.d(i,"multiply",(function(){return tt})),r.d(i,"translate",(function(){return et})),r.d(i,"scale",(function(){return rt})),r.d(i,"rotate",(function(){return nt})),r.d(i,"rotateX",(function(){return it})),r.d(i,"rotateY",(function(){return ot})),r.d(i,"rotateZ",(function(){return at})),r.d(i,"fromTranslation",(function(){return st})),r.d(i,"fromScaling",(function(){return ut})),r.d(i,"fromRotation",(function(){return ct})),r.d(i,"fromXRotation",(function(){return lt})),r.d(i,"fromYRotation",(function(){return ft})),r.d(i,"fromZRotation",(function(){return dt})),r.d(i,"fromRotationTranslation",(function(){return ht})),r.d(i,"fromQuat2",(function(){return pt})),r.d(i,"getTranslation",(function(){return mt})),r.d(i,"getScaling",(function(){return _t})),r.d(i,"getRotation",(function(){return Et})),r.d(i,"fromRotationTranslationScale",(function(){return bt})),r.d(i,"fromRotationTranslationScaleOrigin",(function(){return gt})),r.d(i,"fromQuat",(function(){return vt})),r.d(i,"frustum",(function(){return Tt})),r.d(i,"perspective",(function(){return Mt})),r.d(i,"perspectiveFromFieldOfView",(function(){return yt})),r.d(i,"ortho",(function(){return xt})),r.d(i,"lookAt",(function(){return At})),r.d(i,"targetTo",(function(){return Rt})),r.d(i,"str",(function(){return wt})),r.d(i,"frob",(function(){return St})),r.d(i,"add",(function(){return It})),r.d(i,"subtract",(function(){return Ot})),r.d(i,"multiplyScalar",(function(){return Pt})),r.d(i,"multiplyScalarAndAdd",(function(){return Nt})),r.d(i,"exactEquals",(function(){return Lt})),r.d(i,"equals",(function(){return Ct})),r.d(i,"mul",(function(){return Ut})),r.d(i,"sub",(function(){return Ft})),r.d(i,"cut",(function(){return Dt}));var o={};r.r(o),r.d(o,"create",(function(){return Bt})),r.d(o,"clone",(function(){return jt})),r.d(o,"length",(function(){return Xt})),r.d(o,"fromValues",(function(){return kt})),r.d(o,"copy",(function(){return Gt})),r.d(o,"set",(function(){return Ht})),r.d(o,"add",(function(){return Vt})),r.d(o,"subtract",(function(){return Yt})),r.d(o,"multiply",(function(){return qt})),r.d(o,"divide",(function(){return zt})),r.d(o,"ceil",(function(){return Wt})),r.d(o,"floor",(function(){return $t})),r.d(o,"min",(function(){return Zt})),r.d(o,"max",(function(){return Kt})),r.d(o,"round",(function(){return Qt})),r.d(o,"scale",(function(){return Jt})),r.d(o,"scaleAndAdd",(function(){return te})),r.d(o,"distance",(function(){return ee})),r.d(o,"squaredDistance",(function(){return re})),r.d(o,"squaredLength",(function(){return ne})),r.d(o,"negate",(function(){return ie})),r.d(o,"inverse",(function(){return oe})),r.d(o,"normalize",(function(){return ae})),r.d(o,"dot",(function(){return se})),r.d(o,"cross",(function(){return ue})),r.d(o,"lerp",(function(){return ce})),r.d(o,"hermite",(function(){return le})),r.d(o,"bezier",(function(){return fe})),r.d(o,"random",(function(){return de})),r.d(o,"transformMat4",(function(){return he})),r.d(o,"transformMat3",(function(){return pe})),r.d(o,"transformQuat",(function(){return me})),r.d(o,"rotateX",(function(){return _e})),r.d(o,"rotateY",(function(){return Ee})),r.d(o,"rotateZ",(function(){return be})),r.d(o,"angle",(function(){return ge})),r.d(o,"zero",(function(){return ve})),r.d(o,"str",(function(){return Te})),r.d(o,"exactEquals",(function(){return Me})),r.d(o,"equals",(function(){return ye})),r.d(o,"sub",(function(){return Ae})),r.d(o,"mul",(function(){return Re})),r.d(o,"div",(function(){return we})),r.d(o,"dist",(function(){return Se})),r.d(o,"sqrDist",(function(){return Ie})),r.d(o,"len",(function(){return Oe})),r.d(o,"sqrLen",(function(){return Pe})),r.d(o,"forEach",(function(){return Ne}));var a={};r.r(a),r.d(a,"create",(function(){return Le})),r.d(a,"clone",(function(){return Ce})),r.d(a,"fromValues",(function(){return Ue})),r.d(a,"fromPoint",(function(){return Fe})),r.d(a,"fromVec3",(function(){return De})),r.d(a,"copy",(function(){return Be})),r.d(a,"set",(function(){return je})),r.d(a,"add",(function(){return Xe})),r.d(a,"subtract",(function(){return ke})),r.d(a,"multiply",(function(){return Ge})),r.d(a,"divide",(function(){return He})),r.d(a,"ceil",(function(){return Ve})),r.d(a,"floor",(function(){return Ye})),r.d(a,"min",(function(){return qe})),r.d(a,"max",(function(){return ze})),r.d(a,"round",(function(){return We})),r.d(a,"scale",(function(){return $e})),r.d(a,"scaleAndAdd",(function(){return Ze})),r.d(a,"distance",(function(){return Ke})),r.d(a,"squaredDistance",(function(){return Qe})),r.d(a,"length",(function(){return Je})),r.d(a,"squaredLength",(function(){return tr})),r.d(a,"negate",(function(){return er})),r.d(a,"inverse",(function(){return rr})),r.d(a,"normalize",(function(){return nr})),r.d(a,"dot",(function(){return ir})),r.d(a,"cross",(function(){return or})),r.d(a,"lerp",(function(){return ar})),r.d(a,"random",(function(){return sr})),r.d(a,"transformMat4",(function(){return ur})),r.d(a,"transformQuat",(function(){return cr})),r.d(a,"zero",(function(){return lr})),r.d(a,"str",(function(){return fr})),r.d(a,"exactEquals",(function(){return dr})),r.d(a,"equals",(function(){return hr})),r.d(a,"sub",(function(){return pr})),r.d(a,"mul",(function(){return mr})),r.d(a,"div",(function(){return _r})),r.d(a,"dist",(function(){return Er})),r.d(a,"sqrDist",(function(){return br})),r.d(a,"len",(function(){return gr})),r.d(a,"sqrLen",(function(){return vr})),r.d(a,"forEach",(function(){return Tr}));var s={};r.r(s),r.d(s,"create",(function(){return Mr})),r.d(s,"identity",(function(){return yr})),r.d(s,"setAxisAngle",(function(){return xr})),r.d(s,"getAxisAngle",(function(){return Ar})),r.d(s,"getAngle",(function(){return Rr})),r.d(s,"multiply",(function(){return wr})),r.d(s,"rotateX",(function(){return Sr})),r.d(s,"rotateY",(function(){return Ir})),r.d(s,"rotateZ",(function(){return Or})),r.d(s,"calculateW",(function(){return Pr})),r.d(s,"exp",(function(){return Nr})),r.d(s,"ln",(function(){return Lr})),r.d(s,"pow",(function(){return Cr})),r.d(s,"slerp",(function(){return Ur})),r.d(s,"random",(function(){return Fr})),r.d(s,"invert",(function(){return Dr})),r.d(s,"conjugate",(function(){return Br})),r.d(s,"fromMat3",(function(){return jr})),r.d(s,"fromEuler",(function(){return Xr})),r.d(s,"str",(function(){return kr})),r.d(s,"clone",(function(){return Wr})),r.d(s,"fromValues",(function(){return $r})),r.d(s,"copy",(function(){return Zr})),r.d(s,"set",(function(){return Kr})),r.d(s,"add",(function(){return Qr})),r.d(s,"mul",(function(){return Jr})),r.d(s,"scale",(function(){return tn})),r.d(s,"dot",(function(){return en})),r.d(s,"lerp",(function(){return rn})),r.d(s,"length",(function(){return nn})),r.d(s,"len",(function(){return on})),r.d(s,"squaredLength",(function(){return an})),r.d(s,"sqrLen",(function(){return sn})),r.d(s,"normalize",(function(){return un})),r.d(s,"exactEquals",(function(){return cn})),r.d(s,"equals",(function(){return ln})),r.d(s,"rotationTo",(function(){return fn})),r.d(s,"sqlerp",(function(){return dn})),r.d(s,"setAxes",(function(){return hn}));var u={};r.r(u),r.d(u,"create",(function(){return pn})),r.d(u,"clone",(function(){return mn})),r.d(u,"fromValues",(function(){return _n})),r.d(u,"copy",(function(){return En})),r.d(u,"set",(function(){return bn})),r.d(u,"add",(function(){return gn})),r.d(u,"subtract",(function(){return vn})),r.d(u,"multiply",(function(){return Tn})),r.d(u,"divide",(function(){return Mn})),r.d(u,"ceil",(function(){return yn})),r.d(u,"floor",(function(){return xn})),r.d(u,"min",(function(){return An})),r.d(u,"max",(function(){return Rn})),r.d(u,"round",(function(){return wn})),r.d(u,"scale",(function(){return Sn})),r.d(u,"scaleAndAdd",(function(){return In})),r.d(u,"distance",(function(){return On})),r.d(u,"squaredDistance",(function(){return Pn})),r.d(u,"length",(function(){return Nn})),r.d(u,"squaredLength",(function(){return Ln})),r.d(u,"negate",(function(){return Cn})),r.d(u,"inverse",(function(){return Un})),r.d(u,"normalize",(function(){return Fn})),r.d(u,"dot",(function(){return Dn})),r.d(u,"cross",(function(){return Bn})),r.d(u,"lerp",(function(){return jn})),r.d(u,"random",(function(){return Xn})),r.d(u,"transformMat2",(function(){return kn})),r.d(u,"transformMat2d",(function(){return Gn})),r.d(u,"transformMat3",(function(){return Hn})),r.d(u,"transformMat4",(function(){return Vn})),r.d(u,"rotate",(function(){return Yn})),r.d(u,"angle",(function(){return qn})),r.d(u,"zero",(function(){return zn})),r.d(u,"str",(function(){return Wn})),r.d(u,"exactEquals",(function(){return $n})),r.d(u,"equals",(function(){return Zn})),r.d(u,"len",(function(){return Kn})),r.d(u,"sub",(function(){return Qn})),r.d(u,"mul",(function(){return Jn})),r.d(u,"div",(function(){return ti})),r.d(u,"dist",(function(){return ei})),r.d(u,"sqrDist",(function(){return ri})),r.d(u,"sqrLen",(function(){return ni})),r.d(u,"forEach",(function(){return ii}));var c=1e-6,l="undefined"!=typeof Float32Array?Float32Array:Array,f=Math.random;Math.PI;function d(){var t=new l(9);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function p(t){var e=new l(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function m(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _(t,e,r,n,i,o,a,s,u){var c=new l(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=u,c}function E(t,e,r,n,i,o,a,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function b(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function g(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function v(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,d=-l*o+s*u,h=c*o-a*u,p=r*f+n*d+i*h;return p?(p=1/p,t[0]=f*p,t[1]=(-l*n+i*c)*p,t[2]=(s*n-i*a)*p,t[3]=d*p,t[4]=(l*r-i*u)*p,t[5]=(-s*r+i*o)*p,t[6]=h*p,t[7]=(-c*r+n*u)*p,t[8]=(a*r-n*o)*p,t):null}function T(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-n*l,t[2]=n*s-i*a,t[3]=s*u-o*l,t[4]=r*l-i*u,t[5]=i*o-r*s,t[6]=o*c-a*u,t[7]=n*u-r*c,t[8]=r*a-n*o,t}function M(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s)}function y(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=r[0],h=r[1],p=r[2],m=r[3],_=r[4],E=r[5],b=r[6],g=r[7],v=r[8];return t[0]=d*n+h*a+p*c,t[1]=d*i+h*s+p*l,t[2]=d*o+h*u+p*f,t[3]=m*n+_*a+E*c,t[4]=m*i+_*s+E*l,t[5]=m*o+_*u+E*f,t[6]=b*n+g*a+v*c,t[7]=b*i+g*s+v*l,t[8]=b*o+g*u+v*f,t}function x(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=d*n+h*a+c,t[7]=d*i+h*s+l,t[8]=d*o+h*u+f,t}function A(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*a,t[1]=h*i+d*s,t[2]=h*o+d*u,t[3]=h*a-d*n,t[4]=h*s-d*i,t[5]=h*u-d*o,t[6]=c,t[7]=l,t[8]=f,t}function R(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function w(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function S(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function P(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,d=i*a,h=i*s,p=i*u,m=o*a,_=o*s,E=o*u;return t[0]=1-f-p,t[3]=l-E,t[6]=d+_,t[1]=l+E,t[4]=1-c-p,t[7]=h-m,t[2]=d-_,t[5]=h+m,t[8]=1-c-f,t}function N(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],m=e[13],_=e[14],E=e[15],b=r*s-n*a,g=r*u-i*a,v=r*c-o*a,T=n*u-i*s,M=n*c-o*s,y=i*c-o*u,x=l*m-f*p,A=l*_-d*p,R=l*E-h*p,w=f*_-d*m,S=f*E-h*m,I=d*E-h*_,O=b*I-g*S+v*w+T*R-M*A+y*x;return O?(O=1/O,t[0]=(s*I-u*S+c*w)*O,t[1]=(u*R-a*I-c*A)*O,t[2]=(a*S-s*R+c*x)*O,t[3]=(i*S-n*I-o*w)*O,t[4]=(r*I-i*R+o*A)*O,t[5]=(n*R-r*S-o*x)*O,t[6]=(m*y-_*M+E*T)*O,t[7]=(_*v-p*y-E*g)*O,t[8]=(p*M-m*v+E*b)*O,t):null}function L(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function C(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function U(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function F(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function D(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function B(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function j(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function X(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function k(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],f=t[8],d=e[0],h=e[1],p=e[2],m=e[3],_=e[4],E=e[5],b=e[6],g=e[7],v=e[8];return Math.abs(r-d)<=c*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-h)<=c*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=c*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=c*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-_)<=c*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-E)<=c*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-b)<=c*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(l-g)<=c*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-v)<=c*Math.max(1,Math.abs(f),Math.abs(v))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var G=y,H=D;function V(){var t=new l(16);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Y(t){var e=new l(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function q(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function z(t,e,r,n,i,o,a,s,u,c,f,d,h,p,m,_){var E=new l(16);return E[0]=t,E[1]=e,E[2]=r,E[3]=n,E[4]=i,E[5]=o,E[6]=a,E[7]=s,E[8]=u,E[9]=c,E[10]=f,E[11]=d,E[12]=h,E[13]=p,E[14]=m,E[15]=_,E}function W(t,e,r,n,i,o,a,s,u,c,l,f,d,h,p,m,_){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=p,t[14]=m,t[15]=_,t}function $(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function K(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],m=e[13],_=e[14],E=e[15],b=r*s-n*a,g=r*u-i*a,v=r*c-o*a,T=n*u-i*s,M=n*c-o*s,y=i*c-o*u,x=l*m-f*p,A=l*_-d*p,R=l*E-h*p,w=f*_-d*m,S=f*E-h*m,I=d*E-h*_,O=b*I-g*S+v*w+T*R-M*A+y*x;return O?(O=1/O,t[0]=(s*I-u*S+c*w)*O,t[1]=(i*S-n*I-o*w)*O,t[2]=(m*y-_*M+E*T)*O,t[3]=(d*M-f*y-h*T)*O,t[4]=(u*R-a*I-c*A)*O,t[5]=(r*I-i*R+o*A)*O,t[6]=(_*v-p*y-E*g)*O,t[7]=(l*y-d*v+h*g)*O,t[8]=(a*S-s*R+c*x)*O,t[9]=(n*R-r*S-o*x)*O,t[10]=(p*M-m*v+E*b)*O,t[11]=(f*v-l*M-h*b)*O,t[12]=(s*A-a*w-u*x)*O,t[13]=(r*w-n*A+i*x)*O,t[14]=(m*g-p*T-_*b)*O,t[15]=(l*T-f*g+d*b)*O,t):null}function Q(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],p=e[12],m=e[13],_=e[14],E=e[15],b=r*s-n*a,g=r*u-i*a,v=r*c-o*a,T=n*u-i*s,M=n*c-o*s,y=i*c-o*u,x=l*m-f*p,A=l*_-d*p,R=l*E-h*p,w=f*_-d*m,S=f*E-h*m,I=d*E-h*_;return t[0]=s*I-u*S+c*w,t[1]=i*S-n*I-o*w,t[2]=m*y-_*M+E*T,t[3]=d*M-f*y-h*T,t[4]=u*R-a*I-c*A,t[5]=r*I-i*R+o*A,t[6]=_*v-p*y-E*g,t[7]=l*y-d*v+h*g,t[8]=a*S-s*R+c*x,t[9]=n*R-r*S-o*x,t[10]=p*M-m*v+E*b,t[11]=f*v-l*M-h*b,t[12]=s*A-a*w-u*x,t[13]=r*w-n*A+i*x,t[14]=m*g-p*T-_*b,t[15]=l*T-f*g+d*b,t}function J(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],p=t[13],m=t[14],_=e*a-r*o,E=e*s-n*o,b=r*s-n*a,g=c*p-l*h,v=c*m-f*h,T=l*m-f*p;return u*(e*T-r*v+n*g)-i*(o*T-a*v+s*g)+t[15]*(c*b-l*E+f*_)-d*(h*b-p*E+m*_)}function tt(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],m=e[12],_=e[13],E=e[14],b=e[15],g=r[0],v=r[1],T=r[2],M=r[3];return t[0]=g*n+v*s+T*f+M*m,t[1]=g*i+v*u+T*d+M*_,t[2]=g*o+v*c+T*h+M*E,t[3]=g*a+v*l+T*p+M*b,g=r[4],v=r[5],T=r[6],M=r[7],t[4]=g*n+v*s+T*f+M*m,t[5]=g*i+v*u+T*d+M*_,t[6]=g*o+v*c+T*h+M*E,t[7]=g*a+v*l+T*p+M*b,g=r[8],v=r[9],T=r[10],M=r[11],t[8]=g*n+v*s+T*f+M*m,t[9]=g*i+v*u+T*d+M*_,t[10]=g*o+v*c+T*h+M*E,t[11]=g*a+v*l+T*p+M*b,g=r[12],v=r[13],T=r[14],M=r[15],t[12]=g*n+v*s+T*f+M*m,t[13]=g*i+v*u+T*d+M*_,t[14]=g*o+v*c+T*h+M*E,t[15]=g*a+v*l+T*p+M*b,t}function et(t,e,r){var n,i,o,a,s,u,c,l,f,d,h,p,m=r[0],_=r[1],E=r[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*E+e[12],t[13]=e[1]*m+e[5]*_+e[9]*E+e[13],t[14]=e[2]*m+e[6]*_+e[10]*E+e[14],t[15]=e[3]*m+e[7]*_+e[11]*E+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=d,t[10]=h,t[11]=p,t[12]=n*m+s*_+f*E+e[12],t[13]=i*m+u*_+d*E+e[13],t[14]=o*m+c*_+h*E+e[14],t[15]=a*m+l*_+p*E+e[15]),t}function rt(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function nt(t,e,r,n){var i,o,a,s,u,l,f,d,h,p,m,_,E,b,g,v,T,M,y,x,A,R,w,S,I=n[0],O=n[1],P=n[2],N=Math.hypot(I,O,P);return N<c?null:(I*=N=1/N,O*=N,P*=N,i=Math.sin(r),a=1-(o=Math.cos(r)),s=e[0],u=e[1],l=e[2],f=e[3],d=e[4],h=e[5],p=e[6],m=e[7],_=e[8],E=e[9],b=e[10],g=e[11],v=I*I*a+o,T=O*I*a+P*i,M=P*I*a-O*i,y=I*O*a-P*i,x=O*O*a+o,A=P*O*a+I*i,R=I*P*a+O*i,w=O*P*a-I*i,S=P*P*a+o,t[0]=s*v+d*T+_*M,t[1]=u*v+h*T+E*M,t[2]=l*v+p*T+b*M,t[3]=f*v+m*T+g*M,t[4]=s*y+d*x+_*A,t[5]=u*y+h*x+E*A,t[6]=l*y+p*x+b*A,t[7]=f*y+m*x+g*A,t[8]=s*R+d*w+_*S,t[9]=u*R+h*w+E*S,t[10]=l*R+p*w+b*S,t[11]=f*R+m*w+g*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function it(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*n,t[5]=a*i+l*n,t[6]=s*i+f*n,t[7]=u*i+d*n,t[8]=c*i-o*n,t[9]=l*i-a*n,t[10]=f*i-s*n,t[11]=d*i-u*n,t}function ot(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*n,t[1]=a*i-l*n,t[2]=s*i-f*n,t[3]=u*i-d*n,t[8]=o*n+c*i,t[9]=a*n+l*i,t[10]=s*n+f*i,t[11]=u*n+d*i,t}function at(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*n,t[1]=a*i+l*n,t[2]=s*i+f*n,t[3]=u*i+d*n,t[4]=c*i-o*n,t[5]=l*i-a*n,t[6]=f*i-s*n,t[7]=d*i-u*n,t}function st(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ut(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,e,r){var n,i,o,a=r[0],s=r[1],u=r[2],l=Math.hypot(a,s,u);return l<c?null:(a*=l=1/l,s*=l,u*=l,n=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+u*n,t[2]=u*a*o-s*n,t[3]=0,t[4]=a*s*o-u*n,t[5]=s*s*o+i,t[6]=u*s*o+a*n,t[7]=0,t[8]=a*u*o+s*n,t[9]=s*u*o-a*n,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function lt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ft(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ht(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,c=o+o,l=n*s,f=n*u,d=n*c,h=i*u,p=i*c,m=o*c,_=a*s,E=a*u,b=a*c;return t[0]=1-(h+m),t[1]=f+b,t[2]=d-E,t[3]=0,t[4]=f-b,t[5]=1-(l+m),t[6]=p+_,t[7]=0,t[8]=d+E,t[9]=p-_,t[10]=1-(l+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function pt(t,e){var r=new l(3),n=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],d=n*n+i*i+o*o+a*a;return d>0?(r[0]=2*(s*a+f*n+u*o-c*i)/d,r[1]=2*(u*a+f*i+c*n-s*o)/d,r[2]=2*(c*a+f*o+s*i-u*n)/d):(r[0]=2*(s*a+f*n+u*o-c*i),r[1]=2*(u*a+f*i+c*n-s*o),r[2]=2*(c*a+f*o+s*i-u*n)),ht(t,e,r),t}function mt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _t(t,e){var r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function Et(t,e){var r=new l(3);_t(r,e);var n=1/r[0],i=1/r[1],o=1/r[2],a=e[0]*n,s=e[1]*i,u=e[2]*o,c=e[4]*n,f=e[5]*i,d=e[6]*o,h=e[8]*n,p=e[9]*i,m=e[10]*o,_=a+f+m,E=0;return _>0?(E=2*Math.sqrt(_+1),t[3]=.25*E,t[0]=(d-p)/E,t[1]=(h-u)/E,t[2]=(s-c)/E):a>f&&a>m?(E=2*Math.sqrt(1+a-f-m),t[3]=(d-p)/E,t[0]=.25*E,t[1]=(s+c)/E,t[2]=(h+u)/E):f>m?(E=2*Math.sqrt(1+f-a-m),t[3]=(h-u)/E,t[0]=(s+c)/E,t[1]=.25*E,t[2]=(d+p)/E):(E=2*Math.sqrt(1+m-a-f),t[3]=(s-c)/E,t[0]=(h+u)/E,t[1]=(d+p)/E,t[2]=.25*E),t}function bt(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,d=i*c,h=i*l,p=o*c,m=o*l,_=a*l,E=s*u,b=s*c,g=s*l,v=n[0],T=n[1],M=n[2];return t[0]=(1-(p+_))*v,t[1]=(d+g)*v,t[2]=(h-b)*v,t[3]=0,t[4]=(d-g)*T,t[5]=(1-(f+_))*T,t[6]=(m+E)*T,t[7]=0,t[8]=(h+b)*M,t[9]=(m-E)*M,t[10]=(1-(f+p))*M,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function gt(t,e,r,n,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,d=o*c,h=o*l,p=o*f,m=a*l,_=a*f,E=s*f,b=u*c,g=u*l,v=u*f,T=n[0],M=n[1],y=n[2],x=i[0],A=i[1],R=i[2],w=(1-(m+E))*T,S=(h+v)*T,I=(p-g)*T,O=(h-v)*M,P=(1-(d+E))*M,N=(_+b)*M,L=(p+g)*y,C=(_-b)*y,U=(1-(d+m))*y;return t[0]=w,t[1]=S,t[2]=I,t[3]=0,t[4]=O,t[5]=P,t[6]=N,t[7]=0,t[8]=L,t[9]=C,t[10]=U,t[11]=0,t[12]=r[0]+x-(w*x+O*A+L*R),t[13]=r[1]+A-(S*x+P*A+C*R),t[14]=r[2]+R-(I*x+N*A+U*R),t[15]=1,t}function vt(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,d=i*a,h=i*s,p=i*u,m=o*a,_=o*s,E=o*u;return t[0]=1-f-p,t[1]=l+E,t[2]=d-_,t[3]=0,t[4]=l-E,t[5]=1-c-p,t[6]=h+m,t[7]=0,t[8]=d+_,t[9]=h-m,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tt(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function Mt(t,e,r,n,i){var o,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}function yt(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function xt(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*c,t[15]=1,t}function At(t,e,r,n){var i,o,a,s,u,l,f,d,h,p,m=e[0],_=e[1],E=e[2],b=n[0],g=n[1],v=n[2],T=r[0],M=r[1],y=r[2];return Math.abs(m-T)<c&&Math.abs(_-M)<c&&Math.abs(E-y)<c?$(t):(f=m-T,d=_-M,h=E-y,i=g*(h*=p=1/Math.hypot(f,d,h))-v*(d*=p),o=v*(f*=p)-b*h,a=b*d-g*f,(p=Math.hypot(i,o,a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),s=d*a-h*o,u=h*i-f*a,l=f*o-d*i,(p=Math.hypot(s,u,l))?(s*=p=1/p,u*=p,l*=p):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=u,t[6]=d,t[7]=0,t[8]=a,t[9]=l,t[10]=h,t[11]=0,t[12]=-(i*m+o*_+a*E),t[13]=-(s*m+u*_+l*E),t[14]=-(f*m+d*_+h*E),t[15]=1,t)}function Rt(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=n[0],u=n[1],c=n[2],l=i-r[0],f=o-r[1],d=a-r[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);var p=u*d-c*f,m=c*l-s*d,_=s*f-u*l;return(h=p*p+m*m+_*_)>0&&(p*=h=1/Math.sqrt(h),m*=h,_*=h),t[0]=p,t[1]=m,t[2]=_,t[3]=0,t[4]=f*_-d*m,t[5]=d*p-l*_,t[6]=l*m-f*p,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function wt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function St(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function It(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Ot(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Pt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Nt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Lt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ct(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],_=t[13],E=t[14],b=t[15],g=e[0],v=e[1],T=e[2],M=e[3],y=e[4],x=e[5],A=e[6],R=e[7],w=e[8],S=e[9],I=e[10],O=e[11],P=e[12],N=e[13],L=e[14],C=e[15];return Math.abs(r-g)<=c*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-v)<=c*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-T)<=c*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(o-M)<=c*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-y)<=c*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-x)<=c*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-A)<=c*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(l-R)<=c*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(f-w)<=c*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(d-S)<=c*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(h-I)<=c*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-O)<=c*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(m-P)<=c*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(_-N)<=c*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(E-L)<=c*Math.max(1,Math.abs(E),Math.abs(L))&&Math.abs(b-C)<=c*Math.max(1,Math.abs(b),Math.abs(C))}var Ut=tt,Ft=Ot;function Dt(t,e,r,n){for(var i=0,o=0;o<4;o++)for(var a=0;a<4;a++)if(o!=r&&a!=n){var s=4*o+a;t[i++]=e[s]}return t}function Bt(){var t=new l(3);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function jt(t){var e=new l(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xt(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function kt(t,e,r){var n=new l(3);return n[0]=t,n[1]=e,n[2]=r,n}function Gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ht(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Vt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Yt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function qt(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function zt(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Wt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $t(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Zt(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Kt(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Qt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Jt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function te(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function ee(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function re(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function ne(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function ie(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function oe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ae(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function se(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ue(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t}function ce(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}function le(t,e,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+r[0]*u+n[0]*c+i[0]*l,t[1]=e[1]*s+r[1]*u+n[1]*c+i[1]*l,t[2]=e[2]*s+r[2]*u+n[2]*c+i[2]*l,t}function fe(t,e,r,n,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,d=u*o;return t[0]=e[0]*c+r[0]*l+n[0]*f+i[0]*d,t[1]=e[1]*c+r[1]*l+n[1]*f+i[1]*d,t[2]=e[2]*c+r[2]*l+n[2]*f+i[2]*d,t}function de(t,e){e=e||1;var r=2*f()*Math.PI,n=2*f()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function he(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t}function pe(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function me(t,e,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-n*c,d=n*u-i*s,h=i*d-o*f,p=o*l-n*d,m=n*f-i*l,_=2*a;return l*=_,f*=_,d*=_,h*=2,p*=2,m*=2,t[0]=s+l+h,t[1]=u+f+p,t[2]=c+d+m,t}function _e(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Ee(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function be(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function ge(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&se(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function ve(t){return t[0]=0,t[1]=0,t[2]=0,t}function Te(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Me(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ye(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))}var xe,Ae=Yt,Re=qt,we=zt,Se=ee,Ie=re,Oe=Xt,Pe=ne,Ne=(xe=Bt(),function(t,e,r,n,i,o){var a,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)xe[0]=t[a],xe[1]=t[a+1],xe[2]=t[a+2],i(xe,xe,o),t[a]=xe[0],t[a+1]=xe[1],t[a+2]=xe[2];return t});function Le(){var t=new l(4);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ce(t){var e=new l(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ue(t,e,r,n){var i=new l(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function Fe(t){var e=new l(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function De(t){var e=new l(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0,e}function Be(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function je(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Xe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function ke(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Ge(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function He(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Ve(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ye(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function qe(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function ze(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function We(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function $e(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Ze(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Ke(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(r,n,i,o)}function Qe(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function Je(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function tr(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function er(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function rr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function nr(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a,t}function ir(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function or(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],o=r[0]*n[2]-r[2]*n[0],a=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],l=e[0],f=e[1],d=e[2],h=e[3];return t[0]=f*c-d*u+h*s,t[1]=-l*c+d*a-h*o,t[2]=l*u-f*a+h*i,t[3]=-l*s+f*o-d*i,t}function ar(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t}function sr(t,e){var r,n,i,o,a,s;e=e||1;do{a=(r=2*f()-1)*r+(n=2*f()-1)*n}while(a>=1);do{s=(i=2*f()-1)*i+(o=2*f()-1)*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*u,t[3]=e*o*u,t}function ur(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}function cr(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,d=c*o+a*i-s*n,h=-a*n-s*i-u*o;return t[0]=l*c+h*-a+f*-u-d*-s,t[1]=f*c+h*-s+d*-a-l*-u,t[2]=d*c+h*-u+l*-s-f*-a,t[3]=e[3],t}function lr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function fr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function dr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function hr(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(r-a)<=c*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=c*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=c*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=c*Math.max(1,Math.abs(o),Math.abs(l))}var pr=ke,mr=Ge,_r=He,Er=Ke,br=Qe,gr=Je,vr=tr,Tr=function(){var t=Le();return function(e,r,n,i,o,a){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Mr(){var t=new l(4);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function yr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xr(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Ar(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>c?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Rr(t,e){var r=en(t,e);return Math.acos(2*r*r-1)}function wr(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-n*c,t[2]=o*l+a*c+n*u-i*s,t[3]=a*l-n*s-i*u-o*c,t}function Sr(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-n*s,t}function Ir(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*s,t[1]=i*u+a*s,t[2]=o*u+n*s,t[3]=a*u-i*s,t}function Or(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function Pr(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function Nr(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=Math.sqrt(r*r+n*n+i*i),s=Math.exp(o),u=a>0?s*Math.sin(a)/a:0;return t[0]=r*u,t[1]=n*u,t[2]=i*u,t[3]=s*Math.cos(a),t}function Lr(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=Math.sqrt(r*r+n*n+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=.5*Math.log(r*r+n*n+i*i+o*o),t}function Cr(t,e,r){return Lr(t,e),tn(t,t,r),Nr(t,t),t}function Ur(t,e,r,n){var i,o,a,s,u,l=e[0],f=e[1],d=e[2],h=e[3],p=r[0],m=r[1],_=r[2],E=r[3];return(o=l*p+f*m+d*_+h*E)<0&&(o=-o,p=-p,m=-m,_=-_,E=-E),1-o>c?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(s=1-n,u=n),t[0]=s*l+u*p,t[1]=s*f+u*m,t[2]=s*d+u*_,t[3]=s*h+u*E,t}function Fr(t){var e=f(),r=f(),n=f(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function Dr(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=o*s,t}function Br(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function jr(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}function Xr(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return t[0]=o*u*l-a*s*c,t[1]=a*s*l+o*u*c,t[2]=a*u*c-o*s*l,t[3]=a*u*l+o*s*c,t}function kr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Gr,Hr,Vr,Yr,qr,zr,Wr=Ce,$r=Ue,Zr=Be,Kr=je,Qr=Xe,Jr=wr,tn=$e,en=ir,rn=ar,nn=Je,on=nn,an=tr,sn=an,un=nr,cn=dr,ln=hr,fn=(Gr=Bt(),Hr=kt(1,0,0),Vr=kt(0,1,0),function(t,e,r){var n=se(e,r);return n<-.999999?(ue(Gr,Hr,e),Oe(Gr)<1e-6&&ue(Gr,Vr,e),ae(Gr,Gr),xr(t,Gr,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(ue(Gr,e,r),t[0]=Gr[0],t[1]=Gr[1],t[2]=Gr[2],t[3]=1+n,un(t,t))}),dn=(Yr=Mr(),qr=Mr(),function(t,e,r,n,i,o){return Ur(Yr,e,i,o),Ur(qr,r,n,o),Ur(t,Yr,qr,2*o*(1-o)),t}),hn=(zr=d(),function(t,e,r,n){return zr[0]=r[0],zr[3]=r[1],zr[6]=r[2],zr[1]=n[0],zr[4]=n[1],zr[7]=n[2],zr[2]=-e[0],zr[5]=-e[1],zr[8]=-e[2],un(t,jr(t,zr))});function pn(){var t=new l(2);return l!=Float32Array&&(t[0]=0,t[1]=0),t}function mn(t){var e=new l(2);return e[0]=t[0],e[1]=t[1],e}function _n(t,e){var r=new l(2);return r[0]=t,r[1]=e,r}function En(t,e){return t[0]=e[0],t[1]=e[1],t}function bn(t,e,r){return t[0]=e,t[1]=r,t}function gn(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function vn(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Tn(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Mn(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function yn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function xn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function An(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function Rn(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function wn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Sn(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function In(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function On(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function Pn(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Nn(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function Ln(t){var e=t[0],r=t[1];return e*e+r*r}function Cn(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Un(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Fn(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Dn(t,e){return t[0]*e[0]+t[1]*e[1]}function Bn(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function jn(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function Xn(t,e){e=e||1;var r=2*f()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function kn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function Gn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function Hn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function Vn(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function Yn(t,e,r,n){var i=e[0]-r[0],o=e[1]-r[1],a=Math.sin(n),s=Math.cos(n);return t[0]=i*s-o*a+r[0],t[1]=i*a+o*s+r[1],t}function qn(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+o*o),s=a&&(r*i+n*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function zn(t){return t[0]=0,t[1]=0,t}function Wn(t){return"vec2("+t[0]+", "+t[1]+")"}function $n(t,e){return t[0]===e[0]&&t[1]===e[1]}function Zn(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=c*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=c*Math.max(1,Math.abs(n),Math.abs(o))}var Kn=Nn,Qn=vn,Jn=Tn,ti=Mn,ei=On,ri=Pn,ni=Ln,ii=function(){var t=pn();return function(e,r,n,i,o,a){var s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return n}))},function(t,e,r){"use strict";var n=r(0);function i(t){return 0!==t&&!(t&t-1)}var o=function(t,e,r,o){if(!t.minFilter){let e=n.c.LINEAR;r&&r&&i(r)&&i(o)&&(e=n.c.LINEAR_MIPMAP_NEAREST),t.minFilter=e}return t.mipmap=t.mipmap||!0,t.magFilter=t.magFilter||n.c.LINEAR,t.wrapS=t.wrapS||n.c.CLAMP_TO_EDGE,t.wrapT=t.wrapT||n.c.CLAMP_TO_EDGE,t.format=t.format||n.c.RGBA,t.premultiplyAlpha=t.premultiplyAlpha||!1,t.level=t.level||0,t.anisotropy=t.anisotropy||0,t.internalFormat||e===n.c.UNSIGNED_BYTE?t.internalFormat=t.internalFormat||t.format||n.c.RGBA:t.internalFormat=function(t,e){let r;e===n.c.DEPTH_STENCIL?r=n.c.DEPTH24_STENCIL8:e===n.c.DEPTH_COMPONENT&&(t===n.c.UNSIGNED_SHORT?r=n.c.DEPTH_COMPONENT16:t===n.c.UNSIGNED_INT&&(r=n.c.DEPTH_COMPONENT24));if(t===n.c.FLOAT)switch(e){case n.c.RGBA:r=n.c.RGBA32F;break;case n.c.RGB:r=n.c.RGB32F;break;case n.c.RG:r=n.c.RG32F;break;case n.c.R:r=n.c.R32F}else if(t===n.c.HALF_FLOAT)switch(e){case n.c.RGBA:r=n.c.RGBA16F;break;case n.c.RGB:r=n.c.RGB16F;break;case n.c.RG:r=n.c.RG16F;break;case n.c.R:r=n.c.R16F}return r}(e,t.format),t},a=r(6),s=r.n(a),u=r(17);class c{constructor(t,e={},r=0,i=0){this._source=t,this._getDimension(t,r,i),this._sourceType=e.type||function(t){let e=n.c.UNSIGNED_BYTE;t instanceof Array||t instanceof Uint8Array?e=n.c.UNSIGNED_BYTE:t instanceof Float32Array?e=n.c.FLOAT:t instanceof HTMLImageElement?e="image":t instanceof HTMLCanvasElement?e="canvas":t instanceof HTMLVideoElement&&(e="video");return e}(t),this._checkSource(),this._texelType=this._getTexelType(),this._isTextureReady=!0,this._params=o(e,this._texelType,this._width,this._height),this._checkMipmap(),this._checkWrapping(),this._texture=n.c.createTexture(),"video"===this._sourceType?(this._isTextureReady=!1,u.a.addEF(()=>this._loop())):this._uploadTexture()}_loop(){4==this._source.readyState&&(this._isTextureReady=!0,this._uploadTexture())}_uploadTexture(){if(n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.pixelStorei(n.c.UNPACK_FLIP_Y_WEBGL,n.a.unpackFlipY),this._isSourceHtmlElement()?n.c.texImage2D(n.c.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._texelType,this._source):n.c.texImage2D(n.c.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._texelType,this._source),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MAG_FILTER,this._params.magFilter),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MIN_FILTER,this._params.minFilter),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_S,this._params.wrapS),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_T,this._params.wrapT),n.c.pixelStorei(n.c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._params.premultiplyAlpha),this._params.anisotropy>0){const t=n.c.getExtension("EXT_texture_filter_anisotropic");if(t){const e=n.c.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT),r=Math.min(e,this._params.anisotropy);n.c.texParameterf(n.c.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,r)}}this._generateMipmap&&n.c.generateMipmap(n.c.TEXTURE_2D),n.c.bindTexture(n.c.TEXTURE_2D,null)}bind(t){void 0===t&&(t=0),n.c.activeTexture(n.c.TEXTURE0+t),this._isTextureReady?n.c.bindTexture(n.c.TEXTURE_2D,this._texture):n.c.bindTexture(n.c.TEXTURE_2D,c.blackTexture().texture),this._bindIndex=t}updateTexture(t){this._source=t,this._checkSource(),this._uploadTexture()}generateMipmap(){this._generateMipmap&&(n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.generateMipmap(n.c.TEXTURE_2D),n.c.bindTexture(n.c.TEXTURE_2D,null))}showParameters(){console.log("Source type : ",s.a[this._sourceType]||this._sourceType),console.log("Texel type:",s.a[this.texelType]),console.log("Dimension :",this._width,this._height);for(const t in this._params)console.log(t,s.a[this._params[t]]||this._params[t]);console.log("Mipmapping :",this._generateMipmap)}_getDimension(t,e,r){t?(this._width=t.width||t.videoWidth,this._height=t.height||t.videoWidth,this._width=this._width||e,this._height=this._height||r,this._width&&this._height||(this._width=this._height=Math.sqrt(t.length/4))):(this._width=e,this._height=r)}_checkSource(){this._source&&(this._sourceType===n.c.UNSIGNED_BYTE?this._source instanceof Uint8Array||(this._source=new Uint8Array(this._source)):this._sourceType===n.c.FLOAT&&(this._source instanceof Float32Array||(this._source=new Float32Array(this._source))))}_getTexelType(){return this._isSourceHtmlElement()?n.c.UNSIGNED_BYTE:n.c[s.a[this._sourceType]]||this._sourceType}_checkMipmap(){this._generateMipmap=this._params.mipmap,l(this._width)&&l(this._height)||(this._generateMipmap=!1);-1==s.a[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}_checkWrapping(){this._generateMipmap||(this._params.wrapS=n.c.CLAMP_TO_EDGE,this._params.wrapT=n.c.CLAMP_TO_EDGE)}_isSourceHtmlElement(){return"image"===this._sourceType||"video"===this._sourceType||"canvas"===this._sourceType}repeat(){this.wrapS=n.c.REPEAT,this.wrapT=n.c.REPEAT}clamp(){this.wrapS=n.c.CLAMP_TO_EDGE,this.wrapT=n.c.CLAMP_TO_EDGE}get minFilter(){return this._params.minFilter}set minFilter(t){this._params.minFilter=t,this._checkMipmap(),n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MIN_FILTER,this._params.minFilter),n.c.bindTexture(n.c.TEXTURE_2D,null),this.generateMipmap()}get magFilter(){return this._params.minFilter}set magFilter(t){this._params.magFilter=t,n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_MAG_FILTER,this._params.magFilter),n.c.bindTexture(n.c.TEXTURE_2D,null)}get wrapS(){return this._params.wrapS}set wrapS(t){this._params.wrapS=t,this._checkWrapping(),n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_S,this._params.wrapS),n.c.bindTexture(n.c.TEXTURE_2D,null)}get wrapT(){return this._params.wrapT}set wrapT(t){this._params.wrapT=t,this._checkWrapping(),n.c.bindTexture(n.c.TEXTURE_2D,this._texture),n.c.texParameteri(n.c.TEXTURE_2D,n.c.TEXTURE_WRAP_T,this._params.wrapT),n.c.bindTexture(n.c.TEXTURE_2D,null)}get texelType(){return this._texelType}get width(){return this._width}get height(){return this._height}get texture(){return this._texture}get isTextureReady(){return this._isTextureReady}}function l(t){return 0!==t&&!(t&t-1)}let f,d,h,p,m;c.whiteTexture=function(){if(void 0===f){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,2,2),f=new c(t)}return f},c.greyTexture=function(){if(void 0===d){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,2,2),d=new c(t)}return d},c.blackTexture=function(){if(void 0===h){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,2,2),h=new c(t)}return h},c.checkerboardTexture=function(){if(void 0===p){const t=[];t.push([255,255,255,255]),t.push([0,0,0,255]),t.push([0,0,0,255]),t.push([255,255,255,255]),p=new c(new Uint8Array(t.flat()),{magFilter:n.c.NEAREST},2,2)}return p},c.halfFloatTexture=function(){if(void 0===m){const t=[];t.push([13653,13653,13653,13653]),m=new c(new Uint16Array(t.flat()),{type:n.c.HALF_FLOAT,minFilter:n.c.LINEAR},1,1)}return m};e.a=c},function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(2),i=function(t,e,r){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[r]&&(e.cacheAttribLoc[r]=t.getAttribLocation(e,r)),e.cacheAttribLoc[r]},o=r(0),a=r(3),s=r(7),u=r(1);const c=function(t){let e;return void 0!==t.buffer?e=t.buffer:(e=o.c.createBuffer(),t.buffer=e),e};class l extends s.a{constructor(t=o.c.TRIANGLES,e,r){super(),Object(n.a)(this,"iBuffer",null),Object(n.a)(this,"_isInstanced",!1),Object(n.a)(this,"_bufferChanged",[]),Object(n.a)(this,"_attributes",[]),Object(n.a)(this,"_numInstance",-1),Object(n.a)(this,"_enabledVertexAttribute",[]),Object(n.a)(this,"_indices",[]),Object(n.a)(this,"_faces",[]),Object(n.a)(this,"_bufferChanged",[]),Object(n.a)(this,"name",""),Object(n.a)(this,"material",null),Object(n.a)(this,"textures",{}),this._extVAO=!!o.c.createVertexArray,this._useVAO=!!this._extVAO,this.drawType=t,this.name=e,r&&this.setMaterial(r)}bufferVertex(t){this.bufferData(t,"position",3)}bufferNormal(t){this.bufferData(t,"normal",3)}bufferTexCoord(t){this.bufferData(t,"texCoord",2)}bufferColor(t){this.bufferData(t,"color",4)}formBuffer(t,e){const r=[];for(let n=0;n<t.length;n+=e){const i=[];for(let r=0;r<e;r++)i.push(t[n+r]);r.push(i)}return r}bufferFlattenData(t,e,r,n=35044,i=!1){const o=this.formBuffer(t,r);return this.bufferData(o,e,r,35044,!1),this}bufferData(t,e,r,n=35044,i=!1){const o=n;let a=[];this._isInstanced=i||this._isInstanced;for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++)a.push(t[e][r]);const s=new Float32Array(a),u=this.getAttribute(e);return u?(u.itemSize=r,u.dataArray=s,u.source=t):this._attributes.push({name:e,source:t,itemSize:r,drawType:o,dataArray:s,isInstanced:i}),this._bufferChanged.push(e),this}bufferIndex(t,e=!1){return this._drawType=e?o.c.DYNAMIC_DRAW:o.c.STATIC_DRAW,this._indices=t instanceof Array?t.length>65535?new Uint32Array(t):new Uint16Array(t):t,this._numItems=this._indices.length,this}bufferInstance(t,e,r=35044){if(!o.c.vertexAttribDivisor)return void console.error("Extension : ANGLE_instanced_arrays is not supported with this device !");const n=t[0].length;this._numInstance=t.length,this.bufferData(t,e,n,r,!0)}bind(t){t||console.error("no current program used"),this.generateBuffers(t),this.hasVAO?o.c.bindVertexArray(this.vao):(this.attributes.forEach(t=>{o.c.bindBuffer(o.c.ARRAY_BUFFER,t.buffer);const e=t.attrPosition;o.c.vertexAttribPointer(e,t.itemSize,o.c.FLOAT,!1,0,0),t.isInstanced&&o.c.vertexAttribDivisor(e,1)}),o.c.bindBuffer(o.c.ELEMENT_ARRAY_BUFFER,this.iBuffer)),this.textures&&o.a.shader.style(this.textures)}generateBuffers(t){0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=o.c.createVertexArray()),o.c.bindVertexArray(this._vao),this._attributes.forEach(e=>{if(-1!==this._bufferChanged.indexOf(e.name)){const r=c(e);o.c.bindBuffer(o.c.ARRAY_BUFFER,r),o.c.bufferData(o.c.ARRAY_BUFFER,e.dataArray,e.drawType);const n=i(o.c,t,e.name);if(n<0)return void console.log("attribute pos:",n,e.name,"shaderName:",o.a.shaderName);if(e.attrPosition=n,e.isInstanced&&e.source[0].length>4){for(let t=0;t<4;++t)o.c.enableVertexAttribArray(n+t),o.c.vertexAttribPointer(n+t,4,o.c.FLOAT,!1,64,16*t),o.c.vertexAttribDivisor(n+t,1);return}o.c.enableVertexAttribArray(n),o.c.vertexAttribPointer(n,e.itemSize,o.c.FLOAT,!1,0,0),e.isInstanced&&o.c.vertexAttribDivisor(n,1)}}),this._updateIndexBuffer(),o.c.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(e=>{if(-1!==this._bufferChanged.indexOf(e.name)){const r=c(e);o.c.bindBuffer(o.c.ARRAY_BUFFER,r),o.c.bufferData(o.c.ARRAY_BUFFER,e.dataArray,e.drawType);const n=i(o.c,t,e.name);o.c.enableVertexAttribArray(n),o.c.vertexAttribPointer(n,e.itemSize,o.c.FLOAT,!1,0,0),e.attrPosition=n,e.isInstanced&&o.c.vertexAttribDivisor(n,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}bufferSubData(t,e,r=0){const n=this.getAttribute(t);if(!n.buffer)return;let i=[];for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)i.push(e[t][r]);const a=new Float32Array(i);o.c.bindBuffer(o.c.ARRAY_BUFFER,n.buffer),o.c.bufferSubData(o.c.ARRAY_BUFFER,r,a)}unbind(){this._useVAO&&o.c.bindVertexArray(null),this._attributes.forEach(t=>{t.isInstanced&&o.c.vertexAttribDivisor(t.attrPosition,0)})}_updateIndexBuffer(){this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=o.c.createBuffer()),o.c.bindBuffer(o.c.ELEMENT_ARRAY_BUFFER,this.iBuffer),o.c.bufferData(o.c.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}computeNormals(t,e=!1){e?this.generateFaces(t):this._computeVertexNormals(t)}_computeFaceNormals(){let t,e;const r=[];for(let n=0;n<this._indices.length;n+=3){t=n/3,e=this._faces[t];const i=e.normal;r[e.indices[0]]=i,r[e.indices[1]]=i,r[e.indices[2]]=i}this.bufferNormal(r)}_computeVertexNormals(t){const e=u.e.create(),r=[],{vertices:n}=this;let i=0;for(let s=0;s<n.length;s++){u.e.set(e,0,0,0);for(let r=0;r<n.length;r++)o=n[s],a=n[r],o.join(",")===a.join(",")&&(e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2],i++);u.e.divide(e,e,u.e.fromValues(i,i,i)),u.e.normalize(e,e),r.push([e[0],e[1],e[2]]),i=0}var o,a;this.bufferNormal(r)}generateFaces(t){let e,r,n,i,o,a,s,c,l;u.e.create(),u.e.create(),u.e.create();const{vertices:f}=this;for(let u=0;u<this._indices.length;u+=3){e=this._indices[u],r=this._indices[u+1],n=this._indices[u+2],i=f[e],o=f[r],a=f[n],s=t[e],c=t[r],l=t[n];const d={indices:[e,r,n],vertices:[i,o,a],normals:[s,c,l]};this._faces.push(d)}}getAttribute(t){return this._attributes.find(e=>e.name===t)}getSource(t){const e=this.getAttribute(t);return e?e.source:[]}_setMatTexture(){for(let t in this.material)this.material[t].constructor===HTMLImageElement&&(this.textures[t]=new a.a(this.material[t],{wrapS:o.c.REPEAT,wrapT:o.c.REPEAT}))}setMaterial(t){this.material=t,this._setMatTexture()}get vertices(){return this.getSource("position")}get normals(){return this.getSource("normal")}get coords(){return this.getSource("texCoord")}get indices(){return this._indices}get vertexSize(){return this.vertices.length}get faces(){return this._faces}get attributes(){return this._attributes}get hasVAO(){return this._hasVAO}get vao(){return this._vao}get numInstance(){return this._numInstance}get isInstanced(){return this._isInstanced}}},function(t,e,r){t.exports=r(26)},function(t,e){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5131:"HALF_FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34842:"RGBA16F",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(t,e,r){"use strict";var n=r(2),i=r(1),o=r(4),a=r(14);e.a=class{constructor(){Object(n.a)(this,"name",""),Object(n.a)(this,"_originalMatrix",void 0),this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._position=i.e.create(),this._scale=i.e.fromValues(1,1,1),this._rotation=i.e.create(),this._matrix=i.b.create(),this._matrixParent=i.b.create(),this._matrixRotation=i.b.create(),this._matrixScale=i.b.create(),this._matrixTranslation=i.b.create(),this._matrixQuaternion=i.b.create(),this._quat=i.c.create(),this._children=[]}updateMatrix(){this._needUpdate&&(i.e.set(this._scale,this._sx,this._sy,this._sz),i.e.set(this._rotation,this._rx,this._ry,this._rz),i.e.set(this._position,this._x,this._y,this._z),i.b.identity(this._matrixTranslation),i.b.identity(this._matrixScale),i.b.identity(this._matrixRotation),i.b.rotateX(this._matrixRotation,this._matrixRotation,this._rx),i.b.rotateY(this._matrixRotation,this._matrixRotation,this._ry),i.b.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),i.b.fromQuat(this._matrixQuaternion,this._quat),i.b.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),i.b.scale(this._matrixScale,this._matrixScale,this._scale),i.b.translate(this._matrixTranslation,this._matrixTranslation,this._position),i.b.mul(this._matrix,this._matrixTranslation,this._matrixRotation),i.b.mul(this._matrix,this._matrix,this._matrixScale),i.b.mul(this._matrix,this._matrixParent,this._matrix),this._originalMatrix&&i.b.mul(this._matrix,this._matrix,this._originalMatrix),this._children.forEach(t=>{t.updateParentMatrix(this._matrix)}),this._needUpdate=!1)}updateParentMatrix(t){t=t||i.b.create(),i.b.copy(this._matrixParent,t),this._needUpdate=!0}setRotationFromQuaternion(t){i.c.copy(this._quat,t),this._needUpdate=!0}addChild(t){this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);-1!=e?this._children.splice(e,1):console.warn("Child no exist")}boundingAABB(){if(this instanceof o.a)return a.a.fromVertices(this.vertices)}boundingOBB(){const t=this.boundingAABB();if(t){let e=new a.c;e.size=t.size;let r=vec4.create();return vec4.transformMat4(r,vec4.fromVec3(t.position),this.matrix),e.position=i.e.fromValues(r[0],r[1],r[2]),e.orientation=i.a.create(),e.orientation=i.b.cut(e.orientation,this.matrix,3,3),e}}get matrix(){return this.updateMatrix(),this._matrix}set originalMatrix(t){this._originalMatrix=t,this.updateMatrix()}get x(){return this._x}set x(t){this._needUpdate=!0,this._x=t}get y(){return this._y}set y(t){this._needUpdate=!0,this._y=t}get z(){return this._z}set z(t){this._needUpdate=!0,this._z=t}get scaleX(){return this._sx}set scaleX(t){this._needUpdate=!0,this._sx=t}get scaleY(){return this._sy}set scaleY(t){this._needUpdate=!0,this._sy=t}get scaleZ(){return this._sz}set scaleZ(t){this._needUpdate=!0,this._sz=t}set scale(t){this._needUpdate=!0,this._sx=t,this._sy=t,this._sz=t}get rotationX(){return this._rx}set rotationX(t){this._needUpdate=!0,this._rx=t}get rotationY(){return this._ry}set rotationY(t){this._needUpdate=!0,this._ry=t}get rotationZ(){return this._rz}set rotationZ(t){this._needUpdate=!0,this._rz=t}get children(){return this._children}set vertexMin(t){this._vertexMin=t}set vertexMax(t){this._vertexMax=t}get maxLength(){const t=i.e.create();return i.e.subtract(t,this._vertexMax,this._vertexMin),i.e.length(t)}get hasScale(){}}},function(t,e,r){"use strict";e.a="#version 300 es\n#define GLSLIFY 1\n// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\nlayout (location = 0) in vec3 position;\nlayout (location = 1) in vec3 normal;\nlayout (location = 2) in vec2 texCoord;\n\nuniform mat4 mMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nout vec3 vNormal;\nout vec3 vPosition;\nout vec2 vTexCoord;\nout vec4 vViewSpacePosition;\n\nvoid main(void){\n\n\tvec4 pos       = mMatrix * vec4(position, 1.0);\n    vViewSpacePosition = uViewMatrix * pos;\n\tgl_Position    = uProjectionMatrix * vViewSpacePosition;\n\n    mat3 normalMatrix = transpose(inverse(mat3(mMatrix)));\n    vNormal = normalize(normalMatrix * normal);\n    \n    vPosition = pos.xyz;\n    \n    vTexCoord = texCoord;\n}\n"},function(t,e,r){"use strict";var n=r(15),i=r(0);const o=[],a=function(t,e){return t=t.replace("#version 300 es",""),`#version 300 es\n${function(t){let e="";for(const r in t)t[r]&&(e+=`#define ${r} ${t[r]}\n`);return e}(e)}\n${t}`};String.prototype.splice=function(t,e,r){return this.slice(0,t)+r+this.slice(t+Math.abs(e))};e.a={get:(t,e,r={})=>{let i;const s=a(t,r),u=a(e,r);return o.forEach(t=>{s===t.vs&&u===t.fs&&(i=t.glShader)}),i||(i=new n.a(s,u),o.push({vs:s,fs:u,glShader:i})),{vs:s,fs:u,glShader:i}},addInstanceMatrix:t=>(-1==(t=t.replace("#version 300 es","")).indexOf("instanceMatrix")&&(t=(t=(t=(t=t.replace("uniform mat4 uModelMatrix","in mat4 instanceMatrix")).replace("uniform mat4 mMatrix","in mat4 instanceMatrix")).replace(/uModelMatrix/g,"instanceMatrix")).replace(/mMatrix/g,"instanceMatrix")),"#version 300 es\n\t"+t),addPointSize:(t,e=1)=>{if(-1!==t.indexOf("gl_PointSize"))return;const[r,n]=i.c.getParameter(i.c.ALIASED_POINT_SIZE_RANGE);console.log("point size range:",r,n);const o=t.indexOf("gl_Position");return t=t.splice(o,0,`gl_PointSize = ${parseFloat(e).toFixed(1)};\n`)},addVertIn:(t,e,r)=>{const n=t.indexOf("void main"),i=r[0].toUpperCase()+r.slice(1),o=(t=t.splice(n,0,`in ${e} ${r};\n\tout ${e} v${i};\n`)).lastIndexOf("}");return t=t.splice(o-1,0,`\nv${i} = ${r};\n`)}}},function(t,e,r){"use strict";var n=r(0),i=r(22),o=r.n(i);class a{constructor(t,e={},r=!1){if(r)return void(this.texture=t);let i=!!t&&t.length>6;if(t&&t[0].mipmapCount&&(i=t[0].mipmapCount>1),this.texture=n.c.createTexture(),this.magFilter=e.magFilter||n.c.LINEAR,this.minFilter=e.minFilter||n.c.LINEAR_MIPMAP_LINEAR,this.wrapS=e.wrapS||n.c.CLAMP_TO_EDGE,this.wrapT=e.wrapT||n.c.CLAMP_TO_EDGE,i||this.minFilter!=n.c.LINEAR_MIPMAP_LINEAR||(this.minFilter=n.c.LINEAR),null===t)return void this.createTexture(e);n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,this.texture);const o=[n.c.TEXTURE_CUBE_MAP_POSITIVE_X,n.c.TEXTURE_CUBE_MAP_NEGATIVE_X,n.c.TEXTURE_CUBE_MAP_POSITIVE_Y,n.c.TEXTURE_CUBE_MAP_NEGATIVE_Y,n.c.TEXTURE_CUBE_MAP_POSITIVE_Z,n.c.TEXTURE_CUBE_MAP_NEGATIVE_Z];let a=1,s=0;if(a=t.length/6,this.numLevels=a,i)for(let e=0;e<6;e++)for(let r=0;r<a;r++)n.c.pixelStorei(n.c.UNPACK_FLIP_Y_WEBGL,!1),s=e*a+r,t[s].shape?window.useWebgl2?n.c.texImage2D(o[e],r,n.c.RGBA16F,t[s].shape[0],t[s].shape[1],0,n.c.RGBA,n.c.FLOAT,t[s].data):n.c.texImage2D(o[e],r,n.c.RGBA,t[s].shape[0],t[s].shape[1],0,n.c.RGBA,n.c.FLOAT,t[s].data):n.c.texImage2D(o[e],r,n.c.RGBA,n.c.RGBA,n.c.UNSIGNED_BYTE,t[s]),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_S,this.wrapS),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_T,this.wrapT),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MAG_FILTER,this.magFilter),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MIN_FILTER,this.minFilter);else{let e=0;for(let r=0;r<6;r++)e=r*a,n.c.pixelStorei(n.c.UNPACK_FLIP_Y_WEBGL,!1),t[e].shape?window.useWebgl2?n.c.texImage2D(o[r],0,n.c.RGBA16F,t[e].shape[0],t[e].shape[1],0,n.c.RGBA,n.c.FLOAT,t[e].data):n.c.texImage2D(o[r],0,n.c.RGBA,t[e].shape[0],t[e].shape[1],0,n.c.RGBA,n.c.FLOAT,t[e].data):n.c.texImage2D(o[r],0,n.c.RGBA,n.c.RGBA,n.c.UNSIGNED_BYTE,t[e]),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_S,this.wrapS),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_T,this.wrapT),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MAG_FILTER,this.magFilter),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MIN_FILTER,this.minFilter);t[e].shape||n.c.generateMipmap(n.c.TEXTURE_CUBE_MAP)}n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,null)}bind(t=0){n.c.activeTexture(n.c.TEXTURE0+t),n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,this.texture),this._bindIndex=t}unbind(){n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,null)}createTexture(t){n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,this.texture);for(var e=0;e<6;e++)n.c.texImage2D(n.c.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,n.c.RGBA32F,t.width,t.height,0,n.c.RGBA,n.c.FLOAT,null);n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_S,this.wrapS),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_WRAP_T,this.wrapT),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MAG_FILTER,this.magFilter),n.c.texParameteri(n.c.TEXTURE_CUBE_MAP,n.c.TEXTURE_MIN_FILTER,this.minFilter),n.c.generateMipmap(n.c.TEXTURE_CUBE_MAP),n.c.bindTexture(n.c.TEXTURE_CUBE_MAP,null)}}a.parseDDS=function(t){const e=o()(t),{flags:r}=e,n=new Int32Array(t,0,31);let i=1;131072&r&&(i=Math.max(1,n[7]));const s=e.images.map(e=>({data:new Float32Array(t.slice(e.offset,e.offset+e.length)),shape:e.shape,mipmapCount:i}));return new a(s)},e.a=a},function(t,e,r){"use strict";e.a=(t,e)=>new Promise((r,n)=>{const i=new XMLHttpRequest;i.addEventListener("load",t=>{r(i.response)}),i.addEventListener("error",t=>{n(t)}),e&&(i.responseType="arraybuffer"),i.open("GET",t),i.send()})},function(t,e,r){"use strict";e.a="#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n// basic.frag\n\nin vec2 vTexCoord;\nuniform sampler2D texture0;\nuniform bool flipY;\nout vec4 FragColor;\n\nvoid main(void) {\n    if(flipY) FragColor = texture(texture0, vec2(vTexCoord.x, 1.-vTexCoord.y));\n    else FragColor = texture(texture0, vTexCoord);\n}\n"},function(t,e,r){"use strict";r.d(e,"g",(function(){return i})),r.d(e,"f",(function(){return n})),r.d(e,"e",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return c.a}));var n="#version 300 es\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision highp float;\n#define GLSLIFY 1\nin   vec2 vTexCoord;\nin vec3 vPosition;\nuniform samplerCube tex;\nuniform float uGamma;\nuniform float uExposure;\nout vec4 outColor;\n\n// Filmic tonemapping from\n// http://filmicgames.com/archives/75\n\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nvec3 Uncharted2Tonemap( vec3 x )\n{\n\treturn ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\n}\n\nfloat fogFactorExp2(const float dist, const float density) {\n\tconst float LOG2 = -1.442695;\n\tfloat d = density * dist;\n\treturn 1.0 - clamp(exp2(d * d * LOG2), 0.0, 1.0);\n}\n\n#define FOG_DENSITY 0.0005\nconst vec3 fogColor = vec3(254.0/255.0, 242.0/255.0, 226.0/255.0);\n\nfloat contrast(float mValue, float mScale, float mMidPoint) {\n\treturn clamp( (mValue - mMidPoint) * mScale + mMidPoint, 0.0, 1.0);\n}\n\nfloat contrast(float mValue, float mScale) {\n\treturn contrast(mValue,  mScale, .5);\n}\n\nvec3 contrast(vec3 mValue, float mScale, float mMidPoint) {\n\treturn vec3( contrast(mValue.r, mScale, mMidPoint), contrast(mValue.g, mScale, mMidPoint), contrast(mValue.b, mScale, mMidPoint) );\n}\n\nvec3 contrast(vec3 mValue, float mScale) {\n\treturn contrast(mValue, mScale, .5);\n}\n\nvoid main(void){\n    vec3 color = texture(tex, vPosition).rgb;\n\n\t    \n\n    color\t\t\t\t= Uncharted2Tonemap( color * uExposure );\n\t// white balance\n\tcolor\t\t\t\t= color * ( 1.0 / Uncharted2Tonemap( vec3( 20.0 ) ) );\n\t// color = contrast(color, 1.08);\n\n\t// gamma correction\n\tcolor\t\t\t\t= pow( color, vec3( 1.0 / uGamma ) );\n\n    outColor = vec4(color, 1.);\n}\n",i="#version 300 es\n#define SHADER_NAME SKYBOX_VERTEX\nprecision highp float;\n#define GLSLIFY 1\nin vec3 position;\nin vec2 texCoord;\nin vec3 normal;\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nout   vec2 vTexCoord;\nout vec3 vPosition;\nout vec3 vNormal;\n\nvoid main(void){\n    vTexCoord = texCoord;\n    vPosition = position;\n    vNormal = normal;\n    vec4 pos = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n    gl_Position = pos.xyww;\n}\n",o="#version 300 es\n// gltf\n#define SHADER_NAME gltf_frag\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D \tuBRDFMap;\nuniform samplerCube uRadianceMap;\nuniform samplerCube uIrradianceMap;\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D uColorMap;\n#endif\n\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D uMetallicRoughnessMap;\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D uAoMap;\nuniform float uOcclusionStrength;\n#endif\n\n#ifdef HAS_NORMALMAP\nuniform sampler2D uNormalMap;\nuniform float uNormalScale;\n#endif\n\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D uEmissiveMap;\nuniform vec3 uEmissiveFactor;\n#endif\n\n#ifdef ALPHA_MASK\nuniform float uAlphaCutoff;\n#endif\n\nuniform vec3 uLightDirection;\nuniform vec3 uLightColor;\nuniform vec3 uCameraPos;\n\nuniform vec4 uScaleDiffBaseMR;\nuniform vec4 uScaleFGDSpec;\nuniform vec4 uScaleIBLAmbient;\n\nuniform vec3 uBaseColor;\nuniform float uRoughness;\nuniform float uMetallic;\nuniform float uGamma;\n\nin vec2 vTexCoord;\nin vec3 vPosition;\n\n#ifdef HAS_NORMALS\nin vec3 vNormal;\n#endif\n\n#ifdef HAS_COLOR\nin vec3 vColor;\n#endif\n\nout vec4 FragColor;\n\n//\tFrom GLTF WebGL PBR :\n//\thttps://github.com/KhronosGroup/glTF-WebGL-PBR\n\n// Encapsulate the various inputs used by the various functions in the shading equation\n// We store values in this struct to simplify the integration of alternative implementations\n// of the shading terms, outlined in the Readme.MD Appendix.\nstruct PBRInfo\n{\n\tfloat NdotL;                  // cos angle between normal and light direction\n\tfloat NdotV;                  // cos angle between normal and view direction\n\tfloat NdotH;                  // cos angle between normal and half vector\n\tfloat LdotH;                  // cos angle between light direction and half vector\n\tfloat VdotH;                  // cos angle between view direction and half vector\n\tfloat perceptualRoughness;    // roughness value, as authored by the model creator (input to shader)\n\tfloat metalness;              // metallic value at the surface\n\tvec3 reflectance0;            // full reflectance color (normal incidence angle)\n\tvec3 reflectance90;           // reflectance color at grazing angle\n\tfloat alphaRoughness;         // roughness mapped to a more linear change in the roughness (proposed by [2])\n\tvec3 diffuseColor;            // color contribution from diffuse lighting\n\tvec3 specularColor;           // color contribution from specular lighting\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n\t#ifdef MANUAL_SRGB\n\t#ifdef SRGB_FAST_APPROXIMATION\n\tvec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n\t#else //SRGB_FAST_APPROXIMATION\n\tvec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n\tvec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n\t#endif //SRGB_FAST_APPROXIMATION\n\treturn vec4(linOut,srgbIn.w);;\n\t#else //MANUAL_SRGB\n\treturn srgbIn;\n\t#endif //MANUAL_SRGB\n}\n\nvec3 getNormal() {\n\tvec3 pos_dx = dFdx(vPosition);\n\tvec3 pos_dy = dFdy(vPosition);\n\tvec3 tex_dx = dFdx(vec3(vTexCoord, 0.0));\n\tvec3 tex_dy = dFdy(vec3(vTexCoord, 0.0));\n\tvec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n\tvec3 ng = normalize(vNormal);\n#else\n\tvec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n\tt = normalize(t - ng * dot(ng, t));\n\tvec3 b = normalize(cross(ng, t));\n\tmat3 tbn = mat3(t, b, ng);\n\n#ifdef HAS_NORMALMAP\n\tvec3 n = texture(uNormalMap, vTexCoord).rgb;\n\tn = normalize(tbn * ((2.0 * n - 1.0) * vec3(uNormalScale, uNormalScale, 1.0)));\n#else\n\t// The tbn matrix is linearly interpolated, so we need to re-normalize\n\tvec3 n = normalize(tbn[2].xyz);\n#endif\n\n\treturn n;\n}\n\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n\tfloat mipCount = 7.0; // resolution of 512x512\n\tfloat lod = (pbrInputs.perceptualRoughness * mipCount);\n\t// retrieve a scale and bias to F0. See [1], Figure 3\n\tvec2 brdf = SRGBtoLINEAR(texture(uBRDFMap, vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rg;\n\tvec3 diffuseLight = SRGBtoLINEAR(texture(uIrradianceMap, n)).rgb;\n\n\tvec3 specularLight = SRGBtoLINEAR(texture(uRadianceMap, reflection, lod)).rgb;\n\n\tvec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n\tvec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n\n\t// For presentation, this allows us to disable IBL terms\n\tdiffuse *= uScaleIBLAmbient.x;\n\tspecular *= uScaleIBLAmbient.y;\n\n\treturn diffuse + specular;\n}\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n\treturn pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n\treturn pbrInputs.reflectance0 + (pbrInputs.reflectance90 - pbrInputs.reflectance0) * pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n\tfloat NdotL = pbrInputs.NdotL;\n\tfloat NdotV = pbrInputs.NdotV;\n\tfloat r = pbrInputs.alphaRoughness;\n\n\tfloat attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n\tfloat attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n\treturn attenuationL * attenuationV;\n}\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n\tfloat roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n\tfloat f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n\treturn roughnessSq / (M_PI * f * f);\n}\n\nvoid main() {\n\n\tfloat perceptualRoughness   = uRoughness;\n\tfloat metallic              = uMetallic;\n#ifdef HAS_METALROUGHNESSMAP\n\t// Roughness is stored in the 'g' channel, metallic is stored in the 'b' channel.\n\t// This layout intentionally reserves the 'r' channel for (optional) occlusion map data\n\tvec4 mrSample = texture(uMetallicRoughnessMap, vTexCoord);\n\tperceptualRoughness = mrSample.g * perceptualRoughness;\n\tmetallic = mrSample.b * metallic;\n#endif\n\tperceptualRoughness         = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n\tmetallic                    = clamp(metallic, 0.0, 1.0);\n\tfloat alphaRoughness        = perceptualRoughness * perceptualRoughness;\n\n#ifdef HAS_BASECOLORMAP\n\tvec4 baseColor = SRGBtoLINEAR(texture(uColorMap, vTexCoord));\n#elif HAS_COLOR\n\tvec4 baseColor = vec4(vColor, 1.);\n#else \n\tvec4 baseColor = vec4(uBaseColor, 1.0);\n#endif\n\n\tvec3 f0                     = vec3(0.04);\n\tvec3 diffuseColor           = baseColor.rgb * (vec3(1.0) - f0);\n\tdiffuseColor                *= 1.0 - metallic;\n\tvec3 specularColor          = mix(f0, baseColor.rgb, metallic);\n\n\t// Compute reflectance.\n\tfloat reflectance           = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\t// For typical incident reflectance range (between 4% to 100%) set the grazing reflectance to 100% for typical fresnel effect.\n\t// For very low reflectance range on highly diffuse objects (below 4%), incrementally reduce grazing reflecance to 0%.\n\tfloat reflectance90         = clamp(reflectance * 50.0, 0.0, 1.0);\n\tvec3 specularEnvironmentR0  = specularColor.rgb;\n\tvec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n\tvec3 n                      = getNormal();                             // normal at surface point\n\tvec3 v                      = normalize(uCameraPos - vPosition);        // Vector from surface point to camera\n\tvec3 l                      = normalize(-uLightDirection);             // Vector from surface point to light\n\tvec3 h                      = normalize(l+v);                          // Half vector between both l and v\n\tvec3 reflection             = -normalize(reflect(v, n));\n\n\tfloat NdotL                 = clamp(dot(n, l), 0.001, 1.0);\n\tfloat NdotV                 = abs(dot(n, v)) + 0.001;\n\tfloat NdotH                 = clamp(dot(n, h), 0.0, 1.0);\n\tfloat LdotH                 = clamp(dot(l, h), 0.0, 1.0);\n\tfloat VdotH                 = clamp(dot(v, h), 0.0, 1.0);\n\n\tPBRInfo pbrInputs = PBRInfo(\n\t\tNdotL,\n\t\tNdotV,\n\t\tNdotH,\n\t\tLdotH,\n\t\tVdotH,\n\t\tperceptualRoughness,\n\t\tmetallic,\n\t\tspecularEnvironmentR0,\n\t\tspecularEnvironmentR90,\n\t\talphaRoughness,\n\t\tdiffuseColor,\n\t\tspecularColor\n\t);\n\n\t// Calculate the shading terms for the microfacet specular shading model\n\tvec3 F              = specularReflection(pbrInputs);\n\tfloat G             = geometricOcclusion(pbrInputs);\n\tfloat D             = microfacetDistribution(pbrInputs);\n\n\t// Calculation of analytical lighting contribution\n\tvec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n\tvec3 specContrib    = F * G * D / (4.0 * NdotL * NdotV);\n\t// Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\n\tvec3 color          = NdotL * uLightColor * (diffuseContrib + specContrib);\n\n#ifdef USE_IBL\n\tcolor += getIBLContribution(pbrInputs, n, reflection);\n#endif\n\n#ifdef HAS_OCCLUSIONMAP\n\tfloat ao            = texture(uAoMap, vTexCoord).r;\n\tcolor               = mix(color, color * ao, uOcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n\tvec3 emissive = SRGBtoLINEAR(texture(uEmissiveMap, vTexCoord)).rgb * uEmissiveFactor;\n\tcolor += emissive;\n#endif\n\n\t// This section uses mix to override final color for reference app visualization\n\t// of various parameters in the lighting equation.\n\tcolor               = mix(color, F, uScaleFGDSpec.x);\n\tcolor               = mix(color, vec3(G), uScaleFGDSpec.y);\n\tcolor               = mix(color, vec3(D), uScaleFGDSpec.z);\n\tcolor               = mix(color, specContrib, uScaleFGDSpec.w);\n\n\tcolor               = mix(color, diffuseContrib, uScaleDiffBaseMR.x);\n\tcolor               = mix(color, baseColor.rgb, uScaleDiffBaseMR.y);\n\tcolor               = mix(color, vec3(metallic), uScaleDiffBaseMR.z);\n\tcolor               = mix(color, vec3(perceptualRoughness), uScaleDiffBaseMR.w);\n\n#ifdef ALPHA_MASK\n\tif(baseColor.a < uAlphaCutoff) discard;\n\telse baseColor.a = 1.;\n#endif\n\n\t// output the fragment color\n\tFragColor        = vec4(pow(color,vec3(1.0/uGamma)), baseColor.a);\n\n\t//FragColor        = vec4(vec3(baseColor), 1.0);\n\n}\n",a="#version 300 es\n// gltf.vert\n#define SHADER_NAME gltf_vert\n\nprecision highp float;\n#define GLSLIFY 1\nin vec3 position;\n\n#ifdef HAS_UV\nin vec2 texCoord;\n#endif\n\n#ifdef HAS_NORMALS\nin vec3 normal;\nin vec3 aTangent;\n#endif\n\n#ifdef HAS_COLOR\nin vec3 color;\n#endif\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform mat3 uModelViewMatrixInverse;\n\nout vec3 vPosition;\nout vec2 vTexCoord;\nout vec3 vColor;\n\n#ifdef HAS_NORMALS\nout vec3 vNormal;\nout vec3 vTangent;\n#endif\n\nvoid main(void) {\n\tvec4 tPosition = uModelMatrix * vec4(position, 1.0);\n\tvPosition     = tPosition.xyz / tPosition.w;\n\n\t#ifdef HAS_UV\n\tvTexCoord = vec2(texCoord.x, texCoord.y);\n\t#else\n\tvTexCoord = vec2(0.,0.);\n\t#endif\n\n\t#ifdef HAS_NORMALS\n\tvNormal       = normalize(vec3(uModelMatrix * vec4(normal, 0.0)));\n\tvTangent = normalize(vec3(uModelMatrix * vec4(aTangent, 0.0)));\n\t#endif\n\n\t#ifdef HAS_COLOR\n\tvColor = color;\n\t#endif\n\tgl_Position   = uProjectionMatrix * uViewMatrix * tPosition;\n}\n",s="#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nin vec2 position;\nout vec2 vTexCoord;\n\nvoid main(void){\n\n\tgl_Position    = vec4(position, 0., 1.);\n\tvTexCoord = position * .5 + .5;\n}\n",u="#version 300 es\n// basicColor\nprecision highp float;\n#define GLSLIFY 1\nout vec4 FragColor;\nuniform vec3 color;\n\nvoid main()\n{\n    FragColor = vec4(color, 1.0);\n}\n",c=r(8);r(19),r(12)},function(t,e,r){"use strict";r.d(e,"d",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"c",(function(){return f})),r.d(e,"e",(function(){return d})),r.d(e,"b",(function(){return p}));var n=r(2),i=r(1),o=r(4),a=r(0);function s(t,e){let r;const n=[];let o=i.f.create();for(let a=0;a<t.length;a++)r=i.f.fromPoint(t[a]),i.f.transformMat4(o,r,e),n.push([o[0],o[1],o[2]]);return n}class u{constructor(t,e){Object(n.a)(this,"origin",i.e.create()),Object(n.a)(this,"direction",i.e.create()),this.origin=i.e.fromValues(...t),i.e.normalize(this.direction,i.e.fromValues(...e))}}class c{constructor(){}static getMinMax(t){const e=i.e.create(),r=i.e.create();for(let n=0;n<t.length;n++)(t[n][0]>r[0]||!r[0])&&(r[0]=t[n][0]),(t[n][0]<e[0]||!e[0])&&(e[0]=t[n][0]),(t[n][1]>r[1]||!r[1])&&(r[1]=t[n][1]),(t[n][1]<e[1]||!e[1])&&(e[1]=t[n][1]),(t[n][2]>r[2]||!r[2])&&(r[2]=t[n][2]),(t[n][2]<e[2]||!e[2])&&(e[2]=t[n][2]);return{min:e,max:r}}getFrame(){const t=new o.a(a.c.LINE_STRIP,this.name+"-wireframe");return t.bufferFlattenData(this.position,"position",3),t.bufferFlattenData(this.texCoord,"texCoord",2),t.bufferIndex(this.index),t}}class l extends c{constructor(t,e){super(),Object(n.a)(this,"origin",void 0),Object(n.a)(this,"size",void 0),this.origin=t||i.e.create(),this.size=e||i.e.create(),this.name="aabb"}static fromVertices(t,e){e&&(t=s(t,e));const{min:r,max:n}=this.getMinMax(t);return this.fromMinMax(r,n)}static fromMinMax(t,e){return new l([.5*(t[0]+e[0]),.5*(t[1]+e[1]),.5*(t[2]+e[2])],[.5*(e[0]-t[0]),.5*(e[1]-t[1]),.5*(e[2]-t[2])])}get min(){let t,e;t=i.e.create(),e=i.e.create(),t=i.e.add(t,this.origin,this.size),e=i.e.subtract(e,this.origin,this.size);let r=i.e.create();return i.e.min(r,t,e),r}get max(){let t,e;t=i.e.create(),e=i.e.create(),t=i.e.add(t,this.origin,this.size),e=i.e.subtract(e,this.origin,this.size);let r=i.e.create();return i.e.max(r,t,e),r}get position(){const t=[];let e=this.origin,r=this.size;return t.push(e[0]-r[0],e[1]+r[1],e[2]+r[2]),t.push(e[0]-r[0],e[1]-r[1],e[2]+r[2]),t.push(e[0]+r[0],e[1]+r[1],e[2]+r[2]),t.push(e[0]+r[0],e[1]-r[1],e[2]+r[2]),t.push(e[0]+r[0],e[1]+r[1],e[2]-r[2]),t.push(e[0]+r[0],e[1]-r[1],e[2]-r[2]),t.push(e[0]-r[0],e[1]+r[1],e[2]-r[2]),t.push(e[0]-r[0],e[1]-r[1],e[2]-r[2]),t}get index(){return[0,1,2,1,3,2,6,4,7,7,4,5,1,0,6,1,6,7,3,4,2,3,5,4,0,6,4,0,2,4,1,7,5,1,5,3]}get texCoord(){return[0,0,0,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,1,1,1,1,0,1,0,0,1,1,0,1,1,1,0]}}class f extends c{constructor(t,e,r){super(),Object(n.a)(this,"position",void 0),Object(n.a)(this,"size",void 0),Object(n.a)(this,"orientation",void 0),this.position=t||i.e.create(),this.size=e||i.e.create(),this.orientation=r||i.a.create()}}class d extends c{constructor(t,e){super(),Object(n.a)(this,"origin",void 0),Object(n.a)(this,"radius",void 0),this.origin=t||i.e.create(),this.radius=e||1}static fromVertices(t,e){e&&(t=s(t,e));const{min:r,max:n}=this.getMinMax(t);return this.fromMinMax(r,n)}static fromMinMax(t,e){const r=[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2,t[2]+(e[2]-t[2])/2],n=Math.max((e[0]-t[0])/2,(e[1]-t[1])/2,(e[2]-t[2])/2);return new d(r,n)}}class h{constructor(t,e){Object(n.a)(this,"normal",void 0),Object(n.a)(this,"distance",void 0),this.normal=t||i.e.create(),this.distance=e||0}planeEquation(t){return i.e.dot(t,this.normal)-this.distance}}class p{constructor(){Object(n.a)(this,"left",new h),Object(n.a)(this,"right",new h),Object(n.a)(this,"top",new h),Object(n.a)(this,"bottom",new h),Object(n.a)(this,"near",new h),Object(n.a)(this,"far",new h),Object(n.a)(this,"planes",[this.left,this.right,this.bottom,this.top,this.near,this.far])}fromMatrix(t,e){const r=i.b.create();i.b.multiply(r,e,t);const n=i.e.fromValues(r[0],r[4],r[8]),o=i.e.fromValues(r[1],r[5],r[9]),a=i.e.fromValues(r[2],r[6],r[10]),s=i.e.fromValues(r[3],r[7],r[11]);i.e.add(this.left.normal,s,n),i.e.subtract(this.right.normal,s,n),i.e.add(this.bottom.normal,s,o),i.e.subtract(this.top.normal,s,o),i.e.add(this.near.normal,s,a),i.e.subtract(this.far.normal,s,a),this.left.distance=r[15]+r[12],this.right.distance=r[15]-r[12],this.bottom.distance=r[15]+r[13],this.top.distance=r[15]-r[13],this.near.distance=r[15]+r[14],this.far.distance=r[15]-r[14];for(let t=0;t<6;++t){let e=1/i.e.length(this.planes[t].normal);i.e.scale(this.planes[t].normal,this.planes[t].normal,e),this.planes[t].distance*=e}return this}intersectPlanes(){}getCorners(){}}},function(t,e,r){"use strict";var n=r(0),i=r(3),o=r(10),a=r(6),s=r.n(a),u=r(9),c=r(8),l=r(12);const f=(t,e)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},d=t=>t.slice?t.slice(0):new Float32Array(t),h={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},p={FLOAT_VEC2:"uniform2fv",FLOAT_VEC3:"uniform3fv",FLOAT_VEC4:"uniform4fv",FLOAT_MAT3:"uniformMatrix3fv",FLOAT_MAT4:"uniformMatrix4fv"};e.a=class{constructor(t=c.a,e=l.a,r={}){this.parameters=[],this._uniformTextures=[],this._varyings=r.varyings,this.pointSize=r.pointSize,this._replaces=r.replaces,t||(t=c.a),e||(e=c.a),this._name=e.split("//")[1],this._name=this._name?this.name.split("\n")[0]:"",t=this._modify(t);const n=this._createShaderProgram(t,!0),i=this._createShaderProgram(e,!1);this._attachShaderProgram(n,i)}_modify(t){if(this.pointSize&&(t=u.a.addPointSize(t,this.pointSize)),this._varyings&&!this._varyings.length)for(let e in this._varyings)t=u.a.addVertIn(t,e,this._varyings[e]);return this.replaces,t}use(){this.bind()}bind(){n.a.shader!==this&&(n.c.useProgram(this.shaderProgram),n.a.useShader(this))}uniform(t,e,r){if("object"==typeof t)return void this.uniformObject(t);const i="float"==e&&r.length?"uniform1fv":h[e]||e;let o,a=!1,s=-1;for(let e=0;e<this.parameters.length;e++)if(o=this.parameters[e],o.name===t){a=!0,s=e;break}let u=!1;const c=n.a.customUniforms;if(a?(this.shaderProgram[t]=o.uniformLoc,u=o.isNumber):(u="uniform1i"===i||"uniform1f"===i,this.shaderProgram[t]=n.c.getUniformLocation(this.shaderProgram,t),this.shaderProgram[t]||c.includes(t)||console.log(this.shaderProgram[t],t,this._name),u?this.parameters.push({name:t,type:i,value:r,uniformLoc:this.shaderProgram[t],isNumber:u}):this.parameters.push({name:t,type:i,value:d(r),uniformLoc:this.shaderProgram[t],isNumber:u}),s=this.parameters.length-1),this.parameters[s].uniformLoc)if(-1===i.indexOf("Matrix"))if(u){(this.parameters[s].value!==r||!a)&&(n.c[i](this.shaderProgram[t],r),this.parameters[s].value=r)}else f(this.parameters[s].value,r)&&a||(n.c[i](this.shaderProgram[t],r),this.parameters[s].value=d(r));else f(this.parameters[s].value,r)&&a||(n.c[i](this.shaderProgram[t],!1,r),this.parameters[s].value=d(r))}style(t){this.uniformObject(t)}uniformObject(t){for(const e in t)if(void 0!==t[e]&&"function"!=typeof t[e]||console.error("uniform: ",e,"undefined or function"),t[e]instanceof i.a||t[e]instanceof o.a){const r=t[e];let n=-1;this._uniformTextures.forEach((t,i)=>{t.name===e&&(n=i,t.texture=r)}),-1===n&&(n=this._uniformTextures.length,this._uniformTextures.push({name:e,texture:r})),this.uniform(e,"uniform1i",n),r.bind(n)}else if(t[e]instanceof Object&&!t[e].includes)console.error("uniform: ",e,"is a  object");else{let r=t[e];const n=this.getUniformType(r,e);if(r.concat&&r[0].concat){let t=[];for(let e=0;e<r.length;e++)t=t.concat(r[e]);r=t}this.uniform(e,n,r)}}_createShaderProgram(t,e){const r=e?n.c.VERTEX_SHADER:n.c.FRAGMENT_SHADER,i=n.c.createShader(r);return n.c.shaderSource(i,t),n.c.compileShader(i),n.c.getShaderParameter(i,n.c.COMPILE_STATUS)?i:(console.warn("Error in Shader : ",n.c.getShaderInfoLog(i)),console.log((t=>{const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=`${t+1}: ${e[t]}`;return e.join("\n")})(t)),null)}_attachShaderProgram(t,e){this.shaderProgram=n.c.createProgram(),n.c.attachShader(this.shaderProgram,t),n.c.attachShader(this.shaderProgram,e),n.c.deleteShader(t),n.c.deleteShader(e),this._varyings&&this._varyings.length&&(console.log("Transform feedback setup : ",this._varyings),n.c.transformFeedbackVaryings(this.shaderProgram,this._varyings,n.c.SEPARATE_ATTRIBS)),n.c.linkProgram(this.shaderProgram)}get name(){return this._name}getUniformType(t,e){return Array.isArray(t)||t.includes?t[0].concat?this.getArrayUniformType(t[0],e):this.getArrayUniformType(t,e):"float"}getArrayUniformType(t,e){if(9===t.length)return"uniformMatrix3fv";if(16===t.length)return"uniformMatrix4fv";if(t.length<=4)return"vec"+t.length;if(12===t.length)return"uniform3fv";{const t=n.c.getUniformIndices(this.shaderProgram,[e]),r=n.c.getActiveUniforms(this.shaderProgram,t,n.c.UNIFORM_TYPE);return r||console.error(r),p[s.a[r[0]]]}}}},function(t,e,r){var n=r(27),i=r(20),o=r(39),a=function(){};function s(t,e,r){if("function"!=typeof(e=e||a))return Promise.reject(new Error("The second argument to load.all() and load.any() must be a function, or undefined"));var n,i,o=0,s=function(t,r,i,o){var a={target:t,total:n,count:i,progress:i/n,value:r};o&&(a.error=o),e(a)};if(i=r?function(t){return u(t).then((function(t){return{value:t}}),(function(t){return{value:null,error:t}})).then((function(e){return s(t,e.value,++o,e.error),e.value}))}:function(t){return u(t).then((function(e){return s(t,e,++o),e}))},Array.isArray(t))return n=t.length,Promise.all(t.map((function(t){return i(t)})));if(t){var c=Object.keys(t).map((function(e){return{key:e,value:t[e]}}));return n=c.length,Promise.all(c.map((function(t){var e=t.key;return i(t.value).then((function(t){return{value:t,key:e}}))}))).then((function(t){return t.reduce((function(t,e){return t[e.key]=e.value,t}),{})}))}return Promise.reject(new Error("You must specify an array of assets or object group to load"))}function u(t){return t?("string"==typeof t&&(t={url:t}),o(t)?t:function(t){var e,r,i=t.type?t.type:null;if(i){if("function"==typeof i)return Promise.resolve(i);if(i=i.toLowerCase(),!t.url)return Promise.reject(new Error("When using loadAsset(), you must specify a URL or descriptor of the asset to load"));for(e=0;e<n.length;e++)if((r=n[e]).key===i)return Promise.resolve(r.load);return Promise.reject(new Error('Could not find an asset loader by the key "'+t.type+'"'))}if(!t.url)return Promise.reject(new Error("When using loadAsset(), you must specify a URL or descriptor of the asset to load"));var o=function(t){if(!t)return"";var e=t.lastIndexOf("/");-1!==e&&(t=t.substring(e+1));-1!==(e=t.indexOf("?"))&&(t=t.substring(0,e));-1!==(e=t.indexOf("#"))&&(t=t.substring(0,e));return-1!==(e=t.lastIndexOf("."))?t.substring(e):""}(t.url);if(!o)return Promise.reject(new Error('No extension found for input URL "'+t.url+'", try to specify a { type } such as "image" or "text"'));for(e=0;e<n.length;e++){if((r=n[e]).match)if("function"==typeof r.match?r.match(o):r.match.test(o))return Promise.resolve(r.load)}return Promise.reject(new Error('Could not infer an asset loader from the file type "'+o+'", try specifying { type } such as "image" or "text"'))}(t).then((function(e){return delete(t=i({},t)).type,e(t)}))):Promise.reject(new Error("You must specify a URL or descriptor of the asset to load"))}t.exports=u,t.exports.all=function(t,e){return s(t,e,!1)},t.exports.any=function(t,e){return s(t,e,!0)}},function(t,e,r){"use strict";let n=window,i=60,o=performance.now(),a=0,s=0,u=o;const c=[],l=[],f=[],d=[];let h=[],p=[],m=-1,_=0;function E(){!function(){let t,e=0,r=1e3/i,n=0;for(e=0;e<c.length;e++)t=c[e],null!=t&&t.func(t.args);for(;h.length>0;)t=h.pop(),t.func(t.args);let m=performance.now();for(s=(m-o)/1e3,a=m-u,e=0;e<l.length;e++)t=l[e],m-t.time>t.delay&&(t.func(t.args),l.splice(e,1));for(m=performance.now();f.length>0;){if(t=f.shift(),n=performance.now(),!(n-m<r)){f.unshift(t);break}t.func(t.args)}for(m=performance.now();d.length>0;)t=d.shift(),n=performance.now(),n-m<r&&t.func(t.args);u=m,h=h.concat(p),p=[]}(),m=n.requestAnimationFrame(E)}E();var b={addEF:function(t,e){const r=++_;return c[r]={func:t,args:e},r},removeEF:function(t){return void 0!==c[t]&&(c[t]=null),-1},delay:function(t,e,r){const n=performance.now();l.push({func:t,args:e,delay:r,time:n})},next:function(t,e){p.push({func:t,args:e})},defer:function(t,e){f.push({func:t,args:e})},usurp:function(t,e){d.push({func:t,args:e})},setRequestAnimationFrameSource:function t(e){console.log("setRequestAnimationFrameSource",t,m),m>-1&&window.cancelAnimationFrame(m),n=e,E()},setFrameRate:function(t){i=t},getElapsedTime:function(){return s},getDeltaTime:function(){return a}};e.a=b},function(t,e,r){"use strict";var n=r(2),i=r(11),o=r(4);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}class u{constructor(){Object(n.a)(this,"object",null),Object(n.a)(this,"objectList",[]),Object(n.a)(this,"meshes",[]),Object(n.a)(this,"materialLibraries",[])}load(t,e,r,n=4){this._drawType=n,Object(i.a)(t).then(t=>{e(t)},t=>{r(t)})}_onLoaded(){this.parseObj(this._req.response)}parseObj(t,e){this.materials=e;const r=t.split("\n"),n=[],i=[],o=[];let a;const s=/^[og]\s*(.+)?/,u=/^mtllib /,c=/^usemtl /,l=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,f=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,d=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,h=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,p=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,m=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,_=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function E(t){const e=parseInt(t);return 3*(e>=0?e-1:e+n.length/3)}function b(t){const e=parseInt(t);return 3*(e>=0?e-1:e+i.length/3)}function g(t){const e=parseInt(t);return 2*(e>=0?e-1:e+o.length/2)}const v=(t,e,r)=>{this.object||this._startObject(1),this.object.positions.push([n[t],n[t+1],n[t+2]]),this.object.positions.push([n[e],n[e+1],n[e+2]]),this.object.positions.push([n[r],n[r+1],n[r+2]]),this.object.indices.push(3*this.object.count+0),this.object.indices.push(3*this.object.count+1),this.object.indices.push(3*this.object.count+2),this.object.count++},T=(t,e,r)=>{this.object.coords.push([o[t],o[t+1]]),this.object.coords.push([o[e],o[e+1]]),this.object.coords.push([o[r],o[r+1]])},M=(t,e,r)=>{this.object.finalNormals.push([i[t],i[t+1],i[t+2]]),this.object.finalNormals.push([i[e],i[e+1],i[e+2]]),this.object.finalNormals.push([i[r],i[r+1],i[r+2]])};function y(t,e,r,n,i,o,a,s,u,c,l,f){let d,h=E(t),p=E(e),m=E(r);void 0===n?v(h,p,m):(d=E(n),v(h,p,d),v(p,m,d)),void 0!==i&&(h=g(i),p=g(o),m=g(a),void 0===n?T(h,p,m):(d=g(s),T(h,p,d),T(p,m,d))),void 0!==u&&(h=b(u),p=b(c),m=b(l),void 0===n?M(h,p,m):(d=b(f),M(h,p,d),M(p,m,d)))}for(let t=0;t<r.length;t++){let e=r[t];if(e=e.trim(),0===e.length||"#"===e.charAt(0))continue;e.charAt(0);if(u.test(e))this.materialLibraries.push(e.substring(7).trim());else if(c.test(e))this._startMaterial(e.substring(7).trim(),this.materialLibraries);else if(null!==(a=s.exec(e))){let t=(" "+a[0].substr(1).trim()).substr(1);this._startObject(t)}else null!==(a=l.exec(e))?n.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])):null!==(a=f.exec(e))?i.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])):null!==(a=d.exec(e))?o.push(parseFloat(a[1]),parseFloat(a[2])):null!==(a=h.exec(e))?y(a[1],a[2],a[3],a[4]):null!==(a=p.exec(e))?y(a[2],a[5],a[8],a[11],a[3],a[6],a[9],a[12]):null!==(a=m.exec(e))?y(a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15],a[4],a[8],a[12],a[16]):null!==(a=_.exec(e))&&y(a[2],a[5],a[8],a[11],void 0,void 0,void 0,void 0,a[3],a[6],a[9],a[12])}return this._generateMeshes()}_startObject(t){-1===function(t,e,r){if(!t||!t.length)return-1;for(let n=0;n<t.length;n++)if(t[n][e]===r)return n;return-1}(this.objectList,"name",t)&&(this.object={name:t,positions:[],coords:[],finalNormals:[],indices:[],count:0},this.objectList.push(this.object))}_startMaterial(t,e){let r={name:t,mtlLib:e[e.length-1]};this.object.material=r}_generateMeshes(){let t;for(let e=0;e<this.objectList.length;e++){t={positions:this.objectList[e].positions,coords:this.objectList[e].coords,indices:this.objectList[e].indices,normals:this.objectList[e].finalNormals,name:this.objectList[e].name,material:this.materials?s(s({},this.materials[this.objectList[e].material.name]),{},{mtlLib:this.objectList[e].material.mtlLib}):this.objectList[e].material};const r=t.normals.length>0,n=t.coords.length>0;let i=new o.a(this._drawType,t.name,t.material);i.bufferVertex(t.positions),n&&i.bufferTexCoord(t.coords),i.bufferIndex(t.indices),r&&i.bufferNormal(t.normals),this._callback&&this._callback(i,t),this.meshes.push(i)}return this.meshes}}u.parse=function(t,e){return(new u).parseObj(t,e)},e.a=u},function(t,e,r){"use strict";e.a="#version 300 es\n// basic2d.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nin vec3 position;\nin vec2 texCoord;\nin vec3 normal;\n\nuniform mat4 mMatrix;\n\nout vec2 vTexCoord;\nout vec3 vNormal;\n\nvoid main(void) {\n    gl_Position =  mMatrix * vec4(position, 1.0);\n    vTexCoord = texCoord;\n    vNormal = normal;\n}\n"},function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,u=a(t),c=1;c<arguments.length;c++){for(var l in r=Object(arguments[c]))i.call(r,l)&&(u[l]=r[l]);if(n){s=n(r);for(var f=0;f<s.length;f++)o.call(r,s[f])&&(u[s[f]]=r[s[f]])}}return u}},function(t,e,r){"use strict";var n=r(11);const i=t=>new Promise((e,r)=>{const n=new Image;n.onload=function(){e(this)},n.onerror=function(){r("Image not found : "+t)},n.src=t});var o=t=>Promise.all(t.map(i)),a=r(9);class s{constructor(t,e,r={},n={},i=!1){this.doubleSided=i;const o=a.a.get(t,e,n);this._shader=o.glShader,this._vs=o.vs,this._fs=o.fs,this.uniforms=Object.assign({},r)}update(){this._shader.bind(),this._shader.uniform(this.uniforms)}get shader(){return this._shader}get vs(){return this._vs}get fs(){return this._fs}}var u=r(4),c=r(13),l=r(3),f=r(7);const d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},h={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},p={NORMAL:"normal",POSITION:"position",TANGENT:"aTangent",TEXCOORD_0:"texCoord",WEIGHTS_0:"aWeight",JOINTS_0:"aJoint",COLOR_0:"color"};let m;const _=t=>new Promise((e,r)=>{const{nodes:n,scenes:i}=t,o=e=>{const r=n[e],i=void 0===r.mesh?new f.a:t.output.meshes[r.mesh];return i.name=i.name||r.name||"",r.scale&&(i.scaleX=r.scale[0],i.scaleY=r.scale[1],i.scaleZ=r.scale[2]),r.rotation&&i.setRotationFromQuaternion(r.rotation),r.translation&&(i.x=r.translation[0],i.y=r.translation[1],i.z=r.translation[2]),r.children&&r.children.forEach(t=>{const e=o(t);i.addChild(e)}),r.matrix&&(i.originalMatrix=r.matrix),i};t.output.scenes=i.map(t=>{const e=new f.a;return t.nodes.forEach(t=>{const r=o(t);e.addChild(r)}),e}),e(t)}),E=t=>new Promise((e,r)=>{const{meshes:n}=t;n.forEach(e=>{const{primitives:r}=e,n={};r.forEach(r=>{const i=Object.keys(r.attributes);let o={};if(i.forEach(e=>{const i=r.attributes[e],a=t.accessors[i],s=p[e];if(!s)return;"NORMAL"===e&&(o.HAS_NORMALS=1),e.indexOf("COLOR")>-1&&(o.HAS_COLOR=1),e.indexOf("TEXCOORD")>-1&&(o.HAS_UV=1);const u=h[a.type];let c=A(t,i);c instanceof Uint32Array&&(c=new Float32Array(c)),"TEXCOORD_1"===e&&console.log(u,c),"POSITION"===e&&(r.max=a.max,r.min=a.min),n[s]={value:c,size:u}}),null!=r.indices){const e=A(t,r.indices,!0);n.indices={value:e,size:1}}const a=new u.a(r.mode,e.name);a.vertexMin=r.min,a.vertexMax=r.max;for(const t in n){const e=n[t];"indices"!==t?a.bufferFlattenData(e.value,t,e.size):a.bufferIndex(e.value)}const l=t.output.materialInfo[r.material];o=Object.assign(o,l.defines);const{alphaCutoff:f,doubleSided:d,emissiveFactor:m,emissiveTexture:_,normalTexture:E,occlusionTexture:b,pbrMetallicRoughness:g}=l,{baseColorTexture:v,metallicRoughnessTexture:T}=g,M={uAlphaCutoff:f||0,uEmissiveFactor:m||[0,0,0],uBaseColor:g.baseColorFactor||[1,1,1,1],uRoughness:g.roughnessFactor||1,uMetallic:g.metallicFactor||1,uScaleDiffBaseMR:[0,0,0,0],uScaleFGDSpec:[0,0,0,0],uScaleIBLAmbient:[1,1,1,1],uLightDirection:[1,1,1],uLightColor:[1,1,1],uGamma:1};v&&(M.uColorMap=v.glTexture),T&&(M.uMetallicRoughnessMap=T.glTexture),E&&(M.uNormalScale=E.scale||1,M.uNormalMap=E.glTexture),b&&(M.uAoMap=b.glTexture,M.uOcclusionStrength=b.strength||1),_&&(M.uEmissiveMap=_.glTexture);const y=new s(c.e,c.d,M,o,d);a.setMaterial(y),t.output.meshes.push(a)})}),e(t)}),b=t=>new Promise((e,r)=>{const{bufferViews:n,buffers:i}=t;n.forEach((t,e)=>{const r=i[t.buffer].data;t.data=r.slice(t.byteOffset||0,(t.byteOffset||0)+(t.byteLength||0))}),e(t)}),g=t=>new Promise((e,r)=>{"string"!=typeof t?e(t):Object(n.a)(t).then(t=>{const r=JSON.parse(t);r.output={meshes:[],scenes:[],textures:[],material:[],materialInfo:[]},e(r)},t=>{r(t)})}),v=t=>new Promise((e,r)=>{if(t.buffers){let i=t.buffers.length;t.buffers.forEach(o=>{const a=`${m}${t.buffers[0].uri}`;Object(n.a)(a,!0).then(r=>{o.data=r,i--,0===i&&e(t)},t=>{r(t)})})}else e(t)}),T=t=>new Promise((e,r)=>{const{textures:n,images:i,samplers:a}=t;if(!i)return void e(t);const s=i.map(t=>`${m}${t.uri}`);o(s).then(r=>{t.output.textures=r.map((t,e)=>{const r=Object.assign({},a?a[n[e].sampler]:{});return new l.a(t,r)}),e(t)},t=>{r(t)})}),M=t=>new Promise((e,r)=>{const{materials:n}=t,{textures:i}=t.output;t.output.materialInfo=n.map(t=>(t.defines={USE_IBL:1,ALPHA_MASK:"MASK"==t.alphaMode?1:0},t.normalTexture&&(t.defines.HAS_NORMALMAP=1,t.normalTexture.glTexture=i[t.normalTexture.index]),t.occlusionTexture&&(t.defines.HAS_OCCLUSIONMAP=1,t.occlusionTexture.glTexture=i[t.occlusionTexture.index]),t.emissiveTexture&&(t.defines.HAS_EMISSIVEMAP=1,t.emissiveTexture.glTexture=i[t.emissiveTexture.index]),t.pbrMetallicRoughness.baseColorTexture&&(t.defines.HAS_BASECOLORMAP=1,t.pbrMetallicRoughness.baseColorTexture.glTexture=i[t.pbrMetallicRoughness.baseColorTexture.index]),t.pbrMetallicRoughness.metallicRoughnessTexture&&(t.defines.HAS_METALROUGHNESSMAP=1,t.pbrMetallicRoughness.metallicRoughnessTexture.glTexture=i[t.pbrMetallicRoughness.metallicRoughnessTexture.index]),t)),e(t)}),y=t=>new Promise((e,r)=>{const{nodes:n,animations:i}=t,o=t.meshes,{meshes:a}=t.output;i?(i.forEach(e=>{const{samplers:r}=e;e.channels.forEach(e=>{const{node:i,path:s}=e.target,u=n[i].mesh,c=o[u],l=a[u],f=r[e.sampler],{input:d,output:h,interpolation:p}=f,m=A(t,d),_=A(t,h);if("weights"===s){const e=[],r=[],{primitives:n}=c,i=c.weights.length;for(let t=0;t<_.length/i;t++){const r=[];for(let e=0;e<i;e++)r.push(_[t*i+e]);e.push(r)}const{targets:o}=n[u];o.forEach(e=>{const n=A(t,e.POSITION);r.push(l.formBuffer(n,3))});const a=t=>t.map(t=>Array.isArray(t)?a(t):t),s=a(l.vertices);l.animate=x(l,s,r,e,m,p)}})}),e(t)):e(t)}),x=(t,e,r,n,i,o)=>function(){t.startTime||(t.startTime=performance.now());const a=i[i.length-1]-i[0],s=(performance.now()-t.startTime)/1e3*t.animateSpeed%a,u=[];for(let t=0;t<i.length;t++)if(s<=i[t]){if("LINEAR"==o){const e=(s-i[t-1])/(i[t]-i[t-1]);for(let r=0;r<n[0].length;r++){const i=n[t][r]-(0==t?0:n[t-1][r]);u[r]=0===i?n[t][r]:e*i+n[t-1][r]}}break}const c=t.vertices.map((t,n)=>{const i=[0,0,0];for(let t=0;t<u.length;t++)0!==u[t]&&(i[0]+=u[t]*r[t][n][0],i[1]+=u[t]*r[t][n][1],i[2]+=u[t]*r[t][n][2]);return vec3.add(t,e[n],i),t});t.bufferVertex(c)},A=(t,e,r=!1)=>{const n=t.accessors[e],i=t.bufferViews[n.bufferView].data,o=n.byteOffset||0,a=d[n.componentType]||Float32Array;let s=h[n.type];null==s&&r&&(s=1);let u=new a(i,o,s*n.count);const c=n.extensions&&n.extensions.WEB3D_quantized_attributes;if(c){const t=new Float32Array(s*n.count),e=c.decodeMatrix,r=new Array(s),i=new Array(s);for(let t=0;t<s;t++)r[t]=e[s*(s+1)+t],i[t]=e[t*(s+1)+t];for(let e=0;e<n.count;e++)for(let n=0;n<s;n++)t[e*s+n]=u[e*s+n]*i[n]+r[n];u=t}return u};e.a={load:t=>new Promise((e,r)=>{m="string"==typeof t?t.substring(0,t.lastIndexOf("/")+1):"",g(t).then(v).then(T).then(b).then(M).then(E).then(_).then(y).then(t=>{e(t)}).catch(t=>{console.log("Error:",t)})}),parse:(t,e)=>new Promise((t,e)=>{t(mSource)})}},function(t,e){var r=a("DXT1"),n=a("DXT3"),i=a("DXT5"),o=a("DX10");function a(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}t.exports=function(t){var e,a,s=new Int32Array(t,0,31);if(542327876!==s[0])throw new Error("Invalid magic number in DDS header");if(4&!s[20])throw new Error("Unsupported format, must contain a FourCC code");var u=s[21];switch(u){case r:e=8,a="dxt1";break;case n:e=16,a="dxt3";break;case i:e=16,a="dxt5";break;case 116:a="rgba32f";break;case o:var c=new Uint32Array(t.slice(128,148));a=c[0];var l=c[1];c[2],c[3],c[4];if(3!==l||2!==a)throw new Error("Unsupported DX10 texture format "+a);a="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+(f=u,String.fromCharCode(255&f,f>>8&255,f>>16&255,f>>24&255)))}var f;var d=s[2],h=1;131072&d&&(h=Math.max(1,s[7]));var p=!1;512&s[28]&&(p=!0);var m,_=s[4],E=s[3],b=s[1]+4,g=_,v=E,T=[];u===o&&(b+=20);if(p)for(var M=0;M<6;M++){if("rgba32f"!==a)throw new Error("Only RGBA32f cubemaps are supported");_=g,E=v;for(var y=Math.log(_)/Math.log(2)+1,x=0;x<y;x++)m=_*E*16,T.push({offset:b,length:m,shape:[_,E]}),x<h&&(b+=m),_=Math.floor(_/2),E=Math.floor(E/2)}else for(x=0;x<h;x++)m=Math.max(4,_)/4*Math.max(4,E)/4*e,T.push({offset:b,length:m,shape:[_,E]}),b+=m,_=Math.floor(_/2),E=Math.floor(E/2);return{shape:[g,v],images:T,format:a,flags:d,cubemap:p}}},,,,function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new y(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return A()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=v(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function h(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,_=m&&m(m(x([])));_&&_!==e&&r.call(_,i)&&(p=_);var E=h.prototype=f.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function v(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,v(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function x(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=E.constructor=h,h.constructor=d,d.displayName=s(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,a,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},b(g.prototype),g.prototype[o]=function(){return this},t.AsyncIterator=g,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new g(u(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(E),s(E,a,"Generator"),E[i]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,y.prototype={constructor:y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){const n=r(28),i=r(31),o=r(38);t.exports=[{key:"json",match:/\.json$/i,load:i("json")},{key:"text",match:/\.txt$/i,load:i("text")},{key:"image",match:/\.(jpg|jpeg|svg|png|gif|webp|bmp|tga|tif|apng|wbpm|ico)$/i,load:o},n("audio",(function(){return new window.Audio})),n("video",(function(){return document.createElement("video")})),{key:"binary",match:/\.bin$/i,load:i("binary")},{key:"blob",load:i("blob")}]},function(t,e,r){var n=r(29);t.exports=function(t,e){return{key:t,match:function(e){return function(t){var e=n(t);return e?0===e.indexOf("audio")?"audio":0===e.indexOf("video")?"video":null:null}(e)===t},load:function(r){return new Promise((function(n,i){var o=!1,a=e(),s=function(){o||(o=!0,n(a))},u=(r.event||"canplay").toLowerCase();if("loadedmetadata"===u?a.onloadedmetadata=s:"canplaythrough"===u?a.oncanplaythrough=s:"loadeddata"===u?a.onloadeddata=s:a.oncanplay=s,a.onerror=function(e){o||(o=!0,i(new Error("Error while loading "+t+" at "+r.url)))},r.crossOrigin&&(a.crossOrigin=r.crossOrigin),void 0!==r.volume&&(a.volume=r.volume),void 0!==r.preload&&(a.preload=r.volume),void 0!==r.playbackRate&&(a.playbackRate=r.volume),void 0!==r.muted&&(a.muted=r.volume),void 0!==r.currentTime&&(a.currentTime=r.volume),void 0!==r.controls&&(a.controls=r.volume),void 0!==r.autoPlay&&(a.autoPlay=r.volume),a.src=r.url,a.readyState>=a.HAVE_ENOUGH_DATA)return o=!0,n(a);a.load()}))}}}},function(t,e,r){var n=r(30),i={};Object.keys(n).forEach((function(t){n[t].forEach((function(e){i[e]=t}))})),t.exports=function(t){if(!t)throw new TypeError("must specify extension string");return 0===t.indexOf(".")&&(t=t.substring(1)),i[t.toLowerCase()]}},function(t){t.exports=JSON.parse('{"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a","m4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/webm":["weba"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/wav":["wav"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"]}')},function(t,e,r){var n=r(32),i=r(20);t.exports=function(t){return function(e){return("fetch"in window?window.fetch(e.url,e).then((function(e){if(/404/.test(e.status))throw new Error("Resource not found");if(!/^2/.test(e.status))throw new Error("Unexpected HTTP Status Code: "+e.status);if(!e.ok)throw new Error("Response not OK");return"json"===t?e.json():"binary"===t?e.arrayBuffer():"blob"===t?e.blob():e.text()})):function(t,e){return new Promise((function(r,o){var a="text";"json"===t?a="text":"binary"===t?a="arraybuffer":"blob"===t&&(a="blob"),e=i({},e,{json:!1,responseType:a}),n(e,(function(e,n,i){if(e)return o(e);if(/404/.test(n.statusCode))throw new Error("Resource not found");if(!/^2/.test(n.statusCode))return o(new Error("Unexpected HTTP Status Code: "+n.statusCode));if("json"===t)try{i=JSON.parse(i)}catch(e){return o(e)}r(i)}))}))}(t,e)).catch((function(t){throw new Error(t.message+" while loading file "+e.url)}))}}},function(t,e,r){"use strict";var n=r(33),i=r(35),o=r(36),a=r(37);function s(t,e,r){var n=t;return i(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=a(e,{uri:t}),n.callback=r,n}function u(t,e,r){return c(e=s(t,e,r))}function c(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,r=function(r,n,i){e||(e=!0,t.callback(r,n,i))};function n(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(l),E)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(f),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,r(t,b)}function a(){if(!c){var e;clearTimeout(f),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=b,a=null;return 0!==e?(i={body:n(),statusCode:e,method:h,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(i.headers=o(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),r(a,i,i.body)}}var s,c,l=t.xhr||null;l||(l=t.cors||t.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var f,d=l.url=t.uri||t.url,h=l.method=t.method||"GET",p=t.body||t.data,m=l.headers=t.headers||{},_=!!t.sync,E=!1,b={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:l};if("json"in t&&!1!==t.json&&(E=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=i,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=i,l.open(h,d,!_,t.username,t.password),_||(l.withCredentials=!!t.withCredentials),!_&&t.timeout>0&&(f=setTimeout((function(){if(!c){c=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)}}),t.timeout)),l.setRequestHeader)for(s in m)m.hasOwnProperty(s)&&l.setRequestHeader(s,m[s]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(p||null),l}t.exports=u,t.exports.default=u,u.XMLHttpRequest=n.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:n.XDomainRequest,function(t,e){for(var r=0;r<t.length;r++)e(t[r])}(["get","put","post","patch","head","delete"],(function(t){u["delete"===t?"del":t]=function(e,r,n){return(r=s(e,r,n)).method=t.toUpperCase(),c(r)}}))},function(t,e,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,r(34))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){if(!t)return!1;var e=r.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var r=Object.prototype.toString},function(t,e){var r=function(t){return t.replace(/^\s+|\s+$/g,"")};t.exports=function(t){if(!t)return{};for(var e,n={},i=r(t).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),u=r(a.slice(0,s)).toLowerCase(),c=r(a.slice(s+1));void 0===n[u]?n[u]=c:(e=n[u],"[object Array]"===Object.prototype.toString.call(e)?n[u].push(c):n[u]=[n[u],c])}return n}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t};var r=Object.prototype.hasOwnProperty},function(t,e){t.exports=function(t){return new Promise((function(e,r){var n=!1,i=new window.Image;i.onload=function(){n||(n=!0,e(i))},i.onerror=function(){n||(n=!0,r(new Error("Error while loading image at "+t.url)))},t.crossOrigin&&(i.crossOrigin=t.crossOrigin),i.src=t.url}))}},function(t,e){function r(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}t.exports=r,t.exports.default=r},function(t,e){console.logMatrix=function(t){const e=t.length;if(arguments.length>1)Array.prototype.forEach.call(arguments,t=>{console.logMatrix(t)});else switch(e){case 9:console.log(`\n${t[0]} ${t[3]} ${t[6]} \n${t[1]} ${t[4]} ${t[7]}\n${t[2]} ${t[5]} ${t[8]}\n            `);break;case 16:console.log(`\n${t[0]} ${t[4]} ${t[8]} ${t[12]}\n${t[1]} ${t[5]} ${t[9]} ${t[13]}\n${t[2]} ${t[6]} ${t[10]} ${t[14]}\n${t[3]} ${t[7]} ${t[11]} ${t[15]}\n            `)}};let r=!1;console.logOnce=function(t){r||(Array.prototype.forEach.call(arguments,t=>{console.log(t)}),r=!0)},console.logFrames=function(){}},function(t,e,r){"use strict";r.r(e);var n=r(5),i=r.n(n),o=r(16),a=r.n(o),s=r(2);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){Object(s.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const l={addCustom:function(t,e){const r=Array.prototype.slice.call(arguments,1),n=t.includes("/")?t.split("/")[1]:"models"==t?e.split(".")[0]:t;this[n]={},r.forEach(e=>{const r=e.split(".")[1],i=`./assets/${t}/${e}`,o=e.split(".")[0];switch(r){case"gltf":case"obj":case"mtl":this[n][o]={url:i,type:"text"};break;case"hdr":case"dds":this[n][o]={url:i,type:"binary"};break;default:this[n][o]=i}})},addCubemap:function(t,e,r){},materialMaps:{cubeDiffuse:"./assets/cubeDiffuse.png",cubeSpecular:"./assets/cubeSpecular.png",cubeEmission:"./assets/cubeEmission.jpg"},ballMaps:{goldAlbedo:"./assets/pbr/gold/albedo.png",goldMetallic:"./assets/pbr/gold/metallic.png",goldAo:"./assets/pbr/gold/ao.png",goldNormal:"./assets/pbr/gold/normal.png",goldRoughness:"./assets/pbr/gold/roughness.png",grassAlbedo:"./assets/pbr/grass/albedo.png",grassMetallic:"./assets/pbr/grass/metallic.png",grassAo:"./assets/pbr/grass/ao.png",grassNormal:"./assets/pbr/grass/normal.png",grassRoughness:"./assets/pbr/grass/roughness.png",plasticAlbedo:"./assets/pbr/plastic/albedo.png",plasticMetallic:"./assets/pbr/plastic/metallic.png",plasticAo:"./assets/pbr/plastic/ao.png",plasticNormal:"./assets/pbr/plastic/normal.png",plasticRoughness:"./assets/pbr/plastic/roughness.png",wallAlbedo:"./assets/pbr/wall/albedo.png",wallMetallic:"./assets/pbr/wall/metallic.png",wallAo:"./assets/pbr/wall/ao.png",wallNormal:"./assets/pbr/wall/normal.png",wallRoughness:"./assets/pbr/wall/roughness.png",rusted_ironAlbedo:"./assets/pbr/rusted_iron/albedo.png",rusted_ironMetallic:"./assets/pbr/rusted_iron/metallic.png",rusted_ironAo:"./assets/pbr/rusted_iron/ao.png",rusted_ironNormal:"./assets/pbr/rusted_iron/normal.png",rusted_ironRoughness:"./assets/pbr/rusted_iron/roughness.png",woodAlbedo:"./assets/pbr/wood/albedo.png",woodMetallic:"./assets/pbr/wood/metallic.png",woodAo:"./assets/pbr/wood/ao.png",woodNormal:"./assets/pbr/wood/normal.png",woodRoughness:"./assets/pbr/wood/roughness.png"},hdrSkybox:{equirectangular:{url:"./assets/hdr/newport_loft.hdr",type:"binary"}},iblMaps:{outputiemPosX:{url:"./assets/pbrflow/output_iem_posx.hdr",type:"binary"},outputiemPosY:{url:"./assets/pbrflow/output_iem_posy.hdr",type:"binary"},outputiemPosZ:{url:"./assets/pbrflow/output_iem_posz.hdr",type:"binary"},outputiemNegX:{url:"./assets/pbrflow/output_iem_negx.hdr",type:"binary"},outputiemNegY:{url:"./assets/pbrflow/output_iem_negy.hdr",type:"binary"},outputiemNegZ:{url:"./assets/pbrflow/output_iem_negz.hdr",type:"binary"},radiance:{url:"./assets/pbrflow/output_radiance.dds",type:"binary"}},orb:{orb:{url:"./assets/models/lte_orb/testObj.obj",type:"text"}},nanosuit:{nanosuit:{url:"./assets/models/nanosuit/nanosuit.obj",type:"text"},nanosuitMTL:{url:"./assets/models/nanosuit/nanosuit.mtl",type:"text"}},brickwall:{brickwall:{url:"./assets/brickwall.jpg"},brickwallNormal:{url:"./assets/brickwall_normal.jpg"}},bricks2:{bricks2:{url:"./assets/bricks2.jpg"},bricks2Normal:{url:"./assets/bricks2_normal.jpg"},bricks2Disp:{url:"./assets/bricks2_disp.jpg"}},toyBox:{toyBox:{url:"./assets/toy_box.png"},toyBoxNormal:{url:"./assets/toy_box_normal.png"},toyBoxDisp:{url:"./assets/toy_box_disp.png"}},dimSkybox:{dimskyboxPosX:{url:"./assets/skybox/dim_skybox_posx.hdr",type:"binary"},dimskyboxPosY:{url:"./assets/skybox/dim_skybox_posy.hdr",type:"binary"},dimskyboxPosZ:{url:"./assets/skybox/dim_skybox_posz.hdr",type:"binary"},dimskyboxNegX:{url:"./assets/skybox/dim_skybox_negx.hdr",type:"binary"},dimskyboxNegY:{url:"./assets/skybox/dim_skybox_negy.hdr",type:"binary"},dimskyboxNegZ:{url:"./assets/skybox/dim_skybox_negz.hdr",type:"binary"}},skybox:{outputskyboxPosX:{url:"./assets/skybox/output_skybox_posx.hdr",type:"binary"},outputskyboxPosY:{url:"./assets/skybox/output_skybox_posy.hdr",type:"binary"},outputskyboxPosZ:{url:"./assets/skybox/output_skybox_posz.hdr",type:"binary"},outputskyboxNegX:{url:"./assets/skybox/output_skybox_negx.hdr",type:"binary"},outputskyboxNegY:{url:"./assets/skybox/output_skybox_negy.hdr",type:"binary"},outputskyboxNegZ:{url:"./assets/skybox/output_skybox_negz.hdr",type:"binary"}},skyboxLake:{skyboxlakePosX:{url:"./assets/skybox/skybox_lake_posx.jpg"},skyboxlakePosY:{url:"./assets/skybox/skybox_lake_posy.jpg"},skyboxlakePosZ:{url:"./assets/skybox/skybox_lake_posz.jpg"},skyboxlakeNegX:{url:"./assets/skybox/skybox_lake_negx.jpg"},skyboxlakeNegY:{url:"./assets/skybox/skybox_lake_negy.jpg"},skyboxlakeNegZ:{url:"./assets/skybox/skybox_lake_negz.jpg"}},statue:{statue:{url:"./assets/models/statue/statue.obj",type:"text"},statueAo:{url:"./assets/models/statue/statueAo.png"},statueTexture:{url:"./assets/models/statue/texture.jpg"}},gltf:{albedo:{url:"assets/img/albedo.jpg",type:"image"},ao:{url:"assets/img/ao.jpg",type:"image"},brdfLUT:{url:"assets/img/brdfLUT.png",type:"image"},metalGloss:{url:"assets/img/metalGloss.jpg",type:"image"},normal:{url:"assets/img/normal.jpg",type:"image"},pisa_irradiance:{url:"assets/img/pisa_irradiance.dds",type:"binary"},pisa_radiance:{url:"assets/img/pisa_radiance.dds",type:"binary"},studio10_irradiance:{url:"assets/img/studio10_irradiance.dds",type:"binary"},studio10_radiance:{url:"assets/img/studio10_radiance.dds",type:"binary"},studio11_irradiance:{url:"assets/img/studio11_irradiance.dds",type:"binary"},studio11_radiance:{url:"assets/img/studio11_radiance.dds",type:"binary"},studio12_irradiance:{url:"assets/img/studio12_irradiance.dds",type:"binary"},studio12_radiance:{url:"assets/img/studio12_radiance.dds",type:"binary"},studio1_irradiance:{url:"assets/img/studio1_irradiance.dds",type:"binary"},studio1_radiance:{url:"assets/img/studio1_radiance.dds",type:"binary"},studio2_irradiance:{url:"assets/img/studio2_irradiance.dds",type:"binary"},studio2_radiance:{url:"assets/img/studio2_radiance.dds",type:"binary"},studio3_irradiance:{url:"assets/img/studio3_irradiance.dds",type:"binary"},studio3_radiance:{url:"assets/img/studio3_radiance.dds",type:"binary"},studio4_irradiance:{url:"assets/img/studio4_irradiance.dds",type:"binary"},studio4_radiance:{url:"assets/img/studio4_radiance.dds",type:"binary"},studio5_irradiance:{url:"assets/img/studio5_irradiance.dds",type:"binary"},studio5_radiance:{url:"assets/img/studio5_radiance.dds",type:"binary"},studio6_irradiance:{url:"assets/img/studio6_irradiance.dds",type:"binary"},studio6_radiance:{url:"assets/img/studio6_radiance.dds",type:"binary"},studio7_irradiance:{url:"assets/img/studio7_irradiance.dds",type:"binary"},studio7_radiance:{url:"assets/img/studio7_radiance.dds",type:"binary"},studio8_irradiance:{url:"assets/img/studio8_irradiance.dds",type:"binary"},studio8_radiance:{url:"assets/img/studio8_radiance.dds",type:"binary"},studio9_irradiance:{url:"assets/img/studio9_irradiance.dds",type:"binary"},studio9_radiance:{url:"assets/img/studio9_radiance.dds",type:"binary"},vatican_irradiance:{url:"assets/img/vatican_irradiance.dds",type:"binary"},vatican_radiance:{url:"assets/img/vatican_radiance.dds",type:"binary"}},refraction:{irrPosX:{url:"./assets/pbrflow/refraction/irr_posx.hdr",type:"binary"},irrPosY:{url:"./assets/pbrflow/refraction/irr_posy.hdr",type:"binary"},irrPosZ:{url:"./assets/pbrflow/refraction/irr_posz.hdr",type:"binary"},irrNegX:{url:"./assets/pbrflow/refraction/irr_negx.hdr",type:"binary"},irrNegY:{url:"./assets/pbrflow/refraction/irr_negy.hdr",type:"binary"},irrNegZ:{url:"./assets/pbrflow/refraction/irr_negz.hdr",type:"binary"},radPosX:{url:"./assets/pbrflow/refraction/rad_posx.hdr",type:"binary"},radPosY:{url:"./assets/pbrflow/refraction/rad_posy.hdr",type:"binary"},radPosZ:{url:"./assets/pbrflow/refraction/rad_posz.hdr",type:"binary"},radNegX:{url:"./assets/pbrflow/refraction/rad_negx.hdr",type:"binary"},radNegY:{url:"./assets/pbrflow/refraction/rad_negy.hdr",type:"binary"},radNegZ:{url:"./assets/pbrflow/refraction/rad_negz.hdr",type:"binary"}},mountain:{irrPosX:{url:"./assets/pbrflow/mountain/irr_posx.hdr",type:"binary"},irrPosY:{url:"./assets/pbrflow/mountain/irr_posy.hdr",type:"binary"},irrPosZ:{url:"./assets/pbrflow/mountain/irr_posz.hdr",type:"binary"},irrNegX:{url:"./assets/pbrflow/mountain/irr_negx.hdr",type:"binary"},irrNegY:{url:"./assets/pbrflow/mountain/irr_negy.hdr",type:"binary"},irrNegZ:{url:"./assets/pbrflow/mountain/irr_negz.hdr",type:"binary"},radiance:{url:"./assets/pbrflow/mountain/studio_radiance.dds",type:"binary"}}};l.addCustom("water","terrain.jpg","dudvMap.png","normalMap.png","matchingNormalMap.png"),l.addCustom("grass","grass.png","grass1.png","grass2.png","grass3.png","grass4.png"),l.addCustom("animate/horse","horse.gltf"),l.addCustom("models/terrain","aoTerrain.jpg","terrain.obj"),l.addCustom("models/venus","aoVenus.jpg","venus.obj"),l.addCustom("models","petal.obj");var f={Reflection:c(c({},l.statue),l.venus),LightCaster:c({},l.materialMaps),Material:c(c({},l.nanosuit),l.petal),NormalMapping:c({},l.brickwall),HeightMapping:c({},l.bricks2),ReliefMapping:c({},l.toyBox),Pbr:c(c({},l.ballMaps),l.orb),Ibldiffuse:c({},l.hdrSkybox),iblfinal:c({},l.hdrSkybox),DeferredShading:c({},l.nanosuit),Ssao:c({},l.nanosuit),EnvMapping:c(c(c({},l.venus),l.statue),l.refraction),Gltf:c(c({},l.skybox),l.gltf),Bloom:c(c({},l.statue),l.venus),Water:c(c({},l.water),l.dimSkybox),Grass:c(c(c({},l.grass),l.horse),l.gltf),Mountain:c(c(c({},l.gltf),l.terrain),l.mountain),FrustumCulling:c({},l.statue),Petal:c({},l.petal)},d=r(3),h=r(10);var p=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=0;const r=t.length;function n(){let n="";do{const r=t[e];if(10===r){++e;break}n+=String.fromCharCode(r)}while(++e<r);return n}let i=0,o=0,a=1,s=!1;for(let t=0;t<20;t++){const t=n();let e;if(e=t.match("#\\?RADIANCE"));else if(e=t.match("FORMAT=32-bit_rle_rgbe"))s=!0;else if(e=t.match("EXPOSURE=\\s*([0-9]*[.][0-9]*)"))a=Number(e[1]);else if(e=t.match("#.*"));else if(e=t.match("-Y ([0-9]+) \\+X ([0-9]+)")){o=Number(e[1]),i=Number(e[2]);break}}if(!s)throw new Error("File is not run length encoded!");const u=new Uint8Array(i*o*4);!function(t,e,r,n,i,o){const a=new Array(4);let s,u,c,l=null;const f=new Array(2),d=t.length;function h(e){let r=0;do{e[r++]=t[n]}while(++n<d&&r<e.length);return r}function p(e,r,i){let o=0;do{e[r+o++]=t[n]}while(++n<d&&o<i);return o}function m(t,e,r,n){const i=4*n,o=p(e,r,i);if(o<i)throw new Error(`Error reading raw pixels: got ${o} bytes, expected ${i}`)}for(;o>0;){if(h(a)<a.length)throw new Error("Error reading bytes: expected "+a.length);if(2!==a[0]||2!==a[1]||0!=(128&a[2]))return e[r++]=a[0],e[r++]=a[1],e[r++]=a[2],e[r++]=a[3],void m(0,e,r,i*o-1);if(((255&a[2])<<8|255&a[3])!==i)throw new Error(`Wrong scanline width ${(255&a[2])<<8|255&a[3]}, expected ${i}`);null===l&&(l=new Array(4*i)),s=0;for(let t=0;t<4;t++)for(u=(t+1)*i;s<u;){if(h(f)<f.length)throw new Error("Error reading 2-byte buffer");if((255&f[0])>128){if(c=(255&f[0])-128,0===c||c>u-s)throw new Error("Bad scanline data");for(;c-- >0;)l[s++]=f[1]}else{if(c=255&f[0],0===c||c>u-s)throw new Error("Bad scanline data");if(l[s++]=f[1],--c>0){if(p(l,s,c)<c)throw new Error("Error reading non-run data");s+=c}}}for(let t=0;t<i;t++)e[r+0]=l[t],e[r+1]=l[t+i],e[r+2]=l[t+2*i],e[r+3]=l[t+3*i],r+=4;o--}}(t,u,0,e,i,o);const c=new Float32Array(i*o*4);for(let t=0;t<u.length;t+=4){let e=u[t+0]/255,r=u[t+1]/255,n=u[t+2]/255;const i=u[t+3],o=Math.pow(2,i-128);e*=o,r*=o,n*=o;const a=t;c[a+0]=e,c[a+1]=r,c[a+2]=n,c[a+3]=1}return{shape:[i,o],exposure:a,gamma:1,data:c}},m=r(18),_=r(21);const E=function(t){const e=t.split(".");return e[e.length-1]};function b(t,e){var r,n,o,a,s,u,c,l,f,b,v;return i.a.async((function(T){for(;;)switch(T.prev=T.next){case 0:r={},n={},u={},T.t0=i.a.keys(t);case 4:if((T.t1=T.t0()).done){T.next=51;break}c=T.t1.value,l=t[c].url||t[c],f=e[c],b=E(l),T.t2=b,T.next="jpg"===T.t2?12:"png"===T.t2?22:"hdr"===T.t2?25:"dds"===T.t2?36:"obj"===T.t2?39:"gltf"===T.t2?42:47;break;case 12:if(!(l.split("_").length<=2)){T.next=16;break}return o=new d.a(f),n[c]=o,T.abrupt("break",49);case 16:return a=l.split("_")[0].split("/"),s=a[a.length-1]+(l.split("_").length>2?l.split("_")[1]:""),u[s]||(u[s]=[]),u[s].push(f),n[c]=f,T.abrupt("break",49);case 22:return o=new d.a(f),n[c]=o,T.abrupt("break",49);case 25:if(l.includes("pos")||l.includes("neg")){T.next=29;break}return o=new d.a(f),n[c]=o,T.abrupt("break",49);case 29:return a=l.split("_")[0].split("/"),s=a[a.length-1]+(l.split("_").length>2?l.split("_")[1]:""),o=p(f),r[s]||(r[s]=[]),r[s].push(o),n[c]=o,T.abrupt("break",49);case 36:return o=h.a.parseDDS(f),n[c]=o,T.abrupt("break",49);case 39:return v=m.a.parse(f),n[c]=1==v.length?v[0]:v,T.abrupt("break",49);case 42:return T.next=44,i.a.awrap(_.a.load(l));case 44:return T.t3=T.sent,n[c]={gltfInfo:T.t3},T.abrupt("break",49);case 47:return n[c]=f,T.abrupt("break",49);case 49:T.next=4;break;case 51:return g(r,n),g(u,n),T.abrupt("return",n);case 54:case"end":return T.stop()}}),null,null,null,Promise)}const g=(t,e)=>{for(let r in t)if(6==t[r].length){const t=[e[r+"PosX"],e[r+"NegX"],e[r+"PosY"],e[r+"NegY"],e[r+"PosZ"],e[r+"NegZ"]],n=new h.a(t);e[r]=n}};r(40);var v=r(0);const T={wood:"./assets/wood.jpg",flower:"./assets/flower.png",nightSky:"./assets/sky/nightSky.jpg"},M=location.search.replace("?","");for(let t in f)M.split("/")[1]===t&&Object.assign(T,f[t]);const y=document.querySelector(".progress"),x=document.querySelector(".progressBar");var A;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(a.a.any(T,({progress:t,error:e})=>{M&&(y.style.opacity=1,x.innerHTML="Loading..."+(100*t).toFixed()+"%",1==t&&setTimeout(()=>{y.style.opacity=0,v.b.style.opacity=1},1e3),e&&console.error(e))}));case 2:return A=t.sent,t.next=5,i.a.awrap(b(T,A));case 5:window.getAssets=t.sent,r.e(41).then(r.bind(null,111));case 7:case"end":return t.stop()}}),null,null,null,Promise)}]);