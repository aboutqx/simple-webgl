(window.webpackJsonp=window.webpackJsonp||[]).push([[13,20,21],{41:function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return l});var r=i(2),s=i(5),n=i(7),a=i(67),h=i.n(a),o=i(68),u=i.n(o),f=i(6),c=i(1),d=i(0);class l extends s.default{constructor(){super(),Object(r.a)(this,"count",0)}init(){this.prg=this.compile(h.a,u.a)}attrib(){let{pos:t,index:e,normal:i,color:r}=Object(f.Torus)(32,32,.5,2);this.posBuffer=new n.a(d.d,new Float32Array(t)),this.normalBuffer=new n.a(d.d,new Float32Array(i)),this.colorBuffer=new n.a(d.d,new Float32Array(r)),this.prg.use(),this.posBuffer.attrib("position",3,d.d.FLOAT),this.posBuffer.attribPointer(this.prg),this.normalBuffer.attrib("normal",3,d.d.FLOAT),this.normalBuffer.attribPointer(this.prg),this.colorBuffer.attrib("color",4,d.d.FLOAT),this.colorBuffer.attribPointer(this.prg),this.indexBuffer=new n.b(d.d,d.d.UNSIGNED_SHORT,new Uint16Array(e),d.d.STATIC_DRAW)}prepare(){}uniform(){let t=this.camera.viewMatrix,e=c.a.identity(c.a.create());this.mvpMatrix=c.a.identity(c.a.create()),this.tmpMatrix=c.a.identity(c.a.create()),c.a.perspective(e,Object(d.e)(45),d.a.clientWidth/d.a.clientHeight,.1,100),c.a.multiply(this.tmpMatrix,e,t);let i=c.a.identity(c.a.create());this.count,Math.PI;c.a.rotate(i,i,2*Math.PI/9,[0,1,0]),c.a.translate(i,i,[0,0,-10]),c.a.multiply(this.mvpMatrix,this.tmpMatrix,i);let r=c.a.identity(c.a.create());c.a.invert(r,i),this.prg.use(),this.prg.style({mvpMatrix:this.mvpMatrix,invMatrix:r,lightDirection:[-.5,.5,.5],eyeDirection:[0,0,20],ambientColor:[.1,.1,.1,1]})}render(){d.d.clearColor(.3,.3,.3,1),d.d.clearDepth(1),d.d.clear(d.d.COLOR_BUFFER_BIT|d.d.DEPTH_BUFFER_BIT),d.d.enable(d.d.DEPTH_TEST),d.d.depthFunc(d.d.LEQUAL),d.d.enable(d.d.CULL_FACE),this.prg.use(),this.indexBuffer.bind(),this.indexBuffer.drawTriangles()}}},5:function(t,e,i){"use strict";i.r(e);var r=i(2),s=0;function n(t,e,i,r){this.gl=t,this.program=t.createProgram(),this.vShader=t.createShader(t.VERTEX_SHADER),this.fShader=t.createShader(t.FRAGMENT_SHADER),this.dyns=[],this.uniforms=[],this.ready=!1,t.attachShader(this.program,this.vShader),t.attachShader(this.program,this.fShader),this._uid=0|s++,this._cuid=0|s++,void 0!==e&&void 0!==i&&this.compile(e,i,r),this.unAssigned=[],this.prevTime=0}function a(t){console.warn(t)}n.debug=!0,n.prototype={use:function(){this.ready||this._grabParameters(),this.gl.useProgram(this.program)},style:function(t,e){if("{}"!==JSON.stringify(t)||0!==this.uniforms.length){if("{}"===JSON.stringify(t)&&this.uniforms.length>0)throw new Error("active uniform not assigned:"+this.uniforms);for(let e in t)"function"==typeof this[e]&&this[e](t[e]);this.unAssigned=this.unAssigned.filter(e=>{let i=!1;for(let r in t)r===e&&(i=!0);return!i}),Date.now()-this.prevTime<62500&&0===this.unAssigned.length&&null!==this.timer&&(clearTimeout(this.timer),this.timer=null),0!==this.unAssigned.length&&void 0===e&&(this.timer=setTimeout(()=>{if(this.unAssigned.length>0)throw new Error("active uniform not assigned: "+this.unAssigned)},1/16)),this.prevTime=Date.now()}},compile:function(t,e,i){this.ready=!1,i=i||"";var r=this.gl;if(!u(r,this.fShader,i+e)||!u(r,this.vShader,i+t))return!1;if(r.linkProgram(this.program),n.debug&&!r.getProgramParameter(this.program,r.LINK_STATUS))return a(r.getProgramInfoLog(this.program)),!1;for(;this.dyns.length>0;)delete this[this.dyns.pop()];return this._cuid=0|s++,!0},dispose:function(){null!==this.gl&&(this.gl.deleteProgram(this.program),this.gl.deleteShader(this.fShader),this.gl.deleteShader(this.vShader),this.gl=null)},_grabParameters:function(){for(var t=this.gl,e=this.program,i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r={texIndex:0},s=0;s<i;++s){var n=t.getActiveUniform(e,s);if(null!==n){var a=n.name,h=a.indexOf("[");h>=0&&(a=a.substring(0,h));var o=t.getUniformLocation(e,n.name);this[a]=d(n.type,o,t,r),this.dyns.push(a),this.uniforms.push(a),this.unAssigned.push(a)}else t.getError()}for(var u=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),f=0;f<u;++f){var c=t.getActiveAttrib(e,f).name,p=t.getAttribLocation(e,c);this[c]=l(p),this.dyns.push(c)}this.ready=!0}},n.prototype.bind=n.prototype.use;var h=["","   ","  "," ",""];function o(t,e){return h[String(e+1).length]+(e+1)+": "+t}function u(t,e,i){return t.shaderSource(e,i),t.compileShader(e),!(n.debug&&!t.getShaderParameter(e,t.COMPILE_STATUS))||(a(t.getShaderInfoLog(e)),a(function(t){return t.split("\n").map(o).join("\n")}(i)),!1)}var f={};function c(t){return t=String(t),"uniform"+f[t]}function d(t,e,i,r){switch(t){case i.FLOAT_MAT2:case i.FLOAT_MAT3:case i.FLOAT_MAT4:return function(t,e,i,r){var s=c(t);return function(){if(arguments.length>0&&void 0!==arguments[0].length){var t=arguments.length>1&&!!arguments[1];i[s+"v"](e,t,arguments[0])}return e}}(t,e,i);case i.SAMPLER_2D:case i.SAMPLER_CUBE:return function(t,e,i,r){var s=r.texIndex++;return function(){return 1===arguments.length&&(void 0!==arguments[0].bind?(arguments[0].bind(s),i.uniform1i(e,s)):i.uniform1i(e,arguments[0])),e}}(0,e,i,r);default:return function(t,e,i,r){var s=c(t);return function(){return 1===arguments.length&&void 0!==arguments[0].length?i[s+"v"](e,arguments[0]):arguments.length>0&&i[s].apply(i,Array.prototype.concat.apply(e,arguments)),e}}(t,e,i)}}function l(t){return function(){return t}}f[5126]="1f",f[35664]="2f",f[35665]="3f",f[35666]="4f",f[35670]=f[5124]=f[35678]=f[35680]="1i",f[35671]=f[35667]="2i",f[35672]=f[35668]="3i",f[35673]=f[35669]="4i",f[35674]="Matrix2f",f[35675]="Matrix3f",f[35676]="Matrix4f";var p=n,g=i(1),m=i(0);const v=function(t,e,i){const r=e||{};return t.touches&&!i?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):t.touches?t.touches&&i&&(r.x=t.touches[1].pageX,r.y=t.touches[1].pageY):(r.x=t.clientX,r.y=t.clientY),r},b=1e-4;class _{constructor(t=[0,0,0],e=[0,1,0]){Object(r.a)(this,"cameraPos",void 0),Object(r.a)(this,"up",void 0),Object(r.a)(this,"cameraFront",[0,0,-1]),Object(r.a)(this,"_mouse",{}),Object(r.a)(this,"_preMouse",{}),Object(r.a)(this,"_mousedown",!1),Object(r.a)(this,"_rx",0),Object(r.a)(this,"_ry",0),Object(r.a)(this,"_preRx",0),Object(r.a)(this,"_preRy",0),Object(r.a)(this,"_targetRx",0),Object(r.a)(this,"_targetRy",0),Object(r.a)(this,"_tmp",g.a.identity(g.a.create())),Object(r.a)(this,"_width",m.a.width),Object(r.a)(this,"_height",m.a.height),Object(r.a)(this,"sensitivity",1),Object(r.a)(this,"target",[0,0,0]),Object(r.a)(this,"offset",[0,0,0]),Object(r.a)(this,"radius",5),Object(r.a)(this,"_targetRadius",5),Object(r.a)(this,"_updateWheel",!1),this.cameraPos=t,this.up=e,this._addEvents()}_addEvents(){m.a.addEventListener("mousedown",t=>this._down(t)),m.a.addEventListener("mousemove",t=>this._move(t)),document.addEventListener("mouseup",t=>this._up(t)),m.a.addEventListener("mousewheel",t=>this._onWheel(t)),m.a.addEventListener("DOMMouseScroll",t=>this._onWheel(t))}_down(t){this._mousedown=!0,v(t,this._mouse),v(t,this._preMouse),this._preRx=this._targetRx,this._preRy=this._targetRy}_move(t){if(this._mousedown){v(t,this._mouse);let e=(this._mouse.x-this._preMouse.x)/this._width,i=(this._mouse.y-this._preMouse.y)/this._height;this._targetRx=this._preRx+e*Math.PI*2*this.sensitivity,this._targetRy=this._preRy+i*Math.PI*this.sensitivity}}_up(t){this._mousedown=!1}updateMatrix(){this._rx+=.1*(this._targetRx-this._rx),Math.abs(this._targetRx-this._rx)<b&&(this._rx=this._targetRx),this._ry+=.1*(this._targetRy-this._ry),Math.abs(this._targetRy-this._ry)<b&&(this._ry=this._targetRy),this._updateWheel&&(this.radius+=.1*(this._targetRadius-this.radius),Math.abs(this._targetRadius-this.radius)<b&&(this.radius=this._targetRadius)),this.cameraPos[1]=Math.sin(this._ry)*this.radius;let t=Math.abs(Math.cos(this._ry)*this.radius);this.cameraPos[0]=Math.cos(this._rx+.5*Math.PI)*t,this.cameraPos[2]=Math.sin(this._rx+.5*Math.PI)*t,this.cameraPos=[this.cameraPos[0]+this.offset[0],this.cameraPos[1]+this.offset[1],this.cameraPos[2]+this.offset[2]],g.a.lookAt(this._tmp,this.cameraPos,this.target,this.up)}_onWheel(t){const e=t.wheelDelta,i=t.detail;let r=0;r=i?e?e/i/40*i>0?1:-1:-i/3:e/120,this._targetRadius=this.radius+2*-r,this._targetRadius<=1&&(this._targetRadius=1),this._updateWheel=!0}get viewMatrix(){return this._tmp}set rx(t){this._targetRx=t}}var y=i(36);i.d(e,"default",function(){return M});class M{constructor(){Object(r.a)(this,"rotateQ",g.b.create()),Object(r.a)(this,"camera",new _),Object(r.a)(this,"_params",{}),Object(r.a)(this,"gui",new y.a({width:300})),this.init(),this.attrib(),this.prepare(),this._setGUI(),this._animate=this.animate.bind(this)}init(){}compile(t,e){let i=new p(m.d);return i.compile(t,e),i}attrib(){}uniform(){}prepare(){}animate(){requestAnimationFrame(this._animate),this.camera.updateMatrix(),this.uniform(),this.render()}render(){}play(){this.animate()}_setGUI(){}addGUIParams(t){return Object.assign(this._params,t)}get params(){return this._params}set params(t){throw Error("Params has no setter,please use addGUIParams")}}},6:function(t,e,i){"use strict";function r(t,e,i,r,n){let a,h=[],o=[],u=[],f=[];for(let o=0;o<=t;o++){let c=2*Math.PI/t*o,d=Math.cos(c),l=Math.sin(c);for(let t=0;t<=e;t++){let o=2*Math.PI/e*t,c=(d*i+r)*Math.cos(o),p=l*i,g=(d*i+r)*Math.sin(o);h.push(c,p,g),a=n||s(360/e*t,1,1,1),f.push(a[0],a[1],a[2],a[3]);let m=d*Math.cos(o),v=d*Math.sin(o);u.push(m,l,v)}}for(let i=0;i<t;i++)for(let t=0;t<e;t++){let r=(e+1)*i+t;o.push(r,r+e+1,r+1),o.push(r+e+1,r+e+2,r+1)}return{pos:h,index:o,normal:u,color:f}}function s(t,e,i,r){if(e>1||i>1||r>1)return;let s=t%360,n=Math.floor(s/60),a=s/60-n,h=i*(1-e),o=i*(1-e*a),u=i*(1-e*(1-a)),f=[];if(!e>0&&!e<0)f.push(i,i,i,r);else{let t=[i,o,h,h,u,i],e=[u,i,i,o,h,h],s=[h,h,u,i,i,o];f.push(t[n],e[n],s[n],r)}return f}function n(t,e,i,r){for(var n=[],a=[],h=[],o=[],u=[],f=0;f<=t;f++)for(var c=Math.PI/t*f,d=Math.cos(c),l=Math.sin(c),p=0;p<=e;p++){var g=2*Math.PI/e*p,m=l*i*Math.cos(g),v=d*i,b=l*i*Math.sin(g),_=l*Math.cos(g),y=l*Math.sin(g);if(r)var M=r;else M=s(360/t*f,1,1,1);n.push(m,v,b),a.push(_,d,y),h.push(M[0],M[1],M[2],M[3]),o.push(1-1/e*p,1/t*f)}for(c=0,f=0;f<t;f++)for(p=0;p<e;p++)c=(e+1)*f+p,u.push(c,c+1,c+e+2),u.push(c,c+e+2,c+e+1);return{pos:n,normal:a,color:h,uv:o,index:u}}function a(t,e,i){const r=t/2,s=i/2;return[r,e,s,0,1,0,1,0,-r,e,-s,0,1,0,0,1,-r,e,s,0,1,0,0,0,r,e,s,0,1,0,1,0,r,e,-s,0,1,0,1,1,-r,e,-s,0,1,0,0,1]}i.r(e),i.d(e,"Torus",function(){return r}),i.d(e,"hsva",function(){return s}),i.d(e,"Sphere",function(){return n}),i.d(e,"plane",function(){return a}),i.d(e,"QuadData",function(){return h}),i.d(e,"CubeData",function(){return o});const h=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0],o=[-1,-1,-1,0,0,-1,0,0,1,1,-1,0,0,-1,1,1,1,-1,-1,0,0,-1,1,0,1,1,-1,0,0,-1,1,1,-1,-1,-1,0,0,-1,0,0,-1,1,-1,0,0,-1,0,1,-1,-1,1,0,0,1,0,0,1,-1,1,0,0,1,1,0,1,1,1,0,0,1,1,1,1,1,1,0,0,1,1,1,-1,1,1,0,0,1,0,1,-1,-1,1,0,0,1,0,0,-1,1,1,-1,0,0,1,0,-1,1,-1,-1,0,0,1,1,-1,-1,-1,-1,0,0,0,1,-1,-1,-1,-1,0,0,0,1,-1,-1,1,-1,0,0,0,0,-1,1,1,-1,0,0,1,0,1,1,1,1,0,0,1,0,1,-1,-1,1,0,0,0,1,1,1,-1,1,0,0,1,1,1,-1,-1,1,0,0,0,1,1,1,1,1,0,0,1,0,1,-1,1,1,0,0,0,0,-1,-1,-1,0,-1,0,0,1,1,-1,-1,0,-1,0,1,1,1,-1,1,0,-1,0,1,0,1,-1,1,0,-1,0,1,0,-1,-1,1,0,-1,0,0,0,-1,-1,-1,0,-1,0,0,1,-1,1,-1,0,1,0,0,1,1,1,1,0,1,0,1,0,1,1,-1,0,1,0,1,1,1,1,1,0,1,0,1,0,-1,1,-1,0,1,0,0,1,-1,1,1,0,1,0,0,0]},67:function(t,e){t.exports="#version 300 es\n#define GLSLIFY 1\n// 漫射光diffuse不考虑视线\n// 通过取光和眼睛的半矢量和normal的内积来确定反射光的强度\nin vec3 position;\nin vec3 normal;\nin vec4 color;\nuniform   mat4 mvpMatrix;\nout   vec3 vNormal;\nout   vec4 vColor;\n\nvoid main(void){\n    vNormal     = normal;\n    vColor      = color;\n    gl_Position = mvpMatrix * vec4(position, 1.0);\n}\n"},68:function(t,e){t.exports="#version 300 es\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 invMatrix;\nuniform vec3 lightDirection;\nuniform vec3 eyeDirection;\nuniform vec4 ambientColor;\nin vec3 vNormal;\nin vec4 vColor;\nout vec4 FragColor;\n\nvoid main(void){\n    vec3  invLight  = normalize(invMatrix * vec4(lightDirection, 0.0)).xyz;\n    vec3  invEye    = normalize(invMatrix * vec4(eyeDirection, 0.0)).xyz;\n    vec3  halfLE    = normalize(invLight + invEye);\n    float diffuse   = clamp(dot(vNormal, invLight), 0.0, 1.0);\n    float specular  = pow(clamp(dot(vNormal, halfLE), 0.0, 1.0), 50.0);\n    vec4  destColor = vColor * vec4(vec3(diffuse), 1.0) + vec4(vec3(specular), 1.0) + ambientColor;\n    FragColor    = destColor;\n}\n"},7:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return h});var r=function(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return 0}},s=function(t){t.drawPoints=function(t,e){this.draw(0,t,e)},t.drawLines=function(t,e){this.draw(1,t,e)},t.drawLineLoop=function(t,e){this.draw(2,t,e)},t.drawLineStrip=function(t,e){this.draw(3,t,e)},t.drawTriangles=function(t,e){this.draw(4,t,e)},t.drawTriangleStrip=function(t,e){this.draw(5,t,e)},t.drawTriangleFan=function(t,e){this.draw(6,t,e)}},n=34962;function a(t,e,i){this.gl=t,this.usage=i||t.STATIC_DRAW,this.buffer=t.createBuffer(),this.attribs=[],this.stride=0,this.byteLength=0,this.length=0,e&&this.data(e)}a.prototype={bind:function(){this.gl.bindBuffer(n,this.buffer)},attrib:function(t,e,i,s){return this.attribs.push({name:t,type:0|i,size:0|e,normalize:!!s,offset:this.stride}),this.stride+=r(i)*e,this._computeLength(),this},data:function(t){var e=this.gl;e.bindBuffer(n,this.buffer),e.bufferData(n,t,this.usage),e.bindBuffer(n,null),this.byteLength=void 0===t.byteLength?t:t.byteLength,this._computeLength()},subData:function(t,e){var i=this.gl;i.bindBuffer(n,this.buffer),i.bufferSubData(n,e,t),i.bindBuffer(n,null)},attribPointer:function(t,e){var i=this.gl;if(i.bindBuffer(n,this.buffer),e&&e.length)for(let s=0;s<e.length;s++)for(var r=0;r<this.attribs.length;r++){let n=this.attribs[r];if(e[s]===n.name)if(void 0!==t[n.name]){let e=t[n.name]();i.enableVertexAttribArray(e),i.vertexAttribPointer(e,n.size,n.type,n.normalize,this.stride,n.offset)}else console.warn(`glBuffer can't get Attribute "${n.name}" Location.`)}else for(var s=0;s<this.attribs.length;s++){var a=this.attribs[s];if(void 0!==t[a.name]){var h=t[a.name]();i.enableVertexAttribArray(h),i.vertexAttribPointer(h,a.size,a.type,a.normalize,this.stride,a.offset)}else console.warn(`glBuffer can't get Attribute "${a.name}" Location.`)}},draw:function(t,e,i){e=void 0===e?this.length:e,this.gl.drawArrays(t,i,0|e)},dispose:function(){this.gl&&this.gl.deleteBuffer(this.buffer),this.buffer=null,this.gl=null},_computeLength:function(){this.stride>0&&(this.length=this.byteLength/this.stride)}},s(a.prototype);function h(t,e,i,r){this.gl=t,this.buffer=t.createBuffer(),this.usage=r||t.STATIC_DRAW,this.type=0,this.typeSize=0,this.size=0,this.setType(e||t.UNSIGNED_SHORT),i&&this.data(i)}h.prototype={bind:function(){this.gl.bindBuffer(34963,this.buffer)},setType:function(t){this.type=t,this.typeSize=r(t)},data:function(t){var e=this.gl;e.bindBuffer(34963,this.buffer),e.bufferData(34963,t,this.usage),e.bindBuffer(34963,null),this.size=void 0===t.byteLength?t:t.byteLength},subData:function(t,e){var i=this.gl;i.bindBuffer(34963,this.buffer),i.bufferSubData(34963,e,t),i.bindBuffer(34963,null)},dispose:function(){this.gl.deleteBuffer(this.buffer),this.buffer=null,this.gl=null},draw:function(t,e,i){e=void 0===e?this.size/this.typeSize:e,this.gl.drawElements(t,e,this.type,0|i)}},s(h.prototype)}}]);