(window.webpackJsonp=window.webpackJsonp||[]).push([[13,22,28],{110:function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin   vec2 TexCoords;\nout vec4 outColor;\nuniform sampler2D texture;\nuniform float lod;\nvoid main(void){\n\n    outColor = textureLod(texture, TexCoords, lod);\n}\n"},111:function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec3 Pos;\nout vec4 outColor;\n\nvoid main()\n{\n  outColor = vec4(0.+Pos.x, 0.0, 0.0+Pos.z, .2);\n}"},142:function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec3 normal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n    vTextureCoord = texCoord;\n    vNormal = normal;\n}"},143:function(t,e){t.exports="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}"},28:function(t,e,s){"use strict";var r=s(0),i=s(14),h=s(12);s(144);const u=(t,e)=>{if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0},a=t=>{const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=`${t+1}: ${e[t]}`;return e.join("\n")},n=t=>t.slice?t.slice(0):new Float32Array(t),o=s(142),p=s(143),c={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"};class l{constructor(t=o,e=p,s){this.parameters=[],this._uniformTextures=[],this._varyings=s,t||(t=o),e||(e=o);const r=this._createShaderProgram(t,!0),i=this._createShaderProgram(e,!1);this._attachShaderProgram(r,i)}use(){this.bind()}bind(){r.c.useProgram(this.shaderProgram),r.a.useShader(this)}uniform(t,e,s){if("object"==typeof t)return void this.uniformObject(t);const i=c[e]||e;let h,a=!1,o=-1;for(let e=0;e<this.parameters.length;e++)if((h=this.parameters[e]).name===t){a=!0,o=e;break}let p=!1;if(a?(this.shaderProgram[t]=h.uniformLoc,p=h.isNumber):(p="uniform1i"===i||"uniform1f"===i,this.shaderProgram[t]=r.c.getUniformLocation(this.shaderProgram,t),p?this.parameters.push({name:t,type:i,value:s,uniformLoc:this.shaderProgram[t],isNumber:p}):this.parameters.push({name:t,type:i,value:n(s),uniformLoc:this.shaderProgram[t],isNumber:p}),o=this.parameters.length-1),this.parameters[o].uniformLoc)if(-1===i.indexOf("Matrix"))if(p){(this.parameters[o].value!==s||!a)&&(r.c[i](this.shaderProgram[t],s),this.parameters[o].value=s)}else u(this.parameters[o].value,s)&&a||(r.c[i](this.shaderProgram[t],s),this.parameters[o].value=n(s));else u(this.parameters[o].value,s)&&a||(r.c[i](this.shaderProgram[t],!1,s),this.parameters[o].value=n(s))}style(t){this.uniformObject(t)}uniformObject(t){for(const e in t)if(t[e]instanceof i.a||t[e]instanceof h.a){const s=t[e];let r=-1;this._uniformTextures.forEach((t,i)=>{t.name===e&&(r=i,t.texture=s)}),-1===r&&(r=this._uniformTextures.length,this._uniformTextures.push({name:e,texture:s})),this.uniform(e,"uniform1i",r),s.bind(r)}else{let s=t[e];const r=l.getUniformType(s);if(s.concat&&s[0].concat){let t=[];for(let e=0;e<s.length;e++)t=t.concat(s[e]);s=t}this.uniform(e,r,s)}}_createShaderProgram(t,e){const s=e?r.c.VERTEX_SHADER:r.c.FRAGMENT_SHADER,i=r.c.createShader(s);return r.c.shaderSource(i,t),r.c.compileShader(i),r.c.getShaderParameter(i,r.c.COMPILE_STATUS)?i:(console.warn("Error in Shader : ",r.c.getShaderInfoLog(i)),console.log(a(t)),null)}_attachShaderProgram(t,e){this.shaderProgram=r.c.createProgram(),r.c.attachShader(this.shaderProgram,t),r.c.attachShader(this.shaderProgram,e),r.c.deleteShader(t),r.c.deleteShader(e),this._varyings&&(console.log("Transform feedback setup : ",this._varyings),r.c.transformFeedbackVaryings(this.shaderProgram,this._varyings,r.c.SEPARATE_ATTRIBS)),r.c.linkProgram(this.shaderProgram)}}l.getUniformType=function(t){const e=function(t){return 9===t.length?"uniformMatrix3fv":16===t.length?"uniformMatrix4fv":`vec${t.length}`};return!!t.length?t[0].concat?e(t[0]):e(t):"float"},e.a=l},41:function(t,e){t.exports="#version 300 es\n#define GLSLIFY 1\nin vec3 position;\nin vec2 texCoord;\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nout   vec2 TexCoords;\nout vec3 Pos;\nvoid main(void){\n    TexCoords = texCoord;\n    Pos = position;\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n}\n"},5:function(t,e,s){"use strict";s.r(e);var r=s(2),i=s(28),h=s(1),u=s(0);const a=function(t,e,s){const r=e||{};return t.touches&&!s?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):t.touches?t.touches&&s&&(r.x=t.touches[1].pageX,r.y=t.touches[1].pageY):(r.x=t.clientX,r.y=t.clientY),r},n=1e-4;class o{constructor(t=[0,0,0],e=[0,1,0]){Object(r.a)(this,"cameraPos",void 0),Object(r.a)(this,"up",void 0),Object(r.a)(this,"cameraFront",[0,0,-1]),Object(r.a)(this,"_mouse",{}),Object(r.a)(this,"_preMouse",{}),Object(r.a)(this,"_mousedown",!1),Object(r.a)(this,"_rx",0),Object(r.a)(this,"_ry",0),Object(r.a)(this,"_preRx",0),Object(r.a)(this,"_preRy",0),Object(r.a)(this,"_targetRx",0),Object(r.a)(this,"_targetRy",0),Object(r.a)(this,"_viewMatrix",h.b.identity(h.b.create())),Object(r.a)(this,"_width",u.b.width),Object(r.a)(this,"_height",u.b.height),Object(r.a)(this,"sensitivity",1),Object(r.a)(this,"target",[0,0,0]),Object(r.a)(this,"offset",[0,0,0]),Object(r.a)(this,"radius",5),Object(r.a)(this,"_targetRadius",5),Object(r.a)(this,"_updateWheel",!1),this.cameraPos=t,this.up=e,this.projMatrix=h.b.create(),h.b.perspective(this.projMatrix,Object(u.d)(45),u.b.clientWidth/u.b.clientHeight,.1,100),this._addEvents()}setProj(t,e,s){h.b.perspective(this.projMatrix,Object(u.d)(t),u.b.clientWidth/u.b.clientHeight,e,s)}_addEvents(){u.b.addEventListener("mousedown",t=>this._down(t)),u.b.addEventListener("mousemove",t=>this._move(t)),document.addEventListener("mouseup",t=>this._up(t)),u.b.addEventListener("mousewheel",t=>this._onWheel(t)),u.b.addEventListener("DOMMouseScroll",t=>this._onWheel(t))}_down(t){this._mousedown=!0,a(t,this._mouse),a(t,this._preMouse),this._preRx=this._targetRx,this._preRy=this._targetRy}_move(t){if(this._mousedown){a(t,this._mouse);let e=(this._mouse.x-this._preMouse.x)/this._width,s=(this._mouse.y-this._preMouse.y)/this._height;this._targetRx=this._preRx+e*Math.PI*2*this.sensitivity,this._targetRy=this._preRy+s*Math.PI*this.sensitivity}}_up(t){this._mousedown=!1}updateMatrix(){this._rx+=.1*(this._targetRx-this._rx),Math.abs(this._targetRx-this._rx)<n&&(this._rx=this._targetRx),this._ry+=.1*(this._targetRy-this._ry),Math.abs(this._targetRy-this._ry)<n&&(this._ry=this._targetRy),this._updateWheel&&(this.radius+=.1*(this._targetRadius-this.radius),Math.abs(this._targetRadius-this.radius)<n&&(this.radius=this._targetRadius)),this.cameraPos[1]=Math.sin(this._ry)*this.radius;let t=Math.abs(Math.cos(this._ry)*this.radius);this.cameraPos[0]=Math.cos(this._rx+.5*Math.PI)*t,this.cameraPos[2]=Math.sin(this._rx+.5*Math.PI)*t,this.cameraPos=[this.cameraPos[0]+this.offset[0],this.cameraPos[1]+this.offset[1],this.cameraPos[2]+this.offset[2]],h.b.lookAt(this._viewMatrix,this.cameraPos,this.target,this.up)}_onWheel(t){const e=t.wheelDelta,s=t.detail;let r=0;r=s?e?e/s/40*s>0?1:-1:-s/3:e/120,this._targetRadius=this.radius+1*-r,this._targetRadius<=1&&(this._targetRadius=1),this._updateWheel=!0}get viewMatrix(){return this._viewMatrix}set rx(t){this._targetRx=t}}var p=s(43);s.d(e,"default",function(){return c});class c{constructor(){Object(r.a)(this,"rotateQ",h.c.create()),Object(r.a)(this,"mousePos",{x:0,y:0}),Object(r.a)(this,"camera",new o),Object(r.a)(this,"pMatrix",h.b.identity(h.b.create())),Object(r.a)(this,"mvpMatrix",h.b.identity(h.b.create())),Object(r.a)(this,"tmpMatrix",h.b.identity(h.b.create())),Object(r.a)(this,"_params",{}),Object(r.a)(this,"gui",new p.a({width:300})),this.vMatrix=this.camera.viewMatrix,u.a.setCamera(this.camera),this.init(),this.attrib(),this.prepare(),this._setGUI(),this._animate=this.animate.bind(this),u.c.enable(u.c.DEPTH_TEST),u.c.depthFunc(u.c.LEQUAL),u.c.enable(u.c.CULL_FACE)}init(){}compile(t,e){return new i.a(t,e)}attrib(){}uniform(){}prepare(){}animate(){requestAnimationFrame(this._animate),this.camera.updateMatrix(),this.uniform(),this.render()}render(){}play(){this.animate()}_setGUI(){}addGUIParams(t){return Object.assign(this._params,t)}get params(){return this._params}set params(t){throw Error("Params has no setter,please use addGUIParams")}}},6:function(t,e,s){"use strict";s.r(e),s.d(e,"Torus",function(){return i}),s.d(e,"hsva",function(){return h}),s.d(e,"Sphere",function(){return u}),s.d(e,"plane",function(){return a}),s.d(e,"QuadData",function(){return n}),s.d(e,"TorusKnot",function(){return o}),s.d(e,"regularPolyhedron",function(){return p});var r=s(3);function i(t,e,s,i,u){let a,n=[],o=[],p=[],c=[],l=[];for(let r=0;r<=t;r++){let o=2*Math.PI/t*r,d=Math.cos(o),f=Math.sin(o);for(let o=0;o<=e;o++){l.push(o/e,r/t);let m=2*Math.PI/e*o,b=(d*s+i)*Math.cos(m),_=f*s,g=(d*s+i)*Math.sin(m);n.push(b,_,g),a=u||h(360/e*o,1,1,1),c.push(a[0],a[1],a[2],a[3]);let M=d*Math.cos(m),x=d*Math.sin(m);p.push(M,f,x)}}for(let s=0;s<t;s++)for(let t=0;t<e;t++){let r=(e+1)*s+t;o.push(r,r+e+1,r+1),o.push(r+e+1,r+e+2,r+1)}let d=new r.a;return d.bufferFlattenData(n,"position",3),d.bufferFlattenData(l,"texCoord",2),d.bufferFlattenData(c,"color",4),d.bufferIndex(o),d.bufferFlattenData(p,"normal",3),d}function h(t,e,s,r){if(e>1||s>1||r>1)return;let i=t%360,h=Math.floor(i/60),u=i/60-h,a=s*(1-e),n=s*(1-e*u),o=s*(1-e*(1-u)),p=[];if(!e>0&&!e<0)p.push(s,s,s,r);else{let t=[s,n,a,a,o,s],e=[o,s,s,n,a,a],i=[a,a,o,s,s,n];p.push(t[h],e[h],i[h],r)}return p}function u(t,e,s,r){for(var i=[],u=[],a=[],n=[],o=[],p=0;p<=t;p++)for(var c=Math.PI/t*p,l=Math.cos(c),d=Math.sin(c),f=0;f<=e;f++){var m=2*Math.PI/e*f,b=d*s*Math.cos(m),_=l*s,g=d*s*Math.sin(m),M=d*Math.cos(m),x=d*Math.sin(m);if(r)var v=r;else v=h(360/t*p,1,1,1);i.push(b,_,g),u.push(M,l,x),a.push(v[0],v[1],v[2],v[3]),n.push(1-1/e*f,1/t*p)}for(c=0,p=0;p<t;p++)for(f=0;f<e;f++)c=(e+1)*p+f,o.push(c,c+1,c+e+2),o.push(c,c+e+2,c+e+1);return{pos:i,normal:u,color:a,uv:n,index:o}}function a(t,e,s){const r=t/2,i=s/2;return[r,e,i,0,1,0,1,0,-r,e,-i,0,1,0,0,1,-r,e,i,0,1,0,0,0,r,e,i,0,1,0,1,0,r,e,-i,0,1,0,1,1,-r,e,-i,0,1,0,0,1]}const n=[-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0];function o(){}function p(){}},64:function(t,e,s){"use strict";s.r(e);var r=s(5),i=s(0),h=s(41),u=s.n(h),a=s(110),n=s.n(a),o=s(111),p=s.n(o),c=s(1),l=s(6),d=s(2);class f{constructor(t,e){Object(d.a)(this,"origin",c.e.create()),Object(d.a)(this,"direction",c.e.create()),this.origin=c.e.fromValues(...t),c.e.normalize(this.direction,c.e.fromValues(...e))}}class m{constructor(t,e){Object(d.a)(this,"origin",c.e.create()),Object(d.a)(this,"size",c.e.create()),this.origin=t,this.size=e}fromMinMax(t,e){return new m([.5*(t[0]+e[0]),.5*(t[1]+e[1]),.5*(t[2]+e[2])],[.5*(e[0]-t[0]),.5*(e[1]-t[1]),.5*(e[2]-t[2])])}getMin(){let t,e;t=c.e.create(),e=c.e.create(),t=c.e.add(t,this.origin,this.size),e=c.e.subtract(e,this.origin,this.size);let s=c.e.create();return c.e.min(s,t,e),s}getMax(){let t,e;t=c.e.create(),e=c.e.create(),t=c.e.add(t,this.origin,this.size),e=c.e.subtract(e,this.origin,this.size);let s=c.e.create();return c.e.max(s,t,e),s}get position(){let t=[],e=this.origin,s=this.size;return t.push(e[0]-s[0],e[1]+s[1],e[2]+s[2]),t.push(e[0]-s[0],e[1]-s[1],e[2]+s[2]),t.push(e[0]+s[0],e[1]+s[1],e[2]+s[2]),t.push(e[0]+s[0],e[1]-s[1],e[2]+s[2]),t.push(e[0]+s[0],e[1]+s[1],e[2]-s[2]),t.push(e[0]+s[0],e[1]-s[1],e[2]-s[2]),t.push(e[0]-s[0],e[1]+s[1],e[2]-s[2]),t.push(e[0]-s[0],e[1]-s[1],e[2]-s[2]),t}get index(){return[0,1,2,1,3,2,6,4,7,7,4,5,1,0,6,1,6,7,3,4,2,3,5,4,0,6,4,0,2,4,1,7,5,1,5,3]}get texCoord(){return[0,0,0,1,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,1,0,1,0,1,1,0,0,1,1,1,0,1,0,1,1,1,1,0,1,0,0,1,1,0,1,1,1,0]}}class b{rayAABB(t,e){let s=t.getMin(),r=t.getMax(),i=(s[0]-e.origin[0])/(0==e.direction[0]?1e-5:e.direction[0]),h=(r[0]-e.origin[0])/(0==e.direction[0]?1e-5:e.direction[0]),u=(s[1]-e.origin[1])/(0==e.direction[1]?1e-5:e.direction[1]),a=(r[1]-e.origin[1])/(0==e.direction[1]?1e-5:e.direction[1]),n=(s[2]-e.origin[2])/(0==e.direction[2]?1e-5:e.direction[2]),o=(r[2]-e.origin[2])/(0==e.direction[2]?1e-5:e.direction[2]),p=Math.max(Math.max(Math.min(i,h),Math.min(u,a)),Math.min(n,o)),c=Math.min(Math.min(Math.max(i,h),Math.max(u,a)),Math.max(n,o));if(c<0)return!1;if(p>c)return!1;let l=p;return p<0&&(l=c),!0}raySphere(){}}class _{constructor(){Object(d.a)(this,"ray",void 0),Object(d.a)(this,"aabb",void 0),this.rayCast=new b}setRay(t,e,s,r,h){t-=i.b.getBoundingClientRect().left,e-=i.b.getBoundingClientRect().top;let u=2*t/i.b.clientWidth-1,a=1-2*e/i.b.clientHeight,n=(c.e.fromValues(u,a,1),c.f.fromValues(u,a,-1,1)),o=c.f.create();c.b.invert(s,s),c.b.multiply(o,s,n),o=c.f.fromValues(o[0],o[1],-1,0);let p=c.f.create();c.b.invert(r,r),c.b.multiply(p,r,o);let l=c.e.fromValues(p[0],p[1],p[2]);this.ray=new f(h,c.e.normalize(l,l))}castRay(t,e="AABB"){let s=!1;return"AABB"==e&&(this.boundingVolume(t),s=this.rayCast.rayAABB(this.aabb,this.ray)),s}boundingVolume(t,e="AABB"){let s,r,i,h,u,a,n,o,p,l;for(let e=0;e<t.length;e++)(t[e][0]>r||!r)&&(r=t[e][0]),(t[e][0]<s||!s)&&(s=t[e][0]),(t[e][1]>h||!h)&&(h=t[e][1]),(t[e][1]<i||!i)&&(i=t[e][1]),(t[e][2]>a||!a)&&(a=t[e][2]),(t[e][2]<u||!u)&&(u=t[e][2]);if(n=[s+(r-s)/2,i+(h-i)/2,u+(a-u)/2],o=Math.max((r-s)/2,(h-i)/2,(a-u)/2),p=c.e.fromValues(s,i,u),l=c.e.fromValues(r,h,a),"sphere"==e);else if("AABB"==e){let t=(new m).fromMinMax(p,l);return this.aabb=t,{position:t.position,index:t.index,texCoord:t.texCoord}}}}var g=s(8);function M(t,e){let s,r=[];for(let i=0;i<t.length;i++){s=c.f.fromValues(t[i][0],t[i][1],t[i][2],1);let h=c.f.create();c.f.transformMat4(h,s,e);let u=Array(...h).splice(0,3,1);r.push(u)}return r}s.d(e,"default",function(){return x});class x extends r.default{constructor(){super()}init(){this.outlinePrg=this.compile(u.a,p.a),this.prg=this.compile(u.a,n.a),i.c.cullFace(i.c.BACK),this._drawCube=this._drawCube.bind(this),this._drawTorus=this._drawTorus.bind(this),this.intersect=new _}attrib(){this.cube=g.a.cube(1),this.torus=Object(l.Torus)(64,64,.1,.4),this.texture=getAssets.splash,this.texture.bind(),i.c.texParameteri(i.c.TEXTURE_2D,i.c.TEXTURE_MAG_FILTER,i.c.LINEAR),i.c.texParameteri(i.c.TEXTURE_2D,i.c.TEXTURE_MIN_FILTER,i.c.NEAREST_MIPMAP_NEAREST),i.c.generateMipmap(i.c.TEXTURE_2D),i.c.bindTexture(i.c.TEXTURE_2D,null)}_setGUI(){this.addGUIParams({lod:1,LINEAR_MIPMAP_LINEAR:!1,NEAREST_MIPMAP_NEAREST:!0});let t=this.gui.addFolder("tetxureLod lod param");t.add(this.params,"lod",1,Math.log2(512)).step(1),t.open();let e=this.gui.addFolder("TEXTURE_MIN_FILTER");e.add(this.params,"LINEAR_MIPMAP_LINEAR").listen().onChange(()=>{this.setChecked("LINEAR_MIPMAP_LINEAR")}),e.add(this.params,"NEAREST_MIPMAP_NEAREST").listen().onChange(()=>{this.setChecked("NEAREST_MIPMAP_NEAREST")}),e.open()}setChecked(t){this.texture.bind(),i.c.texParameteri(i.c.TEXTURE_2D,i.c.TEXTURE_MIN_FILTER,i.c[t]),this.params.LINEAR_MIPMAP_LINEAR=!1,this.params.NEAREST_MIPMAP_NEAREST=!1,this.params[t]=!0}prepare(){i.c.enable(i.c.DEPTH_TEST),i.c.depthFunc(i.c.LESS),i.c.enable(i.c.STENCIL_TEST),i.c.stencilFunc(i.c.NOTEQUAL,1,255),i.c.stencilOp(i.c.KEEP,i.c.KEEP,i.c.REPLACE),this.camera.setProj(60,.1,100)}uniform(){let t=c.b.clone(this.camera.projMatrix),e=c.b.clone(this.camera.viewMatrix);this.intersect.setRay(this.mousePos.x,this.mousePos.y,t,e,this.camera.cameraPos)}render(){i.c.clearColor(.3,.3,.3,1),i.c.clearDepth(1),i.c.clear(i.c.COLOR_BUFFER_BIT|i.c.DEPTH_BUFFER_BIT|i.c.STENCIL_BUFFER_BIT),i.c.stencilMask(0);let t=c.b.identity(c.b.create());c.b.translate(t,t,[-2.5,0,0]),this.intersect.castRay(M(this.cube.vertices,t))?this.renderOutline(t,this._drawCube):this.renderDefault(t,this._drawCube),t=c.b.identity(c.b.create()),c.b.translate(t,t,[2,0,0]),this.intersect.castRay(M(this.torus.vertices,t))?this.renderOutline(t,this._drawTorus):this.renderDefault(t,this._drawTorus)}renderDefault(t,e){this.prg.use(),this.prg.style({texture:this.texture,uModelMatrix:t,lod:this.params.lod}),e()}renderOutline(t,e){i.c.stencilFunc(i.c.ALWAYS,1,255),i.c.stencilMask(255),this.renderDefault(t,e),i.c.stencilFunc(i.c.NOTEQUAL,1,255),i.c.stencilMask(0);c.b.scale(t,t,[1.1,1.1,1.1]),this.outlinePrg.use(),this.outlinePrg.style({uModelMatrix:t}),e()}_drawCube(){i.a.draw(this.cube,!0)}_drawTorus(){i.a.draw(this.torus,!0)}}},8:function(t,e,s){"use strict";var r=s(3);const i={};let h;i.plane=function(t,e,s,i="xy",h=4){const u=[],a=[],n=[],o=[],p=t/s,c=e/s,l=1/s,d=.5*-t,f=.5*-e;let m=0;for(let t=0;t<s;t++)for(let e=0;e<s;e++){const r=p*t+d,h=c*e+f,b=t/s,_=e/s;"xz"===i?(u.push([r,0,h+c]),u.push([r+p,0,h+c]),u.push([r+p,0,h]),u.push([r,0,h]),a.push([b,1-(_+l)]),a.push([b+l,1-(_+l)]),a.push([b+l,1-_]),a.push([b,1-_]),o.push([0,1,0]),o.push([0,1,0]),o.push([0,1,0]),o.push([0,1,0])):"yz"===i?(u.push([0,h,r]),u.push([0,h,r+p]),u.push([0,h+c,r+p]),u.push([0,h+c,r]),a.push([b,_]),a.push([b+l,_]),a.push([b+l,_+l]),a.push([b,_+l]),o.push([1,0,0]),o.push([1,0,0]),o.push([1,0,0]),o.push([1,0,0])):(u.push([r,h,0]),u.push([r+p,h,0]),u.push([r+p,h+c,0]),u.push([r,h+c,0]),a.push([b,_]),a.push([b+l,_]),a.push([b+l,_+l]),a.push([b,_+l]),o.push([0,0,1]),o.push([0,0,1]),o.push([0,0,1]),o.push([0,0,1])),n.push(4*m+0),n.push(4*m+1),n.push(4*m+2),n.push(4*m+0),n.push(4*m+2),n.push(4*m+3),m++}const b=new r.a(h);return b.bufferVertex(u),b.bufferTexCoord(a),b.bufferIndex(n),b.bufferNormal(o),b},i.sphere=function(t,e,s=!1,i=4){const h=[],u=[],a=[],n=[],o=1/e;let p=0;function c(s,r,i=!1){const h=s/e*Math.PI-.5*Math.PI,u=r/e*Math.PI*2,a=i?1:t,n=[];n[1]=Math.sin(h)*a;const o=Math.cos(h)*a;n[0]=Math.cos(u)*o,n[2]=Math.sin(u)*o;return n[0]=Math.floor(1e4*n[0])/1e4,n[1]=Math.floor(1e4*n[1])/1e4,n[2]=Math.floor(1e4*n[2])/1e4,n}for(let t=0;t<e;t++)for(let s=0;s<e;s++){h.push(c(t,s)),h.push(c(t+1,s)),h.push(c(t+1,s+1)),h.push(c(t,s+1)),n.push(c(t,s,!0)),n.push(c(t+1,s,!0)),n.push(c(t+1,s+1,!0)),n.push(c(t,s+1,!0));const r=s/e,i=t/e;u.push([1-r,i]),u.push([1-r,i+o]),u.push([1-r-o,i+o]),u.push([1-r-o,i]),a.push(4*p+0),a.push(4*p+1),a.push(4*p+2),a.push(4*p+0),a.push(4*p+2),a.push(4*p+3),p++}s&&a.reverse();const l=new r.a(i);return l.bufferVertex(h),l.bufferTexCoord(u),l.bufferIndex(a),l.bufferNormal(n),l},i.cube=function(t,e,s,i=4){const h=t/2,u=(e=e||t)/2,a=(s=s||t)/2,n=[],o=[],p=[],c=[];let l=0;n.push([-h,u,-a]),n.push([h,u,-a]),n.push([h,-u,-a]),n.push([-h,-u,-a]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),o.push([0,0]),o.push([1,0]),o.push([1,1]),o.push([0,1]),p.push(4*l+0),p.push(4*l+1),p.push(4*l+2),p.push(4*l+0),p.push(4*l+2),p.push(4*l+3),l++,n.push([h,u,-a]),n.push([h,u,a]),n.push([h,-u,a]),n.push([h,-u,-a]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),o.push([0,0]),o.push([1,0]),o.push([1,1]),o.push([0,1]),p.push(4*l+0),p.push(4*l+1),p.push(4*l+2),p.push(4*l+0),p.push(4*l+2),p.push(4*l+3),l++,n.push([h,u,a]),n.push([-h,u,a]),n.push([-h,-u,a]),n.push([h,-u,a]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),o.push([0,0]),o.push([1,0]),o.push([1,1]),o.push([0,1]),p.push(4*l+0),p.push(4*l+1),p.push(4*l+2),p.push(4*l+0),p.push(4*l+2),p.push(4*l+3),l++,n.push([-h,u,a]),n.push([-h,u,-a]),n.push([-h,-u,-a]),n.push([-h,-u,a]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),o.push([0,0]),o.push([1,0]),o.push([1,1]),o.push([0,1]),p.push(4*l+0),p.push(4*l+1),p.push(4*l+2),p.push(4*l+0),p.push(4*l+2),p.push(4*l+3),l++,n.push([h,u,-a]),n.push([-h,u,-a]),n.push([-h,u,a]),n.push([h,u,a]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),o.push([0,0]),o.push([1,0]),o.push([1,1]),o.push([0,1]),p.push(4*l+0),p.push(4*l+1),p.push(4*l+2),p.push(4*l+0),p.push(4*l+2),p.push(4*l+3),l++,n.push([h,-u,a]),n.push([-h,-u,a]),n.push([-h,-u,-a]),n.push([h,-u,-a]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),o.push([0,0]),o.push([1,0]),o.push([1,1]),o.push([0,1]),p.push(4*l+0),p.push(4*l+1),p.push(4*l+2),p.push(4*l+0),p.push(4*l+2),p.push(4*l+3),l++;const d=new r.a(i);return d.bufferVertex(n),d.bufferTexCoord(o),d.bufferIndex(p),d.computeNormals(c),d},i.skybox=function(t,e=4){const s=[],i=[],h=[],u=[];let a=0;s.push([t,t,-t]),s.push([-t,t,-t]),s.push([-t,-t,-t]),s.push([t,-t,-t]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),i.push([0,0]),i.push([1,0]),i.push([1,1]),i.push([0,1]),h.push(4*a+0),h.push(4*a+1),h.push(4*a+2),h.push(4*a+0),h.push(4*a+2),h.push(4*a+3),a++,s.push([t,-t,-t]),s.push([t,-t,t]),s.push([t,t,t]),s.push([t,t,-t]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),i.push([0,0]),i.push([1,0]),i.push([1,1]),i.push([0,1]),h.push(4*a+0),h.push(4*a+1),h.push(4*a+2),h.push(4*a+0),h.push(4*a+2),h.push(4*a+3),a++,s.push([-t,t,t]),s.push([t,t,t]),s.push([t,-t,t]),s.push([-t,-t,t]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),i.push([0,0]),i.push([1,0]),i.push([1,1]),i.push([0,1]),h.push(4*a+0),h.push(4*a+1),h.push(4*a+2),h.push(4*a+0),h.push(4*a+2),h.push(4*a+3),a++,s.push([-t,-t,t]),s.push([-t,-t,-t]),s.push([-t,t,-t]),s.push([-t,t,t]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),i.push([0,0]),i.push([1,0]),i.push([1,1]),i.push([0,1]),h.push(4*a+0),h.push(4*a+1),h.push(4*a+2),h.push(4*a+0),h.push(4*a+2),h.push(4*a+3),a++,s.push([t,t,t]),s.push([-t,t,t]),s.push([-t,t,-t]),s.push([t,t,-t]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),i.push([0,0]),i.push([1,0]),i.push([1,1]),i.push([0,1]),h.push(4*a+0),h.push(4*a+1),h.push(4*a+2),h.push(4*a+0),h.push(4*a+2),h.push(4*a+3),a++,s.push([t,-t,-t]),s.push([-t,-t,-t]),s.push([-t,-t,t]),s.push([t,-t,t]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),i.push([0,0]),i.push([1,0]),i.push([1,1]),i.push([0,1]),h.push(4*a+0),h.push(4*a+1),h.push(4*a+2),h.push(4*a+0),h.push(4*a+2),h.push(4*a+3);const n=new r.a(e);return n.bufferVertex(s),n.bufferTexCoord(i),n.bufferIndex(h),n.bufferNormal(u),n},i.bigTriangle=function(){if(!h){const t=[2,1,0],e=[[-1,-1],[-1,4],[4,-1]];(h=new r.a).bufferData(e,"position",2),h.bufferIndex(t)}return h},e.a=i}}]);