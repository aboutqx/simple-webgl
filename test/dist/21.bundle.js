(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{101:function(a,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return m}));var r=t(5),n=t.n(r),s=t(43),i=t(42),o=t(1),u=t(0),l=t(51);const p=[],c=[];for(let a=0;a<32;a++){let a=20*Math.random()-16,e=25*Math.random()-2,t=10*Math.random()-4;p.push([a,e,t]);let r=Math.random()/2+.5,n=Math.random()/2+.5,s=Math.random()/2+.5;c.push([r,n,s])}class m extends s.a{constructor(){super()}init(){this.prg=this.basicVert("#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nout vec4 outColor;\n\nin vec3 vPosition;\nin vec2 vTexCoord;\nin vec3 vNormal;\nuniform sampler2D diffuseMap;\nuniform sampler2D specularMap;\n// uniform sampler2D normalMap;\n// uniform sampler2D heightMap;\n// uniform sampler2D bumpMap;\n\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D uEmissiveMap;\nuniform vec3 uEmissiveFactor;\n#endif\n\n#ifdef HAS_AMBIENTMAP\nuniform sampler2D uAmbientMap;\n#endif\n\nstruct Light {\n    vec3 Position;\n    vec3 Color;\n\n    float Linear;\n    float Quadratic;\n};\nconst int NR_LIGHTS = 32;\nuniform Light lights[NR_LIGHTS];\nuniform vec3 uCameraPos;\n\nvoid main() {\n\n    vec3 Diffuse = texture(diffuseMap, vTexCoord).rgb;\n    float Specular = texture(specularMap, vTexCoord).r;\n\n    // then calculate lighting as usual\n    vec3 lighting  = Diffuse * .1; // hard-coded ambient component\n    vec3 viewDir  = normalize(uCameraPos - vPosition);\n    for(int i = 0; i < NR_LIGHTS; ++i)\n    {\n        // diffuse\n        vec3 lightDir = normalize(lights[i].Position - vPosition);\n        vec3 diffuse = max(dot(vNormal, lightDir), 0.0) * Diffuse * lights[i].Color;\n        // specular\n        vec3 halfwayDir = normalize(lightDir + viewDir);\n        float spec = pow(max(dot(vNormal, halfwayDir), 0.0), 16.0);\n        vec3 specular = lights[i].Color * spec * Specular;\n        // attenuation\n        float distance = length(lights[i].Position - vPosition);\n        float attenuation = 1.0 / (1.0 + lights[i].Linear * distance + lights[i].Quadratic * distance * distance);\n        diffuse *= attenuation;\n        specular *= attenuation;\n        lighting += diffuse + specular;\n    }\n\n    #ifdef HAS_AMBIENTMAP\n        vec3 ambient = texture(uAmbientMap, vTexCoord).r* Diffuse;\n        lighting += ambient;\n    #endif\n\n    #ifdef HAS_EMISSIVEMAP\n        vec3 emissive = texture(uEmissiveMap, vTexCoord).rgb * uEmissiveFactor;\n        lighting += emissive;\n    #endif\n\n    outColor = vec4(lighting,1.0);\n}\n"),this.lampPrg=this.basicColor()}attrib(){var a,e=this;return n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.lamp=i.a.sphere(.2,60),t.next=3,n.a.awrap(new l.a("nanosuit.mtl","./assets/models/nanosuit").parse(getAssets.nanosuitMTL));case 3:a=t.sent,e.nanosuit=getAssets.nanosuit.map(e=>(e.setMaterial(a[e.material.name]),e));case 5:case"end":return t.stop()}}),null,null,null,Promise)}prepare(){this.orbital.radius=22,this.orbital.offset=[0,8,0],this.orbital.target=[0,8,0]}uniform(){const a=o.b.create();this.prg.use(),this.prg.style({mMatrix:a});for(let a=0;a<p.length;a++)this.prg.style({[`lights[${a}].Position`]:p[a],[`lights[${a}].Color`]:c[a],[`lights[${a}].Linear`]:.1,[`lights[${a}].Quadratic`]:.12})}render(){u.a.clear(),u.a.draw(this.nanosuit);const a=o.b.create();o.b.translate(a,a,p[0]),o.b.scale(a,a,[.2,.2,.2]),this.lampPrg.use(),this.lampPrg.style({mMatrix:a,color:c[0]}),u.a.draw(this.lamp)}}},51:function(a,e,t){"use strict";t.d(e,"a",(function(){return u}));var r=t(2),n=t(5),s=t.n(n),i=t(16),o=t.n(i);class u{constructor(a,e){Object(r.a)(this,"_materials",{}),Object(r.a)(this,"materialsInfo",{}),Object(r.a)(this,"name",""),this.name=a,this.path=e}parse(a){var e,t,r,n,i,o,u,l,p,c=this;return s.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:e=a.split("\n"),t={},r=/\s+/,n=0;case 4:if(!(n<e.length)){m.next=18;break}if(0!==(i=(i=e[n]).trim()).length&&"#"!==i.charAt(0)){m.next=9;break}return m.abrupt("continue",15);case 9:o=i.indexOf(" "),u=(u=o>=0?i.substring(0,o):i).toLowerCase(),l=(l=o>=0?i.substring(o+1):"").trim(),"newmtl"===u?(t={name:l},c.materialsInfo[l]=t):"ka"===u||"kd"===u||"ks"===u?(p=l.split(r,3),t[u]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]):t[u]=l;case 15:n++,m.next=4;break;case 18:return m.next=20,s.a.awrap(c.setMaterials());case 20:return m.abrupt("return",c.materials);case 21:case"end":return m.stop()}}),null,null,null,Promise)}setMaterials(){var a,e,t,r,n=this;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:i.t0=s.a.keys(n.materialsInfo);case 1:if((i.t1=i.t0()).done){i.next=58;break}e=i.t1.value,n._materials[e]={},i.t2=s.a.keys(n.materialsInfo[e]);case 5:if((i.t3=i.t2()).done){i.next=56;break}t=i.t3.value,r=n.materialsInfo[e][t],i.t4=t.toLowerCase(),i.next="kd"===i.t4?11:"ks"===i.t4?13:"map_ka"===i.t4?15:"map_kd"===i.t4?19:"map_ks"===i.t4?23:"norm"===i.t4?27:"map_bump"===i.t4||"bump"===i.t4?31:"map_ke"===i.t4?35:"map_d"===i.t4?39:"ns"===i.t4?44:"d"===i.t4?46:"tr"===i.t4?49:53;break;case 11:return n._materials[e].kd=r,i.abrupt("break",54);case 13:return n._materials[e].ks=r,i.abrupt("break",54);case 15:return i.next=17,s.a.awrap(n.setMapType("ambientMap",r));case 17:return n._materials[e].ambientMap=i.sent,i.abrupt("break",54);case 19:return i.next=21,s.a.awrap(n.setMapType("diffuseMap",r));case 21:return n._materials[e].diffuseMap=i.sent,i.abrupt("break",54);case 23:return i.next=25,s.a.awrap(n.setMapType("specularMap",r));case 25:return n._materials[e].specularMap=i.sent,i.abrupt("break",54);case 27:return i.next=29,s.a.awrap(n.setMapType("normalMap",r));case 29:return n._materials[e].normalMap=i.sent,i.abrupt("break",54);case 31:return i.next=33,s.a.awrap(n.setMapType("bumpMap",r));case 33:return n._materials[e].bumpMap=i.sent,i.abrupt("break",54);case 35:return i.next=37,s.a.awrap(n.setMapType("emissiveMap",r));case 37:return n._materials[e].emissiveMap=i.sent,i.abrupt("break",54);case 39:return i.next=41,s.a.awrap(n.setMapType("alphaMap",r));case 41:return n._materials[e].alphaMap=i.sent,params.transparent=!0,i.abrupt("break",54);case 44:return n._materials[e].shininess=parseFloat(r),i.abrupt("break",54);case 46:return(a=parseFloat(r))<1&&(n._materials[e].opacity=a),i.abrupt("break",54);case 49:return(a=1-(a=parseFloat(r)))>0&&(n._materials[e].opacity=1-a),i.abrupt("break",54);case 53:return i.abrupt("break",54);case 54:i.next=5;break;case 56:i.next=1;break;case 58:case"end":return i.stop()}}),null,null,null,Promise)}setMapType(a,e){var t,r,n=this;return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.split(/\s+/).pop(),a.next=3,s.a.awrap(o()(n.path+"/"+t));case 3:return r=a.sent,a.abrupt("return",r);case 5:case"end":return a.stop()}}),null,null,null,Promise)}get materials(){return this._materials}set materials(a){this._materials=a}}}}]);