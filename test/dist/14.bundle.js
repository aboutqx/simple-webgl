(window.webpackJsonp=window.webpackJsonp||[]).push([[14,22],{100:function(s,t){s.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nout vec4 FragColor;\nuniform vec3 lightColor;\nvoid main()\n{\n    FragColor = vec4(lightColor, 1.0); // 将向量的四个分量全部设置为1.0\n}\n"},142:function(s,t){s.exports="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 texCoord;\nattribute vec3 normal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n    vTextureCoord = texCoord;\n    vNormal = normal;\n}"},143:function(s,t){s.exports="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}"},28:function(s,t,e){"use strict";var h=e(0),r=e(14),i=e(12);e(144);const u=(s,t)=>{if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0},a=s=>{const t=s.split("\n");for(let s=0;s<t.length;s++)t[s]=`${s+1}: ${t[s]}`;return t.join("\n")},p=s=>s.slice?s.slice(0):new Float32Array(s),n=e(142),o=e(143),c={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"};class m{constructor(s=n,t=o,e){this.parameters=[],this._uniformTextures=[],this._varyings=e,s||(s=n),t||(t=n);const h=this._createShaderProgram(s,!0),r=this._createShaderProgram(t,!1);this._attachShaderProgram(h,r)}use(){this.bind()}bind(){h.c.useProgram(this.shaderProgram),h.a.useShader(this)}uniform(s,t,e){if("object"==typeof s)return void this.uniformObject(s);const r=c[t]||t;let i,a=!1,n=-1;for(let t=0;t<this.parameters.length;t++)if((i=this.parameters[t]).name===s){a=!0,n=t;break}let o=!1;if(a?(this.shaderProgram[s]=i.uniformLoc,o=i.isNumber):(o="uniform1i"===r||"uniform1f"===r,this.shaderProgram[s]=h.c.getUniformLocation(this.shaderProgram,s),o?this.parameters.push({name:s,type:r,value:e,uniformLoc:this.shaderProgram[s],isNumber:o}):this.parameters.push({name:s,type:r,value:p(e),uniformLoc:this.shaderProgram[s],isNumber:o}),n=this.parameters.length-1),this.parameters[n].uniformLoc)if(-1===r.indexOf("Matrix"))if(o){(this.parameters[n].value!==e||!a)&&(h.c[r](this.shaderProgram[s],e),this.parameters[n].value=e)}else u(this.parameters[n].value,e)&&a||(h.c[r](this.shaderProgram[s],e),this.parameters[n].value=p(e));else u(this.parameters[n].value,e)&&a||(h.c[r](this.shaderProgram[s],!1,e),this.parameters[n].value=p(e))}style(s){this.uniformObject(s)}uniformObject(s){for(const t in s)if(s[t]instanceof r.a||s[t]instanceof i.a){const e=s[t];let h=-1;this._uniformTextures.forEach((s,r)=>{s.name===t&&(h=r,s.texture=e)}),-1===h&&(h=this._uniformTextures.length,this._uniformTextures.push({name:t,texture:e})),this.uniform(t,"uniform1i",h),e.bind(h)}else{let e=s[t];const h=m.getUniformType(e);if(e.concat&&e[0].concat){let s=[];for(let t=0;t<e.length;t++)s=s.concat(e[t]);e=s}this.uniform(t,h,e)}}_createShaderProgram(s,t){const e=t?h.c.VERTEX_SHADER:h.c.FRAGMENT_SHADER,r=h.c.createShader(e);return h.c.shaderSource(r,s),h.c.compileShader(r),h.c.getShaderParameter(r,h.c.COMPILE_STATUS)?r:(console.warn("Error in Shader : ",h.c.getShaderInfoLog(r)),console.log(a(s)),null)}_attachShaderProgram(s,t){this.shaderProgram=h.c.createProgram(),h.c.attachShader(this.shaderProgram,s),h.c.attachShader(this.shaderProgram,t),h.c.deleteShader(s),h.c.deleteShader(t),this._varyings&&(console.log("Transform feedback setup : ",this._varyings),h.c.transformFeedbackVaryings(this.shaderProgram,this._varyings,h.c.SEPARATE_ATTRIBS)),h.c.linkProgram(this.shaderProgram)}}m.getUniformType=function(s){const t=function(s){return 9===s.length?"uniformMatrix3fv":16===s.length?"uniformMatrix4fv":`vec${s.length}`};return!!s.length?s[0].concat?t(s[0]):t(s):"float"},t.a=m},40:function(s,t){s.exports="#version 300 es\n#define GLSLIFY 1\nlayout (location = 0) in vec3 position;\n\nuniform mat4 mMatrix;\nuniform mat4 vMatrix;\nuniform mat4 pMatrix;\n\nvoid main()\n{\n    gl_Position = pMatrix * vMatrix * mMatrix * vec4(position, 1.0);\n}\n"},5:function(s,t,e){"use strict";e.r(t);var h=e(2),r=e(28),i=e(1),u=e(0);const a=function(s,t,e){const h=t||{};return s.touches&&!e?(h.x=s.touches[0].pageX,h.y=s.touches[0].pageY):s.touches?s.touches&&e&&(h.x=s.touches[1].pageX,h.y=s.touches[1].pageY):(h.x=s.clientX,h.y=s.clientY),h},p=1e-4;class n{constructor(s=[0,0,0],t=[0,1,0]){Object(h.a)(this,"cameraPos",void 0),Object(h.a)(this,"up",void 0),Object(h.a)(this,"cameraFront",[0,0,-1]),Object(h.a)(this,"_mouse",{}),Object(h.a)(this,"_preMouse",{}),Object(h.a)(this,"_mousedown",!1),Object(h.a)(this,"_rx",0),Object(h.a)(this,"_ry",0),Object(h.a)(this,"_preRx",0),Object(h.a)(this,"_preRy",0),Object(h.a)(this,"_targetRx",0),Object(h.a)(this,"_targetRy",0),Object(h.a)(this,"_viewMatrix",i.b.identity(i.b.create())),Object(h.a)(this,"_width",u.b.width),Object(h.a)(this,"_height",u.b.height),Object(h.a)(this,"sensitivity",1),Object(h.a)(this,"target",[0,0,0]),Object(h.a)(this,"offset",[0,0,0]),Object(h.a)(this,"radius",5),Object(h.a)(this,"_targetRadius",5),Object(h.a)(this,"_updateWheel",!1),this.position=s,this.up=t,this.projMatrix=i.b.create(),i.b.perspective(this.projMatrix,Object(u.d)(45),u.b.clientWidth/u.b.clientHeight,.1,100),this._addEvents()}setProj(s,t,e){i.b.perspective(this.projMatrix,Object(u.d)(s),u.b.clientWidth/u.b.clientHeight,t,e)}_addEvents(){u.b.addEventListener("mousedown",s=>this._down(s)),u.b.addEventListener("mousemove",s=>this._move(s)),document.addEventListener("mouseup",s=>this._up(s)),u.b.addEventListener("mousewheel",s=>this._onWheel(s)),u.b.addEventListener("DOMMouseScroll",s=>this._onWheel(s))}_down(s){this._mousedown=!0,a(s,this._mouse),a(s,this._preMouse),this._preRx=this._targetRx,this._preRy=this._targetRy}_move(s){if(this._mousedown){a(s,this._mouse);let t=(this._mouse.x-this._preMouse.x)/this._width,e=(this._mouse.y-this._preMouse.y)/this._height;this._targetRx=this._preRx+t*Math.PI*2*this.sensitivity,this._targetRy=this._preRy+e*Math.PI*this.sensitivity}}_up(s){this._mousedown=!1}updateMatrix(){this._rx+=.1*(this._targetRx-this._rx),Math.abs(this._targetRx-this._rx)<p&&(this._rx=this._targetRx),this._ry+=.1*(this._targetRy-this._ry),Math.abs(this._targetRy-this._ry)<p&&(this._ry=this._targetRy),this._updateWheel&&(this.radius+=.1*(this._targetRadius-this.radius),Math.abs(this._targetRadius-this.radius)<p&&(this.radius=this._targetRadius)),this.position[1]=Math.sin(this._ry)*this.radius;let s=Math.abs(Math.cos(this._ry)*this.radius);this.position[0]=Math.cos(this._rx+.5*Math.PI)*s,this.position[2]=Math.sin(this._rx+.5*Math.PI)*s,this.position=[this.position[0]+this.offset[0],this.position[1]+this.offset[1],this.position[2]+this.offset[2]],i.b.lookAt(this._viewMatrix,this.position,this.target,this.up)}_onWheel(s){const t=s.wheelDelta,e=s.detail;let h=0;h=e?t?t/e/40*e>0?1:-1:-e/3:t/120,this._targetRadius=this.radius+1*-h,this._targetRadius<=1&&(this._targetRadius=1),this._updateWheel=!0}get viewMatrix(){return this._viewMatrix}set rx(s){this._targetRx=s}}var o=e(43);e.d(t,"default",function(){return c});class c{constructor(){Object(h.a)(this,"rotateQ",i.c.create()),Object(h.a)(this,"mousePos",{x:0,y:0}),Object(h.a)(this,"camera",new n),Object(h.a)(this,"pMatrix",i.b.identity(i.b.create())),Object(h.a)(this,"mvpMatrix",i.b.identity(i.b.create())),Object(h.a)(this,"tmpMatrix",i.b.identity(i.b.create())),Object(h.a)(this,"_params",{}),Object(h.a)(this,"gui",new o.a({width:300})),this.vMatrix=this.camera.viewMatrix,u.a.setCamera(this.camera),this.init(),this.attrib(),this.prepare(),this._setGUI(),this._animate=this.animate.bind(this),u.c.enable(u.c.DEPTH_TEST),u.c.depthFunc(u.c.LEQUAL),u.c.enable(u.c.CULL_FACE)}init(){}compile(s,t){return new r.a(s,t)}attrib(){}uniform(){}prepare(){}animate(){requestAnimationFrame(this._animate),this.camera.updateMatrix(),this.uniform(),this.render()}render(){}play(){this.animate()}_setGUI(){}addGUIParams(s){return Object.assign(this._params,s)}get params(){return this._params}set params(s){throw Error("Params has no setter,please use addGUIParams")}}},50:function(s,t,e){"use strict";e.r(t),e.d(t,"default",function(){return d});var h=e(2),r=e(5),i=e(8),u=e(40),a=e.n(u),p=e(99),n=e.n(p),o=e(100),c=e.n(o),m=e(1),f=e(0);const l=[.83,.82,.88];class d extends r.default{constructor(){super(),Object(h.a)(this,"count",0)}init(){this.prg=this.compile(a.a,n.a),this.lampPrg=this.compile(a.a,c.a)}attrib(){this.cube=i.a.cube(.5),this.lamp=i.a.sphere(.05,60)}prepare(){f.c.enable(f.c.DEPTH_TEST),f.c.depthFunc(f.c.LEQUAL),f.c.clearColor(.3,.3,.3,1),f.c.clearDepth(1),this.camera.radius=3}uniform(){let s=m.b.identity(m.b.create());this.prg.use(),this.prg.style({mMatrix:s,vMatrix:this.camera.viewMatrix,pMatrix:this.camera.projMatrix,objectColor:[.1,.1,.1],lightColor:l})}render(){f.c.clear(f.c.COLOR_BUFFER_BIT|f.c.DEPTH_BUFFER_BIT),f.a.draw(this.cube);let s=m.b.identity(m.b.create());m.b.translate(s,s,[1,.1,1]),m.b.scale(s,s,[.2,.2,.2]),this.lampPrg.use(),this.lampPrg.style({mMatrix:s,vMatrix:this.camera.viewMatrix,pMatrix:this.camera.projMatrix,lightColor:l}),f.a.draw(this.lamp)}}},8:function(s,t,e){"use strict";var h=e(3);const r={};let i;r.plane=function(s,t,e,r="xy",i=4){const u=[],a=[],p=[],n=[],o=s/e,c=t/e,m=1/e,f=.5*-s,l=.5*-t;let d=0;for(let s=0;s<e;s++)for(let t=0;t<e;t++){const h=o*s+f,i=c*t+l,b=s/e,_=t/e;"xz"===r?(u.push([h,0,i+c]),u.push([h+o,0,i+c]),u.push([h+o,0,i]),u.push([h,0,i]),a.push([b,1-(_+m)]),a.push([b+m,1-(_+m)]),a.push([b+m,1-_]),a.push([b,1-_]),n.push([0,1,0]),n.push([0,1,0]),n.push([0,1,0]),n.push([0,1,0])):"yz"===r?(u.push([0,i,h]),u.push([0,i,h+o]),u.push([0,i+c,h+o]),u.push([0,i+c,h]),a.push([b,_]),a.push([b+m,_]),a.push([b+m,_+m]),a.push([b,_+m]),n.push([1,0,0]),n.push([1,0,0]),n.push([1,0,0]),n.push([1,0,0])):(u.push([h,i,0]),u.push([h+o,i,0]),u.push([h+o,i+c,0]),u.push([h,i+c,0]),a.push([b,_]),a.push([b+m,_]),a.push([b+m,_+m]),a.push([b,_+m]),n.push([0,0,1]),n.push([0,0,1]),n.push([0,0,1]),n.push([0,0,1])),p.push(4*d+0),p.push(4*d+1),p.push(4*d+2),p.push(4*d+0),p.push(4*d+2),p.push(4*d+3),d++}const b=new h.a(i);return b.bufferVertex(u),b.bufferTexCoord(a),b.bufferIndex(p),b.bufferNormal(n),b},r.sphere=function(s,t,e=!1,r=4){const i=[],u=[],a=[],p=[],n=1/t;let o=0;function c(e,h,r=!1){const i=e/t*Math.PI-.5*Math.PI,u=h/t*Math.PI*2,a=r?1:s,p=[];p[1]=Math.sin(i)*a;const n=Math.cos(i)*a;p[0]=Math.cos(u)*n,p[2]=Math.sin(u)*n;return p[0]=Math.floor(1e4*p[0])/1e4,p[1]=Math.floor(1e4*p[1])/1e4,p[2]=Math.floor(1e4*p[2])/1e4,p}for(let s=0;s<t;s++)for(let e=0;e<t;e++){i.push(c(s,e)),i.push(c(s+1,e)),i.push(c(s+1,e+1)),i.push(c(s,e+1)),p.push(c(s,e,!0)),p.push(c(s+1,e,!0)),p.push(c(s+1,e+1,!0)),p.push(c(s,e+1,!0));const h=e/t,r=s/t;u.push([1-h,r]),u.push([1-h,r+n]),u.push([1-h-n,r+n]),u.push([1-h-n,r]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++}e&&a.reverse();const m=new h.a(r);return m.bufferVertex(i),m.bufferTexCoord(u),m.bufferIndex(a),m.bufferNormal(p),m},r.cube=function(s,t,e,r=4){const i=s/2,u=(t=t||s)/2,a=(e=e||s)/2,p=[],n=[],o=[],c=[];let m=0;p.push([-i,u,-a]),p.push([i,u,-a]),p.push([i,-u,-a]),p.push([-i,-u,-a]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,p.push([i,u,-a]),p.push([i,u,a]),p.push([i,-u,a]),p.push([i,-u,-a]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,p.push([i,u,a]),p.push([-i,u,a]),p.push([-i,-u,a]),p.push([i,-u,a]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,p.push([-i,u,a]),p.push([-i,u,-a]),p.push([-i,-u,-a]),p.push([-i,-u,a]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,p.push([i,u,-a]),p.push([-i,u,-a]),p.push([-i,u,a]),p.push([i,u,a]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++,p.push([i,-u,a]),p.push([-i,-u,a]),p.push([-i,-u,-a]),p.push([i,-u,-a]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),o.push(4*m+0),o.push(4*m+1),o.push(4*m+2),o.push(4*m+0),o.push(4*m+2),o.push(4*m+3),m++;const f=new h.a(r);return f.bufferVertex(p),f.bufferTexCoord(n),f.bufferIndex(o),f.computeNormals(c),f},r.skybox=function(s,t=4){const e=[],r=[],i=[],u=[];let a=0;e.push([s,s,-s]),e.push([-s,s,-s]),e.push([-s,-s,-s]),e.push([s,-s,-s]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,e.push([s,-s,-s]),e.push([s,-s,s]),e.push([s,s,s]),e.push([s,s,-s]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,e.push([-s,s,s]),e.push([s,s,s]),e.push([s,-s,s]),e.push([-s,-s,s]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,e.push([-s,-s,s]),e.push([-s,-s,-s]),e.push([-s,s,-s]),e.push([-s,s,s]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,e.push([s,s,s]),e.push([-s,s,s]),e.push([-s,s,-s]),e.push([s,s,-s]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,e.push([s,-s,-s]),e.push([-s,-s,-s]),e.push([-s,-s,s]),e.push([s,-s,s]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),r.push([0,0]),r.push([1,0]),r.push([1,1]),r.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3);const p=new h.a(t);return p.bufferVertex(e),p.bufferTexCoord(r),p.bufferIndex(i),p.bufferNormal(u),p},r.bigTriangle=function(){if(!i){const s=[2,1,0],t=[[-1,-1],[-1,4],[4,-1]];(i=new h.a).bufferData(t,"position",2),i.bufferIndex(s)}return i},t.a=r},99:function(s,t){s.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nout vec4 FragColor;\n\nuniform vec3 objectColor;\nuniform vec3 lightColor;\n\nvoid main()\n{\n    FragColor = vec4(lightColor * objectColor, 1.0);\n}\n"}}]);